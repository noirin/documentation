<?xml version="1.0" encoding="utf-8" standalone="no"?>

<!DOCTYPE article
  PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<article><title>3.0 Administration Guide</title><para/>
   <section remap="concept" id="welcome">
      <title id="ttld1e3" remap="title">Welcome</title>
      <para id="parad1e6" remap="shortdesc"/>
 	
      <para id="parad1e10" remap="p">This is the Eucalyptus Administration Guide. The guide shows you how to access Eucalyptus
 	with a web-based GUI and with command line tools. This guide also describes how to perform
 	common administration tasks in three areas: system management, identity management, and
 	resource management.</para>
 	
      <para id="parad1e13" remap="p">This document is intended to be a reference. You do not need to read it in order, unless you are
 	following the directions for a particular task.</para>
 
      <section remap="concept" id="euca_oview">
         <title id="ttld2e3" remap="title">Overview of Eucalyptus</title>
         <para id="parad2e6" remap="shortdesc"/>
 	
         <para id="parad2e10" remap="p">Eucalyptus is a Linux-based software architecture that implements scalable, efficiency-enhancing
 	private and hybrid clouds within an enterprise’s existing IT infrastructure. Because
 	Eucalyptus provides Infrastructure as a Service (IaaS), you can provision your own resources
 	(hardware, storage, and network) through Eucalyptus on an as-needed basis.</para>
 	
         <para id="parad2e13" remap="p">A Eucalyptus cloud is deployed across your enterprise's on-premise data center. As a result, your
 	organization has a full control of the cloud infrastructure. You can implement and enforce
 	various level of security. Sensitive data managed by the cloud does not have to leave your
 	enterprise boundaries, keeping data completely protected from external access by your enterprise
 	firewall.</para>
 	
         <para id="parad2e16" remap="p">Eucalyptus was designed from the ground up to be easy to install and non-intrusive. The
 	software framework is modular, with industry-standard, language-agnostic communication.
 	Eucalyptus is also unique in that it provides a virtual network overlay that isolates network
 	traffic of different users as well as allows two or more clusters to appear to belong to the same
 	Local Area Network (LAN).</para>
 	
         <para id="parad2e19" remap="p">Eucalyptus also interoperates seamlessly with Amazon’s EC2 and S3 public cloud services and
 	thus offers hybrid cloud capability.</para>
 
      </section>
      <section remap="concept" id="accessing_euca">
         <title id="ttld3e3" remap="title">Accessing Eucalyptus</title>
         <para id="parad3e6" remap="shortdesc"/>
 	
         <para id="parad3e10" remap="p">There are two ways to interact with Eucalyptus. You can use the administrative command line
 	interface for making requests to Eucalyptus, or you can use the web-based user interface, called
 	the Eucalyptus Dashboard.</para>
 	
 	
         <tip id="warningd3e13" remap="note">
            <para remap="#PCDATA">This guide will show both CLI and Dashboard steps for performing a task,
 	when the task can be performed by both methods.</para>
         </tip>
 
         <section remap="concept" id="accessing_euca_cli">
            <title id="ttld4e3" remap="title">Command Line Interface</title>
            <para id="parad4e6" remap="shortdesc"/>
 	
 	
            <para id="parad4e10" remap="p">Eucalyptus supports two command line interfaces (CLIs). The administration CLI is installed
 	when you install Eucalyptus server-side components. The administration CLI is for maintaining and
 	modifying Eucalyptus.</para>
 	
            <para id="parad4e13" remap="p">The other user CLI, called Euca2ools, can be downloaded and installed on clients. Euca2ools are
 	for end users and can be used with both Eucalyptus and Amazon Web Services (AWS).</para>
 	
            <para id="parad4e16" remap="p">The commands used in this guide assume that the environment variables exported by a eucarc
 	file for an administrative Eucalyptus user have been set. For more information, see the
 		<ulink url="http://www.eucalyptus.com/sites/all/files/docs/latest/ig.pdf" type="" id="linkd4e18" remap="xref">Eucalyptus Installation Guide</ulink>.</para>
 
         </section>
         <section remap="concept" id="dashboard_overview">
            <title id="ttld5e3" remap="title">Eucalyptus Dashboard Overview</title>
            <para id="parad5e6" remap="shortdesc"/>
 	
            <para id="parad5e10" remap="p">The Eucalyptus Dashboard provides cloud administrators with a way to perform several
 		management tasks in a web user interface.</para>
 		
 		
            <para id="parad5e13" remap="p">The Dashboard provides <emphasis role="bold" id="bd5e15" remap="b">Quick Links</emphasis> for standard administrative actions and queries. These links, located on the left
 			side of the screen, provide a convenient way to navigate through the Dashboard. For example, if you click <emphasis role="bold" id="bd5e18" remap="b">Accounts</emphasis>, the Dashboard
 		 displays the <emphasis role="bold" id="bd5e21" remap="b">Accounts</emphasis> page, listing all accounts in your system. Any property of a link, e.g., an account ID, displays on the right side of the screen as a
 	link.</para>
 	
 	
            <para id="parad5e25" remap="p">For more experienced users, the Dashboard provides a robust search engine. You can search for
 		information or tasks quickly by building your own search. Because the Dashboard is search-based,
 		even the <emphasis role="bold" id="bd5e27" remap="b">Quick Links</emphasis> and other returned URLs from searches are themselves searches. Because each
 		link is search, any Dashboard link you bookmark is also a search.</para>
 		
 	
            <para id="parad5e31" remap="p">So the Dashboard offers you two ways to get information: by search or by following links. To
 		show the member users of an account, you can click <emphasis role="bold" id="bd5e33" remap="b">Accounts</emphasis> in quick links, select the
 		account, and then click on the <emphasis role="bold" id="bd5e36" remap="b">Member users</emphasis> link in the <emphasis role="bold" id="bd5e39" remap="b">Properties</emphasis> section. Or, you
 		use the Search box and type: <userinput id="usrinptd5e42" remap="userinput">user:account=&lt;account_name&gt;</userinput>.</para>
 
            <itemizedlist>
               <title>Related links</title>
		
               <listitem>
                  <para>
                     <xref linkend="dashboard_search" id="xrefd5e49" remap="link"/>
                  </para>
               </listitem>
		
               <listitem>
                  <para>
                     <xref linkend="dashboard_login" id="xrefd5e51" remap="link"/>
                  </para>
               </listitem>
		
               <listitem>
                  <para>
                     <xref linkend="dashboard_using" id="xrefd5e53" remap="link"/>
                  </para>
               </listitem>
	
            </itemizedlist>
            <section remap="task" id="dashboard_login">
               <title id="ttld7e3" remap="title">Signing in to the Eucalyptus Dashboard</title>
               <para id="parad7e6" remap="shortdesc">This section describes how to sign in to the Eucalyptus Dashboard.</para>
        
               <para id="parad7e13" remap="p">The Eucalyptus Dashboard is web-based interface that allows you to manage your
            system, identities, and resources.</para>
               <para id="parad7e16" remap="p">To sign in to the Dashboard:</para>
        
               <orderedlist id="old7e20" remap="steps">
            
                  <listitem id="lid7e22" remap="step">
                     <para remap="#PCDATA">
            	
                        <phrase id="phrsd7e24" remap="cmd">Open a browser window and go to https://&lt;CLC_IP_address&gt;:8443</phrase>
            	
                     </para>
                     <para remap="#PCDATA">Your browser displays a warning.</para>
                  </listitem>
        	
                  <listitem id="lid7e31" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd7e33" remap="cmd">Accept the self-signed SSL certificate and continue.</phrase>
        		
                     </para>
                     <para remap="#PCDATA">The Eucalyptus sign-in page displays.</para>
                  </listitem>
        	
                  <listitem id="lid7e40" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd7e42" remap="cmd">Enter your account name in the <guilabel id="uictrld7e44" remap="uicontrol">Account</guilabel> field.</phrase>
        		
                     </para>
                     <itemizedlist id="uld7e48" remap="choices">
        			
                        <listitem id="lid7e50" remap="choice">
                           <para remap="#PCDATA">For system admins, the account name is <userinput id="usrinptd7e52" remap="userinput">eucalyptus</userinput>.
        			</para>
                        </listitem>
        		
                     </itemizedlist>
                  </listitem>
        	
                  <listitem id="lid7e58" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd7e60" remap="cmd">Enter your user name in the <guilabel id="uictrld7e62" remap="uicontrol">User</guilabel> field.</phrase>
        	
                     </para>
                  </listitem>
        	
                  <listitem id="lid7e67" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd7e69" remap="cmd">Enter your password in the <guilabel id="uictrld7e71" remap="uicontrol">Password</guilabel> field.</phrase>
        	
                     </para>
                  </listitem>
        	
        	
                  <listitem id="lid7e78" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd7e80" remap="cmd">Click the <guilabel id="uictrld7e82" remap="uicontrol">Sign in</guilabel> button.</phrase>
        		
                     </para>
                     <para remap="#PCDATA">The Dashboard <emphasis role="bold" id="bd7e88" remap="b">Start Guide</emphasis> page displays.</para>
                  </listitem>
        
               </orderedlist>
    	
               <para id="parad7e96" remap="p">You can now use the Dashboard to manage your system, identities, and resources.</para>     
    
               <itemizedlist>
                  <title>Related links</title>
		
                  <listitem>
                     <para>
                        <xref linkend="dashboard_overview" id="xrefd7e103" remap="link"/>
                     </para>
                  </listitem>
		
                  <listitem>
                     <para>
                        <xref linkend="managing_system" id="xrefd7e105" remap="link"/>
                     </para>
                  </listitem>
		
		
                  <listitem>
                     <para>
                        <xref linkend="managing_resources" id="xrefd7e109" remap="link"/>
                     </para>
                  </listitem>
	
               </itemizedlist>
            </section>
            <section remap="concept" id="dashboard_using">
               <title id="ttld8e3" remap="title">Understanding the Eucalyptus Dashboard</title>
               <para id="parad8e6" remap="shortdesc">This section explains the components of the Dashboard screen.</para>
		
               <para id="parad8e11" remap="p">The Dashboard screen has the following areas:</para>
		
               <remark id="spd8e14" remap="draft-comment">Include image of screen.</remark>

		
               <variablelist id="dld8e17" remap="dl">
			
                  <varlistentry id="dled8e19" remap="dlentry">
				
                     <term id="dtd8e21" remap="dt">Header</term>
				
                     <listitem id="ddd8e24" remap="dd">
                        <para remap="#PCDATA">This area includes the logo, the link to a user profile setting menu, and the big search
					box.</para>
                     </listitem>
			
                  </varlistentry>

			
                  <varlistentry id="dled8e28" remap="dlentry">
				
                     <term id="dtd8e30" remap="dt">User Profile</term>
				
                     <listitem id="ddd8e33" remap="dd">
                        <para remap="#PCDATA">The current login user identity displays on the right side of the logo area. It shows
					the user name and the account name of the user identity, in the format of </para>
                        <programlisting id="cdblkd8e35" remap="codeblock">&lt;user_name&gt;@&lt;account_name&gt;</programlisting>
                        <para id="parad8e38" remap="p">Click the profile name to display the user profile menu. The menu provides the
						following functions:</para>
                        <itemizedlist id="uld8e41" remap="ul">
						
                           <listitem id="lid8e43" remap="li">
                              <para remap="#PCDATA">
                                 <guilabel id="uictrld8e44" remap="uicontrol">View/change profile</guilabel>: Displays the search result of the
							current user. In the search result page, you can view or change your identity’s
							profile.</para>
                           </listitem>
						
                           <listitem id="lid8e48" remap="li">
                              <para remap="#PCDATA">
                                 <guilabel id="uictrld8e49" remap="uicontrol">View access key</guilabel>: Displays the search result of the current
							user’s access key.</para>
                           </listitem>
						
                           <listitem id="lid8e53" remap="li">
                              <para remap="#PCDATA">
                                 <guilabel id="uictrld8e54" remap="uicontrol">Change password</guilabel>: Displays a dialog to change password.</para>
                           </listitem>
						
                           <listitem id="lid8e58" remap="li">
                              <para remap="#PCDATA">
                                 <guilabel id="uictrld8e59" remap="uicontrol">Download new credentials</guilabel>: Downloads the current user’s
							credential package in a zip file.</para>
                           </listitem>
					
                        </itemizedlist>
                     </listitem>
			
                  </varlistentry>
			
                  <varlistentry id="dled8e65" remap="dlentry">
				
                     <term id="dtd8e67" remap="dt">Quick Links</term>
				
                     <listitem id="ddd8e70" remap="dd">
                        <para remap="#PCDATA">The left side of the Dashboard screen contains the <guilabel id="uictrld8e72" remap="uicontrol">Quick Links</guilabel>
					area. This area provides links to various contents of the Dashboard. </para>
                        <para id="parad8e75" remap="p">The
							<guilabel id="uictrld8e77" remap="uicontrol">Quick Links</guilabel> area is organized into sections made up of two
						levels. The top level is a heading for that section. Under each heading is a second
						section that contains a list of links. Each link is a search query in the form of the
						URL. Click a link to return the associated search result. For example, <guilabel id="uictrld8e80" remap="uicontrol">Your
							Keys</guilabel> is a search query of all the access keys belonging to you.</para>
                        <para id="parad8e84" remap="p">You can hide the <guilabel id="uictrld8e86" remap="uicontrol">Quick Links</guilabel> area by clicking the arrow of the
						vertical separator between <guilabel id="uictrld8e89" remap="uicontrol">Quick Links</guilabel> and the main content
						area.</para>
                     </listitem>
			
                  </varlistentry>
			
                  <varlistentry id="dled8e95" remap="dlentry">
				
                     <term id="dtd8e97" remap="dt">Main Content</term>
				
                     <listitem id="ddd8e100" remap="dd">
                        <para remap="#PCDATA">The center part of the main screen displays the main content, usually the search result
					list. In many content displays, the Dashboard displays a toolbar that contains action
					buttons. The bottom of the content area provides the page navigation controls. 
					</para>
                        <para id="parad8e102" remap="p">The
						search result list usually has multiple columns, some of which are sortable. Click the
						title in the column to sort the column display. If the list is too long, the Dashboard
						partitions the list into multiple pages. By default, each page displays a maximum of 25
						rows, but you can configure this number.</para>
                        <para remap="#PCDATA">. </para>
                        <para id="parad8e105" remap="p">When you select an item in the main
						content area, the Dashboard highlights the entire row and displays the
							<guilabel id="uictrld8e107" remap="uicontrol">Properties</guilabel> area. To select multiple items, use the
							<guilabel id="uictrld8e110" remap="uicontrol">Ctrl</guilabel> key for individual items, or the
							<guilabel id="uictrld8e113" remap="uicontrol">Shift</guilabel> key for a continuous block of items.</para>
                     </listitem>
			
                  </varlistentry>
			
                  <varlistentry id="dled8e119" remap="dlentry">
				
                     <term id="dtd8e121" remap="dt">Properties</term>
				
                     <listitem id="ddd8e124" remap="dd">
                        <para remap="#PCDATA">The <guilabel id="uictrld8e126" remap="uicontrol">Properties</guilabel> area displays the detailed information about a selected search result
					item. The properties are displayed in two columns: the property name is on the left, and
					the property value is on the right. </para>
                        <para id="parad8e129" remap="p">Working with the <guilabel id="uictrld8e131" remap="uicontrol">Properties</guilabel>
						area:</para>
                        <itemizedlist id="uld8e135" remap="ul">
						
                           <listitem id="lid8e137" remap="li">
                              <para remap="#PCDATA">The Dashboard displays values of editable properties in a white input box. If you
							make any changes to value, the Dashboard displays the <guilabel id="uictrld8e139" remap="uicontrol">Save</guilabel>
							button at the bottom. Click this button to save any changed values.</para>
                           </listitem>
						
                           <listitem id="lid8e143" remap="li">
                              <para remap="#PCDATA">Some properties are of complex types. For example, the list of member users of an
							account. In these cases, the property names are displayed in hyperlinks with a
							magnifying glass icon. These hyperlinks invoke a search query.</para>
                           </listitem>
						
                           <listitem id="lid8e146" remap="li">
                              <para remap="#PCDATA">Other properties display an "action" icon. For example,
								<guilabel id="uictrld8e148" remap="uicontrol">Password</guilabel> displays a pencil icon. Click that icon to change
							the password.</para>
                           </listitem>
						
                           <listitem id="lid8e152" remap="li">
                              <para remap="#PCDATA">The Dashboard allows you to customize the displayed information in
								<guilabel id="uictrld8e154" remap="uicontrol">Properties</guilabel>. Click the plus icon to add a new property to the
							display. Click the minus icon to delete a property from the display.</para>
                           </listitem>
						
                           <listitem id="lid8e158" remap="li">
                              <para remap="#PCDATA">Click the <guilabel id="uictrld8e160" remap="uicontrol">X</guilabel> next to the <guilabel id="uictrld8e163" remap="uicontrol">Properties</guilabel>
							title to hide the area.</para>
                           </listitem>
					
                        </itemizedlist>
                     </listitem>
			
                  </varlistentry>
			
                  <varlistentry id="dled8e170" remap="dlentry">
				
                     <term id="dtd8e172" remap="dt">Status</term>
				
                     <listitem id="ddd8e175" remap="dd">
                        <para remap="#PCDATA">The bar at the bottom of the main screen shows system status messages, log window toggle
					button and the software version (from left to right).</para>
                     </listitem>
			
                  </varlistentry>
			
                  <varlistentry id="dled8e179" remap="dlentry">
				
                     <term id="dtd8e181" remap="dt">Logs</term>
				
                     <listitem id="ddd8e184" remap="dd">
                        <para remap="#PCDATA">Click the <guilabel id="uictrld8e186" remap="uicontrol">LOG</guilabel> button on the status bar to pop up the log window.
					The log window records important dashboard events, especially any operations that modify
					system states, e.g. adding a new account, etc. The log windows records the latest 1024 log
					messages.</para>
                     </listitem>
			
                  </varlistentry>
			
		
               </variablelist>
	
            </section>
            <section remap="concept" id="dashboard_search">
               <title id="ttld6e3" remap="title">Using Search</title>
               <para id="parad6e6" remap="shortdesc">This section details the <guilabel id="uictrld6e8" remap="uicontrol">Search</guilabel> function in the Eucalyptus
		Dashboard.</para>
		
               <para id="parad6e14" remap="p">Experienced users can use search box to get any information provided by the dashboard. The
			basic syntax of a search is as follows:</para>
		
               <programlisting id="cdblkd6e17" remap="codeblock">&lt;type&gt;: &lt;field1&gt;=&lt;value1&gt;,&lt;value2&gt;
&lt;field2&gt;=&lt;value1&gt;,&lt;value2&gt;</programlisting>
		
               <para id="parad6e20" remap="p">The &lt;type&gt; specifies the information type provided by the Dashboard. Currently
			Eucalyptus supports the following types:</para>
		
               <informaltable id="tbld6e23" remap="table">
                  <tgroup cols="3">
				
                     <thead>
					
                        <row>
						
                           <entry>Type Name</entry>
						
                           <entry>Description</entry>
						
                           <entry>Fields</entry>
					
                        </row>
				
                     </thead>
				
                     <tbody>
					
                        <row>
						
                           <entry>start</entry>
						
                           <entry>Start page</entry>
						
                           <entry>None</entry>
					
                        </row>
					
                        <row>
						
                           <entry>config</entry>
						
                           <entry>Service components configuration</entry>
						
                           <entry>None</entry>
					
                        </row>
					
                        <row>
						
                           <entry>account</entry>
						
                           <entry>Accounts</entry>
						
                           <entry>
                              <emphasis role="bold" id="bd6e77" remap="b">name</emphasis>, id</entry>
					
                        </row>
					
                        <row>
						
                           <entry>group</entry>
						
                           <entry>User groups</entry>
						
                           <entry>
                              <emphasis role="bold" id="bd6e91" remap="b">account</emphasis>, <emphasis role="bold" id="bd6e94" remap="b">name</emphasis>, id, <emphasis role="bold" id="bd6e97" remap="b">path</emphasis>, user</entry>
					
                        </row>
					
                        <row>
						
                           <entry>user</entry>
						
                           <entry>Users</entry>
						
                           <entry>
                              <emphasis role="bold" id="bd6e111" remap="b">account</emphasis>, <emphasis role="bold" id="bd6e114" remap="b">name</emphasis>, id, <emphasis role="bold" id="bd6e117" remap="b">path</emphasis>, enabled, registration, group,
							[custom keys...] <itemizedlist id="uld6e120" remap="ul">
								
                                 <listitem id="lid6e122" remap="li">
                                    <para remap="#PCDATA">User’s custom keys can be used as fields.</para>
                                 </listitem>
								
                                 <listitem id="lid6e125" remap="li">
                                    <para remap="#PCDATA">
                                       <userinput id="usrinptd6e126" remap="userinput">group</userinput> field means the user has membership in that
									group.</para>
                                 </listitem>
							
                              </itemizedlist>
						
                           </entry>
					
                        </row>
					
                        <row>
						
                           <entry>policy</entry>
						
                           <entry>Eucalyptus policies</entry>
						
                           <entry>
                              <emphasis role="bold" id="bd6e142" remap="b">account</emphasis>, <emphasis role="bold" id="bd6e145" remap="b">user</emphasis>, <emphasis role="bold" id="bd6e148" remap="b">group</emphasis>, <varname id="vrnmd6e151" remap="varname">name</varname>, id,
								<emphasis role="bold" id="bd6e154" remap="b">version</emphasis>, <emphasis role="bold" id="bd6e157" remap="b">text</emphasis>
                           </entry>
					
                        </row>
					
                        <row>
						
                           <entry>key</entry>
						
                           <entry>Access keys</entry>
						
                           <entry>
                              <emphasis role="bold" id="bd6e170" remap="b">account</emphasis>, <emphasis role="bold" id="bd6e173" remap="b">user</emphasis>, id, active, user</entry>
					
                        </row>
					
                        <row>
						
                           <entry>cert</entry>
						
                           <entry>X509 certificates</entry>
						
                           <entry>
                              <emphasis role="bold" id="bd6e187" remap="b">account</emphasis>, <emphasis role="bold" id="bd6e190" remap="b">user</emphasis>, id, revoked, active</entry>
					
                        </row>
					
                        <row>
						
                           <entry>image</entry>
						
                           <entry>VM images</entry>
						
                           <entry>None</entry>
					
                        </row>
					
                        <row>
						
                           <entry>vmtype</entry>
						
                           <entry>VM types</entry>
						
                           <entry>None</entry>
					
                        </row>
					
                        <row>
						
                           <entry>report</entry>
						
                           <entry>Report page</entry>
						
                           <entry>None</entry>
					
                        </row>
				
                     </tbody>
			
                  </tgroup>
               </informaltable>
		
               <note id="noted6e234" remap="note">
                  <para remap="#PCDATA">In the table, the field names in bold font means that for that field, the query evaluator
			does a partial match for the value.</para>
               </note>
		
               <para id="parad6e237" remap="p">The minimal search query contains the type name and a colon. For example, to display the
				<guilabel id="uictrld6e239" remap="uicontrol">Start Guide</guilabel> page, you would enter:</para>
		
               <programlisting id="cdblkd6e243" remap="codeblock">start:</programlisting>
		
		
               <para id="parad6e246" remap="p">After the colon, you enter a list of conditions, if any are accepted by the type name. Each condition has a field name and a list of
			values. The field name and values are separated by an equal sign. There is no space between
			the field name and value. Separate values with a comma, and don't include a space. Separate
			multiple conditions with a space.</para>
		
		
               <para id="parad6e249" remap="p">To evaluate the search query, all conditions must be satisfied. For each condition, only
			one of the value for the field needs to be matched. For example, to find all users in the accounts
			whose names contain "testaccount", and whose user names
			contain "user1" or "user2", and who are enabled, enter the following:</para>
		
		
               <programlisting id="cdblkd6e252" remap="codeblock">user:account=testaccount name=user1,user2 enabled=true</programlisting> 
		
		
               <para id="parad6e255" remap="p">After entering a search query in the
			search box in the header area of the main screen, press the <guilabel id="uictrld6e257" remap="uicontrol">Enter</guilabel> key. The
			search result displays in the content area. The browser URL will also change to reflect the search. Actually,
			the search query itself is part of the URL (after the pound sign). For example:</para>
		
               <programlisting id="cdblkd6e261" remap="codeblock">https://localhost:8443/#account:name=test</programlisting>
		
		
               <para id="parad6e264" remap="p">In fact, you can type a search directly in the URL box of the browser. But
			remember that the URL itself is URL encoded. This also enables Eucalyptus to construct a search URL
			and add to any web page.</para>
	
            </section>
         </section>
      </section>
   </section>
   <section remap="concept" id="managing_system">
      <title id="ttld9e3" remap="title">Managing the Cloud</title>
      <para id="parad9e6" remap="shortdesc"/>
  
      <para id="parad9e11" remap="p">The <guilabel id="uictrld9e13" remap="uicontrol">System Management</guilabel> section of the <guilabel id="uictrld9e16" remap="uicontrol">Quick Links</guilabel>
  	area allows you to go to the <guilabel id="uictrld9e19" remap="uicontrol">Start Guide</guilabel> or the <guilabel id="uictrld9e22" remap="uicontrol">Service
  		Components</guilabel> page.</para>
 
      <section remap="concept" id="system_oview">
         <title id="ttld11e3" remap="title">Cloud Overview</title>
 	
         <para id="parad11e10" remap="p">Eucalyptus is comprised of six components: Cloud Controller, Walrus, Cluster Controller,
 	Storage Controller, Node Controller, and an optional VMWare Broker. Each component is a stand-alone web service. This architecture allows Eucalyptus both to expose each web service as a well-defined, language-agnostic API, and to support existing web service standards for secure communication between its components.</para>
 	
         <variablelist id="dld11e13" remap="dl">
 		
            <varlistentry id="dled11e15" remap="dlentry">
 			
               <term id="dtd11e17" remap="dt">Cloud Controller</term>
 			
               <listitem id="ddd11e20" remap="dd">
                  <para remap="#PCDATA">The Cloud Controller (CLC) is the entry-point into the cloud for administrators, developers,
 				project managers, and end-users. The CLC queries the Node Controller for information about resources, makes high-level scheduling decisions, and makes requests to the Cluster Controllers. As the interface to the management platform, the CLC is responsible for exposing and managing the underlying virtualized resources (servers, network, and storage). You can access the CLC through Amazon’s Elastic Compute Cloud (EC2) and through a web-based Dashboard.</para>
               </listitem>
 		
            </varlistentry>
 		
            <varlistentry id="dled11e24" remap="dlentry">
 			
               <term id="dtd11e26" remap="dt">Walrus</term>
 			
               <listitem id="ddd11e29" remap="dd">
                  <para remap="#PCDATA">Walrus allows users to store persistent data, organized as buckets and objects. You can use
 				Walrus to create, delete, and list buckets, or to put, get, and delete objects, or to set
 				access control policies. Walrus is interface compatible with Amazon’s Simple Storage Service
 				(S3). It provides a mechanism for storing and accessing virtual machine images and user data.
 				Walrus can be accessed by end-users, whether the user is running a client from outside the cloud or from a virtual machine instance running inside the cloud.</para>
               </listitem>
 		
            </varlistentry>
 		
            <varlistentry id="dled11e33" remap="dlentry">
 			
               <term id="dtd11e35" remap="dt">Cluster Controller</term>
 			
               <listitem id="ddd11e38" remap="dd">
                  <para remap="#PCDATA">The Cluster Controller (CC) generally executes on a machine that has network connectivity to both the machines running the Node Controller (NC) and to the machine running the CLC. CCs gather information about a set of node machines and schedules virtual machine (VM) execution on specific nodes. The CC also manages the virtual machine networks. All nodes associated with a single CC must be in the same subnet.</para>
               </listitem>
 		
            </varlistentry>
 		
            <varlistentry id="dled11e42" remap="dlentry">
 			
               <term id="dtd11e44" remap="dt">Storage Controller</term>
 			
               <listitem id="ddd11e47" remap="dd">
                  <para remap="#PCDATA">The Storage Controller (SC) provides functionality similar to the Amazon Elastic Block Store (Amazon EBS). The SC is capable of interfacing with various storage systems (NFS, iSCSI, SAN devices, etc.). Elastic block storage exports storage volumes that can be attached by a VM and mounted or accessed as a raw block device.  EBS volumes persist past VM termination and are commonly used to store persistent data. An EBS volume cannot be shared between VMs and can only be accessed within the same availability zone in which the VM is running. Users can create snapshots from EBS volumes. Snapshots are stored in Walrus and made available across availability zones. Eucalyptus with SAN support lets you use your enterprise-grade SAN devices to host EBS storage within a Eucalyptus cloud.</para>
               </listitem>
 		
            </varlistentry>
 		
            <varlistentry id="dled11e51" remap="dlentry">
 			
               <term id="dtd11e53" remap="dt">Node Controller</term>
 			
               <listitem id="ddd11e56" remap="dd">
                  <para remap="#PCDATA">The Node Controller (NC) executes on any machine that hosts VM instances. The NC controls VM activities, including the execution, inspection, and termination of VM instances. It also fetches and maintains a local cache of instance images, and it queries and controls the system software (host OS and the hypervisor) in response to queries and control requests from the CC. The NC is also responsible for the management of the virtual network endpoint.</para>
               </listitem>
 		
            </varlistentry>
 		
            <varlistentry id="dled11e60" remap="dlentry">
 			
               <term id="dtd11e62" remap="dt">VMware Broker</term>
 			
               <listitem id="ddd11e65" remap="dd">
                  <para remap="#PCDATA">VMware Broker (Broker) is an optional Eucalyptus component activated only in versions of
 				Eucalyptus with VMware support. Broker enables Eucalyptus to deploy virtual machines (VMs) on
 				VMware infrastructure elements. Broker mediates all interactions between the CC and VMware
 				hypervisors (ESX/ESXi) either directly or through VMware vCenter. For more information about
 				working with vSphere Server, see <xref linkend="bp_vsphere" id="xrefd11e67" remap="xref"/>.</para>
               </listitem>
 		
            </varlistentry>
 	
         </variablelist>
 
      </section>
      <section remap="concept" id="bps">
         <title id="ttld13e3" remap="title">Best Practices</title>
         <para id="parad13e6" remap="shortdesc"/>
  
         <para id="parad13e10" remap="p">This section details Eucalyptus best practices for your private cloud.</para>
 
         <section remap="concept" id="bp_vsphere">
            <title id="ttld12e3" remap="title">Working with vSphere</title>
            <para id="parad12e6" remap="shortdesc"/>
 	
            <para id="parad12e10" remap="p">Eucalyptus with the VMware Broker option can create and manage virtual machines on all or a subset of vSphere infrastructure resources. Since Eucalyptus takes over the task of managing Virtual Machines, to avoid interfering with the operation of your cloud, it is important to avoid performing some operations though vSphere-specific tools, such as the vSphere Client. Conversely, since Eucalyptus does not manage vSphere hosts, network, or storage, the administrator will have to continue using vSphere-specific tools for other operations. The following is a comprehensive, but not exhaustive list of operations that should and should not be performed with vSphere-specific tools.</para>
 	
            <sidebar id="sctnd12e13" remap="section">
               <title id="ttld12e15" remap="title">Actions that may be performed with vSphere tools at any time</title>
               <itemizedlist id="uld12e18" remap="ul">
 		
                  <listitem id="lid12e20" remap="li">
                     <para remap="#PCDATA">vSphere management tasks that do not involve resources (VMs, hosts, networks, datastores,
 			folders, vCenter Server sessions, etc.) that have never been and are not being used by Eucalyptus.</para>
                  </listitem>
 		
                  <listitem id="lid12e23" remap="li">
                     <para remap="#PCDATA">Adding new resources -- hosts, networks, datastores, folders -- to vCenter. Such resources may be discovered and used by Eucalyptus automatically, either immediately or after a VMware Broker restart, if the VMware Broker configuration allows that (see 'discover' option in the section on configuring the VMware Broker).</para>
                  </listitem>
 		
                  <listitem id="lid12e26" remap="li">
                     <para remap="#PCDATA">While we recommend using Eucalyptus's API to manage instances, a VM created by Eucalyptus may
 			be powered off using vSphere Server tools. (It is not necessary to delete such a VM as Eucalyptus will delete it.)</para>
                  </listitem>
 		
                  <listitem id="lid12e29" remap="li">
                     <para remap="#PCDATA">Managing roles and permissions in ways that do not reduce privileges of Eucalyptus since the time it became active.</para>
                  </listitem>
 		
                  <listitem id="lid12e32" remap="li">
                     <para remap="#PCDATA">Changing vCenter or ESX(i) host settings that do not interfere with ongoing sessions and operations. For instance, a license on a host utilized by Eucalyptus may be changed as long as the host remains operational.</para>
                  </listitem>
 		
                  <listitem id="lid12e35" remap="li">
                     <para remap="#PCDATA">Changing of vCenter ID or Name (see below regarding the change of IP address).</para>
                  </listitem>
 		
 	
               </itemizedlist>
            </sidebar>
 	
 	
            <sidebar id="sctnd12e40" remap="section">
               <title id="ttld12e42" remap="title">Actions that may be performed when Eucalyptus is not active (specifically, when the VMware Broker is shut down):</title>
               <itemizedlist id="uld12e45" remap="ul">
 			
                  <listitem id="lid12e47" remap="li">
                     <para remap="#PCDATA">Deleting the templates (VMs whose names start with 'emi-'). Those will be recreated if needed, albeit at the cost of additional instance start-up delay. To control the space used by and the number of templates, use VMware Broker's configuration properties vmwarebroker.vsphere_cache_limit_bytes and vmwarebroker.vsphere_cache_max_elements.</para>
                  </listitem>
 			
                  <listitem id="lid12e50" remap="li">
                     <para remap="#PCDATA">Managing roles and permissions for Eucalyptus-managed resources, as long as new roles, if any, are reflected in VMware Broker configuration (see 'login' parameter) and as long as no Eucalyptus-created running VMs are taken out of Eucalyptus's control.
 			</para>
                  </listitem>
 			
                  <listitem id="lid12e53" remap="li">
                     <para remap="#PCDATA">vCenter IP address may be changed as long as VMware Broker's configuration is modified accordingly. IP addresses of ESX hosts may be changed as long as there are no running Eucalyptus VMs on the host (furthermore, a change of IP address may require adjustment of configuration unless the host can be discovered).</para>
                  </listitem>
 			
 		
               </itemizedlist>
            </sidebar>
 	
 	
            <sidebar id="sctnd12e58" remap="section">
               <title id="ttld12e60" remap="title">Actions to avoid with vSphere tools at all times:</title>
               <itemizedlist id="uld12e63" remap="ul">
 			
                  <listitem id="lid12e65" remap="li">
                     <para remap="#PCDATA">Renaming, modifying the settings for, or cloning Eucalyptus-created inventory objects (the name of the top-level folder on vCenter, VM templates, VMs). This includes changing the virtual hardware characteristics of VMs created by Eucalyptus.</para>
                  </listitem>
 			
                  <listitem id="lid12e68" remap="li">
                     <para remap="#PCDATA">Migrating, snapshotting, and failing over VMs or templates (emi-...) created by Eucalyptus to a different host or a different datastore with VMotion, VMware HA, or VMware DRS.</para>
                  </listitem>
 			
                  <listitem id="lid12e71" remap="li">
                     <para remap="#PCDATA">Changing default ports (80 for HTTP and 443 for HTTPS). </para>
                  </listitem>
 			
 		
               </itemizedlist>
            </sidebar>
 
         </section>
         <section remap="concept" id="securing_system">
            <title id="ttld14e3" remap="title">Securing Your Cloud</title>
            <para id="parad14e6" remap="shortdesc"/>
		
            <para id="parad14e10" remap="p">Eucalyptus components receive and exchange messages using either Query or SOAP interfaces (or
			both). Messages received over these interfaces are required to have some form of a time stamp
			(as defined by AWS specification) to prevent message replay attacks. Because Eucalyptus
			enforces strict policies when checking timestamps in the received messages, for the correct
			functioning of the cloud infrastructure, it is crucial to have clocks constantly synchronized
			(for example, with ntpd) on all machines hosting Eucalyptus components. To prevent user
			commands failures, it is also important to have clocks synchronized on the client
			machines.</para>
		
            <para id="parad14e13" remap="p">Following the AWS specification, all Query interface requests containing the Timestamp
			element are rejected as expired after 15 minutes of the timestamp. Requests containing the
			Expires element expire at the time specified by the element. SOAP interface requests using
			WS-Security expire as specified by the WS-Security Timestamp element. </para>
		
            <para id="parad14e16" remap="p">When checking the timestamps for expiration, Eucalyptus allows up to 20 seconds of clock drift
			between the machines. This is a default setting. You can change this value for the CLC at
			runtime by setting the <literal id="cdphd14e18" remap="codeph">bootstrap.webservices.clock_skew_sec</literal> property as follows:</para>
		
            <programlisting id="cdblkd14e22" remap="codeblock">euca-modify-property -p bootstrap.webservices.clock_skew_sec=&lt;new_value_in_seconds&gt;</programlisting>
		
            <para id="parad14e25" remap="p">For additional protection from the message replay attacks, the CLC implements a replay
			detection algorithm and rejects messages with the same signatures received within 15 minutes. </para>
		
            <important id="importantd14e28" remap="note">
               <para remap="#PCDATA">To protect against replay attacks, the CLC only caches messages for 15
			minutes. So it’s important that any client tools used to interact with the CLC have the Expires
			element set to a value less than 15 minutes from the current time. This is usually not an issue
			with standard tools, such as euca2ools and Amazon EC2 API Tools. </para>
            </important>
		
            <para id="parad14e31" remap="p">You can configure replay detection in the CLC to allow replays of the same message for a set
			time 
			period. This might be needed to ensure that legitimate requests submitted by automated
			scripts closely together (such as two requests to describe instances issued within the same
			second) are not rejected as malicious. The time within which messages with the same signatures
			are accepted is controlled by the <literal id="cdphd14e33" remap="codeph">bootstrap.webservices.replay_skew_window_sec</literal> property. The default value of
			this property is three seconds. To change this value, enter the following command:</para>
		
            <programlisting id="cdblkd14e37" remap="codeblock">euca-modify-property -p bootstrap.webservices.replay_skew_window_sec=&lt;new_value_in_seconds&gt;</programlisting>
		
            <para id="parad14e40" remap="p">If you set this property to <literal id="cdphd14e42" remap="codeph">0</literal>, Eucalyptus will not allow any message
			replays. This setting provides the best protection against message replay attacks, but may
			break some of the client-side scripts that issue commands too quickly.</para>
		
            <para id="parad14e46" remap="p">If you set this property to any value greater than 15 minutes plus the values of
			ws.clock_skew_sec (that is, to a value &gt;= 920 sec in the default installation), Eucalyptus
			disables replay detection completely. </para>

	
         </section>
         <section remap="concept" id="bp_ha">
            <title id="ttld15e3" remap="title">High Availability</title>
            <para id="parad15e6" remap="shortdesc"/>
 
            <para id="parad15e10" remap="p">High availability is the result of the combination of functionality provided by Eucalyptus and
 	the environmental and  operational support to maintain the constituent systems's proper operation. Eucalyptus provides functionality aimed at enabling highly available operation:</para>
 	
            <itemizedlist id="uld15e13" remap="ul">
 		
               <listitem id="lid15e15" remap="li">
                  <para remap="#PCDATA">Detection of service faults and monitoring of system health: gather service status, determine current service topology, admit requests which can be satisfied using only healthy services in that topology</para>
               </listitem>
 		
               <listitem id="lid15e18" remap="li">
                  <para remap="#PCDATA">Tools for interrogating the system's health: access to service state information</para>
               </listitem>
 		
               <listitem id="lid15e21" remap="li">
                  <para remap="#PCDATA">Error gathering to aid in determining the cause: access to fault information as it impacts service function</para>
               </listitem>
 		
               <listitem id="lid15e24" remap="li">
                  <para remap="#PCDATA">Automated failover when redundant services are configured: removal of faulty services and enabling of healthy services</para>
               </listitem>
 		
               <listitem id="lid15e27" remap="li">
                  <para remap="#PCDATA">Service state control: ability to remove individual component-services (when configured with HA pair) from operation without disrupting service</para>
               </listitem>
 		
               <listitem id="lid15e30" remap="li">
                  <para remap="#PCDATA">Replacement/restoration of component-services: procedures for restoring/replacing a component service after a total-loss failure (e.g., disk failure, host combustion, etc.)</para>
               </listitem>
 	
            </itemizedlist>
 	 	
 	
            <para id="parad15e34" remap="p">In addition to previously detailed deployment recommendations, delivering highly available
 	services with Eucalyptus depends on appropriate operational and maintenance support. The following sections detail the related system functionality and procedures.</para>
 	
 	
            <sidebar id="sctnd15e37" remap="section">
               <title id="ttld15e39" remap="title">Understanding Service State</title>
               <para id="parad15e42" remap="p">The system monitors service health and enables healthy services to process user requests while marking faulty services as being NOTREADY. Each component service is interrogated by the system to determine its current state. Faults are detected either:</para>
               <itemizedlist id="uld15e45" remap="ul">
 		
                  <listitem id="lid15e47" remap="li">
                     <para remap="#PCDATA">The service reporting a fault has been detected (for example, due to misconfiguration, dependency service failure, environmental fault, etc.)</para>
                  </listitem>
 		
                  <listitem id="lid15e50" remap="li">
                     <para remap="#PCDATA">Failure to contact the service</para>
                  </listitem>
 		
               </itemizedlist>
               <para id="parad15e54" remap="p">The following table overviews the relevant states</para>
               <informaltable id="tbld15e57" remap="table">
                  <tgroup cols="4">
 				
                     <thead>
 					
                        <row>
 						
                           <entry>State</entry>
 						
                           <entry>Operational</entry>
 						
                           <entry>In use by system</entry>
 						
                           <entry>Description</entry>
 					
                        </row>
 				
                     </thead>
 				
                     <tbody>
 					
                        <row>
 						
                           <entry>
                              <literal id="cdphd15e84" remap="codeph">ENABLED</literal>
                           </entry>
 						
                           <entry>Yes</entry>
 						
                           <entry>Yes</entry>
 						
                           <entry>Service is operating correctly and is selected for processing requests</entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>
                              <literal id="cdphd15e100" remap="codeph">DISABLED</literal>
                           </entry>
 						
                           <entry>Yes</entry>
 						
                           <entry>No</entry>
 						
                           <entry>Service is operating correctly but is not selected for processing requests</entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>
                              <literal id="cdphd15e116" remap="codeph">NOTREADY</literal>
                           </entry>
 						
                           <entry>No</entry>
 						
                           <entry>No</entry>
 						
                           <entry>Service is failing to operate correctly</entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>
                              <literal id="cdphd15e132" remap="codeph">BROKEN</literal>
                           </entry>
 						
                           <entry>No</entry>
 						
                           <entry>No</entry>
 						
                           <entry>Service is not contactable by the system</entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>
                              <literal id="cdphd15e148" remap="codeph">STOPPED</literal>
                           </entry>
 						
                           <entry>N/A</entry>
 						
                           <entry>No</entry>
 						
                           <entry>Service has been stopped by an administrator</entry>
 					
                        </row>
 					
 				
                     </tbody>
 			
                  </tgroup>
               </informaltable>
               <para id="parad15e164" remap="p">The following diagram indicates the set of relevant states and transitions between them. Black
 			arrows indicate a transition between states that is initiated by the system or an administrator
 			request. Red errors indicate a failure to transition into the originating state that results in a transition to the destination error state. </para>
               <para remap="#PCDATA">
 		
                  <mediaobject id="imgd15e167" remap="image">
                     <imageobject>
                        <imagedata fileref="images/ha_state.jpg"/>
                     </imageobject>
                     <textobject remap="alt_attribute">
                        <phrase remap="#PCDATA">Service state diagram</phrase>
                     </textobject>
                  </mediaobject>
 		
 		
               </para>
               <para id="parad15e169" remap="p">Based on the collected service state, the system will:	</para>
               <itemizedlist id="uld15e172" remap="ul">
 			
                  <listitem id="lid15e174" remap="li">
                     <para remap="#PCDATA">Attempt to advance previously non-functioning services to a functional state</para>
                  </listitem>
 			
                  <listitem id="lid15e177" remap="li">
                     <para remap="#PCDATA">Determine whether any functioning services can be <literal id="cdphd15e179" remap="codeph">ENABLED</literal> and added to the set used for serving requests</para>
                  </listitem>
 		
               </itemizedlist>
            </sidebar>
 	
 	
            <sidebar id="sctnd15e185" remap="section">
               <title id="ttld15e187" remap="title">Understanding System Availability</title>
               <para id="parad15e190" remap="p">The impact of a service fault on the system's availability depends upon the deployment and configuration of the system. The following table details the scope a service fault can have on system availability for each component type.</para>
               <informaltable id="tbld15e193" remap="table">
                  <tgroup cols="3">
 				
                     <thead>
 					
                        <row>
 						
                           <entry>Component</entry>
 						
                           <entry>Scope (Fault Region)</entry>
 						
                           <entry>Description</entry>
 					
                        </row>
 				
                     </thead>
 				
                     <tbody>
 					
                        <row>
 						
                           <entry>Cloud Controller</entry>
 						
                           <entry>Cloud</entry>
 						
                           <entry>The CLC is a cloud-wide service and must have at least one operation service.</entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>Walrus</entry>
 						
                           <entry>Cloud</entry>
 						
                           <entry>Walrus is a cloud-wide service and must have at least one operation service.</entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>Cluster Controller</entry>
 						
                           <entry>Availability Zone</entry>
 						
                           <entry>CCs are associated with a partition and service requests specific to
 							an availability zone. Should an availability zone not have an operational CC, instance
 							requests will be rejected for the corresponding zone.</entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>Storage Controller</entry>
 						
                           <entry>Availability Zone</entry>
 						
                           <entry>Storage controllers are associated with a partition and service requests specific to
 							an availability zone. Should an availability zone not have an operational storage controller volume and snapshot creation requests will be rejected for the corresponding zone</entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>VMware Broker</entry>
 						
                           <entry>Availability Zone</entry>
 						
                           <entry>VMware Broker are associated with a partition and service requests specific to an
 							availability zone. Should an availability zone not have an operational VMware Broker instance requests will be rejected for the corresponding zone</entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>Arbitrators</entry>
 						
                           <entry>User-facing Service Host</entry>
 						
                           <entry>Arbitrators are associated with a host that runs user-facing component services (CLC,
 							Walrus). Each host must have an operational Arbitrator. Should a
 							component service host have a configured but faulty Arbitrator, a fail-stop condition occurs
 							and locally hosted services report a <literal id="cdphd15e284" remap="codeph">NOTREADY</literal> error.</entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>Node Controller </entry>
 						
                           <entry>Compute Host</entry>
 						
                           <entry>NCs are associated with each node and interact with the hypervisor to service node-specific requests. </entry>
 					
                        </row>
 				
                     </tbody>
 			
                  </tgroup>
               </informaltable>
               <para id="parad15e304" remap="p">A quick way to evaluate system availability is to determine whether:</para>
               <itemizedlist id="uld15e307" remap="ul">
 			
                  <listitem id="lid15e309" remap="li">
                     <para remap="#PCDATA">The cloud has an enabled CLC</para>
                  </listitem>
 			
                  <listitem id="lid15e312" remap="li">
                     <para remap="#PCDATA">The cloud has an enabled Walrus</para>
                  </listitem>
 			
                  <listitem id="lid15e315" remap="li">
                     <para remap="#PCDATA">The availability zone has an enabled CC</para>
                  </listitem>
 			
                  <listitem id="lid15e318" remap="li">
                     <para remap="#PCDATA">The availability zone has an enabled SC</para>
                  </listitem>
 			
                  <listitem id="lid15e321" remap="li">
                     <para remap="#PCDATA">The user-facing service host has one reachable Arbitrator per host (if you configure an
 				Arbitrator)</para>
                  </listitem>
 		
               </itemizedlist>
            </sidebar>
 	
 
            <itemizedlist>
               <title>Related links</title>
               <listitem>
                  <para>
                     <xref linkend="inspect_health" id="xrefd15e328" remap="link"/>
                  </para>
               </listitem>
            </itemizedlist>
         </section>
      </section>
      <section remap="concept" id="system_tasks">
         <title id="ttld17e3" remap="title">Cloud Tasks</title>
         <para id="parad17e6" remap="shortdesc">Listing of the cloud-related tasks.</para>
  
         <para id="parad17e11" remap="p">You can perform the following cloud-related tasks listed in this section:</para>
 	
         <itemizedlist id="uld17e14" remap="ul">
 		
            <listitem id="lid17e16" remap="li"/>
 		
            <listitem id="lid17e19" remap="li"/>
 		
            <listitem id="lid17e22" remap="li"/>
 		
            <listitem id="lid17e25" remap="li"/>
 		
            <listitem id="lid17e28" remap="li"/>
 		
            <listitem id="lid17e31" remap="li"/>
 		
            <listitem id="lid17e34" remap="li"/>
 		
            <listitem id="lid17e37" remap="li"/>
 		
            <listitem id="lid17e40" remap="li"/>
 		
            <listitem id="lid17e43" remap="li"/>
 		
 		
 	
         </itemizedlist>
 	
 	
 
         <section remap="task" id="inspect_health">
            <title id="ttld16e3" remap="title">Inspect System Health</title>
            <para id="parad16e6" remap="shortdesc"/>
        
            <para id="parad16e12" remap="p">Eucalyptus provides access to the current view of service state and the ability to
        		manipulate the state. You can inspect the service state to either ensure system health or
        		to identify faulty services. You can modify a service state to maintain activities and
        		apply external service placement policies. </para>
        
    
            <section remap="task" id="inspect_health_inspect">
               <title id="ttld16e19" remap="title">View Service State</title>
               <para id="parad16e22" remap="shortdesc"/>
			
               <para id="parad16e28" remap="p">Use the <command id="cmdnmd16e30" remap="cmdname">euca-describe-services</command> command to view the service state. The output indicates:</para>
               <itemizedlist id="uld16e34" remap="ul">
					
                  <listitem id="lid16e36" remap="li">
                     <para remap="#PCDATA">Component type of the service</para>
                  </listitem>
					
                  <listitem id="lid16e39" remap="li">
                     <para remap="#PCDATA">Partition in which the service is registered</para>
                  </listitem>
					
                  <listitem id="lid16e42" remap="li">
                     <para remap="#PCDATA">Unique name of the service</para>
                  </listitem>
					
                  <listitem id="lid16e45" remap="li">
                     <para remap="#PCDATA">Current view of service state</para>
                  </listitem>
					
                  <listitem id="lid16e48" remap="li">
                     <para remap="#PCDATA">Last reported epoch (this can be safely ignored)</para>
                  </listitem>
					
                  <listitem id="lid16e51" remap="li">
                     <para remap="#PCDATA">Service URI</para>
                  </listitem>
					
                  <listitem id="lid16e54" remap="li">
                     <para remap="#PCDATA">Fully qualified name of the service (This is needed for manipulating services that did not get
						unique names during registration. For example: internal services like reporting or DNS)</para>
                  </listitem>
				
               </itemizedlist>
               <para id="parad16e58" remap="p">The default output includes the services that are registered during configuration, as well as
					information about the DNS service, if present. You can obtain additional service state information, such as 
					internal services, by providing the <literal id="cdphd16e60" remap="codeph">–system-internal</literal> flag.</para>
               <para id="parad16e64" remap="p">You can also make requests to retrieve service information that is filtered by either:</para>
               <itemizedlist id="uld16e67" remap="ul">
				
                  <listitem id="lid16e69" remap="li">
                     <para remap="#PCDATA">current state (for example, <literal id="cdphd16e71" remap="codeph">NOTREADY</literal>)</para>
                  </listitem>
					
                  <listitem id="lid16e75" remap="li">
                     <para remap="#PCDATA">host where service is registered</para>
                  </listitem> 
					
                  <listitem id="lid16e78" remap="li">
                     <para remap="#PCDATA">partition where service is registered</para>
                  </listitem>
					
                  <listitem id="lid16e81" remap="li">
                     <para remap="#PCDATA">type of service (for example, CC or Walrus)</para>
                  </listitem>
				
               </itemizedlist>
               <para id="parad16e85" remap="p">When you investigate service failures, you can specify <literal id="cdphd16e87" remap="codeph">-events</literal> to return a
						summary of the last fault. You can retrieve extended information (primarily useful for
						debugging) by specifying <literal id="cdphd16e90" remap="codeph">–events –events-verbose</literal>.</para>
			
		
            </section>
            <section remap="task" id="inspect_health_mod">
               <title id="ttld16e99" remap="title">Modify Service State</title>
               <para id="parad16e102" remap="shortdesc"/>
			
               <para id="parad16e108" remap="p">To modify a service:</para>
			
               <orderedlist id="old16e112" remap="steps">
				
                  <listitem id="lid16e114" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd16e116" remap="cmd">Enter the following command:</phrase>
					
                     </para>
                     <programlisting id="cdblkd16e121" remap="codeblock">euca-modify-service &lt;service_name&gt; -s &lt;new_service_state&gt;</programlisting>
                  </listitem>
			
               </orderedlist>
			
               <informalexample id="xmpd16e127" remap="example">
				
                  <para id="parad16e129" remap="p">If, for example, you have SCs that are correctly configured and operating in HA mode.
					However, you want to shut down the primary SC for maintenance. The
					primary SC is <literal id="cdphd16e131" remap="codeph">SC00</literal> and the secondary SC is <literal id="cdphd16e134" remap="codeph">SC01</literal>.
					<literal id="cdphd16e137" remap="codeph">SC00</literal> is <literal id="cdphd16e140" remap="codeph">ENABLED</literal> and <literal id="cdphd16e143" remap="codeph">SC01</literal> is
					<literal id="cdphd16e146" remap="codeph">DISABLED</literal>.</para>
				
                  <para id="parad16e150" remap="p">To disable <literal id="cdphd16e152" remap="codeph">SC00</literal> and cause <literal id="cdphd16e155" remap="codeph">SC01</literal> to take over, you would
				enter:</para>
				
                  <programlisting id="cdblkd16e159" remap="codeblock">euca-modify-service SC00 -s DISABLED</programlisting>
				
                  <para id="parad16e162" remap="p">To check status of services, you would enter:</para>
				
                  <programlisting id="cdblkd16e165" remap="codeblock">euca-describe-services</programlisting>
				
                  <para id="parad16e168" remap="p">When <literal id="cdphd16e170" remap="codeph">SC01</literal> is marked <literal id="cdphd16e173" remap="codeph">ENABLED</literal>, the eucalyptus-cloud process
					on the host that SC00 is running can be safely shutdown and maintenance tasks can be performed.
					When maintenance is complete, you can start the eucalyptus-cloud process on
					<literal id="cdphd16e176" remap="codeph">SC00</literal>. <literal id="cdphd16e179" remap="codeph">SC00</literal> will enter the <literal id="cdphd16e182" remap="codeph">DISABLED</literal> state by
					default. You can chose to let <literal id="cdphd16e185" remap="codeph">SC00</literal> continue to be the primary and <literal id="cdphd16e188" remap="codeph">SC01</literal> will be the secondary.</para>
				
                  <para id="parad16e192" remap="p">If you want to designate <literal id="cdphd16e194" remap="codeph">SC00</literal> as the primary, make sure no volumes or
					snapshots are being created and that no volumes are being attached or detached, and then enter:</para>
				
                  <programlisting id="cdblkd16e198" remap="codeblock">euca-modify-service SC01 -s DISABLED</programlisting>
				
                  <para id="parad16e201" remap="p">Monitor the state of services using <literal id="cdphd16e203" remap="codeph">euca-describe-services</literal> until
					<literal id="cdphd16e206" remap="codeph">SC01</literal> is marked <literal id="cdphd16e209" remap="codeph">DISABLED</literal> and <literal id="cdphd16e212" remap="codeph">SC00</literal> is <literal id="cdphd16e215" remap="codeph">ENABLED</literal>.</para>
			
               </informalexample>
		
            </section>
         </section>
         <section remap="task" id="generating_reports">
            <title id="ttld18e3" remap="title">Monitor Usage</title>
        
            <para id="parad18e10" remap="p">Generate reports to monitor cloud resource use over a specified date range. Usage can be
        	reported for instances, storage, and Walrus.</para>
            <itemizedlist id="uld18e13" remap="ul">
        		
               <listitem id="lid18e15" remap="li">
                  <para remap="#PCDATA">
                     <emphasis role="bold" id="bd18e16" remap="b">Instances:</emphasis> Shows a count and duration of instances running, sorted by image size, as well as I/O net and disk, during the date range specified. If desired, the report can be displayed on a per-user, per-account, per-cluster or per-availability zone basis.  Once filtered, reports can be grouped using the same criteria as filters. For example, you might display the results by user, and then group the results so that they are displayed based on accounts, e.g. each user in account A is shown followed by each user in account B, etc.</para>
               </listitem>
        		
               <listitem id="lid18e20" remap="li">
                  <para remap="#PCDATA">
                     <emphasis role="bold" id="bd18e21" remap="b">Storage:</emphasis>Shows GB of storage used (max and GB-days) for volumes and snapshots during the date range specified. Display filters and grouping are the same as for instances.</para>
               </listitem>
        		
               <listitem id="lid18e25" remap="li">
                  <para remap="#PCDATA">
                     <emphasis role="bold" id="bd18e26" remap="b">Walrus:</emphasis> Shows maximum buckets and objects used through Walrus during the date range specified. Display filters and grouping are available on a per-user or per-account basis.</para>
               </listitem>
        	
            </itemizedlist>
            <para id="parad18e31" remap="p">You can generate reports in either CSV, PDF, or HTML formats for use with external tools.</para>
            <para id="parad18e34" remap="p">To generate reports:</para>
        
            <orderedlist id="old18e38" remap="steps">
          
               <listitem id="lid18e40" remap="step">
                  <para remap="#PCDATA">
          	
                     <phrase id="phrsd18e42" remap="cmd">Log in to the Dashboard at https://&lt;CLC_hostname_or_ipaddress&gt;:8443.</phrase>
          
                  </para>
               </listitem>  
        	
               <listitem id="lid18e46" remap="step">
                  <para remap="#PCDATA">
                
                     <phrase id="phrsd18e48" remap="cmd">Click <emphasis role="bold" id="bd18e50" remap="b">Usage Report</emphasis> in the <emphasis role="bold" id="bd18e53" remap="b">Quick Links</emphasis> section.</phrase>
            	
                  </para>
                  <para remap="#PCDATA">The <emphasis role="bold" id="bd18e59" remap="b">Usage Report</emphasis> page displays.</para>
               </listitem>
        	
               <listitem id="lid18e64" remap="step">
                  <para remap="#PCDATA">
        		
                     <phrase id="phrsd18e66" remap="cmd">In the <emphasis role="bold" id="bd18e68" remap="b">Start date</emphasis> field, select the date to start</phrase>
        	
                  </para>
               </listitem>
        	
               <listitem id="lid18e73" remap="step">
                  <para remap="#PCDATA">
        		
                     <phrase id="phrsd18e75" remap="cmd">Click the <emphasis role="bold" id="bd18e77" remap="b">Generate</emphasis> button.</phrase>
        		
        	
                  </para>
               </listitem>
        
            </orderedlist>
    	
            <para id="sctnd18e83" remap="result">The usage report displays, reflecting your choices in the report.</para>
    
         </section>
         <section remap="concept" id="view_user_resources">
            <title id="ttld27e3" remap="title">View User Resources</title>
            <para id="parad27e6" remap="shortdesc"/>
  
            <para id="parad27e10" remap="p">To see resource use by your cloud users, Eucalyptus provides the following commands with the
  -verbose flag:</para>
 	
            <itemizedlist id="uld27e13" remap="ul">
 		
               <listitem id="lid27e15" remap="li">
                  <para remap="#PCDATA">
                     <literal id="cdphd27e16" remap="codeph">euca-describe-groups verbose</literal>: Returns information about security groups in
 			your account, including output type identifier, security group ID, security group name, security
 			group description, output type identifier, account ID of the group owner, name of group granting
 			permission, type of rule, protocol to allow, start of port range, end of port range, source (for
 			ingress rules) or destination (for egress rules), and any tags assigned to the security group.</para>
               </listitem>
 		
               <listitem id="lid27e20" remap="li">
                  <para remap="#PCDATA">
                     <literal id="cdphd27e21" remap="codeph">euca-describe-instances verbose</literal>: Returns information about your instances,
 			including output type identifier, reservation ID, name of each security group the instance is
 			in, output type identifier, instance ID for each running instance, EMI ID of the image on which
 			the instance is based, public DNS name associated with the instance (for instances in the
 			running state), private DNS name associated with the instance (for instances in running state),
 			instance state, key name, launch index, instance type, launch time, availability zone, kernel
 			ID, ramdisk ID, monitoring state, public IP address, private IP address, type of root device
 			(ebs or instance-store), placement group the cluster instance is in, virtualization type
 			(paravirtual or hvm), any tags assigned to the instance, hypervisor type, block device
 			identifier for each EBS volume the instance is using, along with the device name, the volume ID, and the timestamp.</para>
               </listitem>
 		
               <listitem id="lid27e25" remap="li">
                  <para remap="#PCDATA">
                     <literal id="cdphd27e26" remap="codeph">euca-describe-keypairs verbose</literal>: Returns information about key pairs
 			available to you, including keypair identifier, keypair name, and private key fingerprint.</para>
               </listitem>
 		
               <listitem id="lid27e30" remap="li">
                  <para remap="#PCDATA">
                     <literal id="cdphd27e31" remap="codeph">euca-describe-snapshots verbose</literal>: Returns information about EBS snapshots
 			available to you, including snapshot identifier, ID of the snapshot, ID of the volume, snapshot
 			state (pending, completed, error), timestamp when snapshot initiated, percentage of completion,
 			ID of the owner, volume sized, description, and any tags assigned to the snapshot.</para>
               </listitem>
 		
               <listitem id="lid27e35" remap="li">
                  <para remap="#PCDATA">
                     <literal id="cdphd27e36" remap="codeph">euca-describe-volumes verbose</literal>: Describes your EBS volumes, including volume identifier, volume ID, size of the volume in GiBs, snapshot from which the volume was created, availability zone, volume state (creating,
 			available, in-use, deleting, deleted, error), timestamp of the volume creation, and any tags
 			assigned to the volume.</para>
               </listitem>
 		
 	
            </itemizedlist>
 
         </section>
         <section remap="task" id="list_arbitrators">
            <title id="ttld19e3" remap="title">List Arbitrators</title>
            <para id="parad19e6" remap="shortdesc"/>
        
            <para id="parad19e12" remap="p">To see a list of Arbitrators running on your cloud:</para>  
    	
            <itemizedlist id="uld19e16" remap="steps-unordered">
            
               <listitem id="lid19e18" remap="step">
                  <para remap="#PCDATA">
                
                     <phrase id="phrsd19e20" remap="cmd">Enter the following command to display Arbitrators for the current CLC or
                	Walrus:</phrase>
            	
                  </para>
                  <programlisting id="cdblkd19e25" remap="codeblock">/usr/sbin/euca-describe-services --system-internal</programlisting>
               </listitem>
    		
               <listitem id="lid19e30" remap="step">
                  <para remap="#PCDATA">
    			
                     <phrase id="phrsd19e32" remap="cmd">Enter the following command to display Arbitrators on both primary and secondary CLCs or
    				Walruses:</phrase>
    			
                  </para>
                  <programlisting id="cdblkd19e37" remap="codeblock">/usr/sbin/euca_conf --list-arbitrators</programlisting>
               </listitem>
    	
            </itemizedlist>
    
         </section>
         <section remap="task" id="add_nodes">
            <title id="ttld22e3" remap="title">Add a Node</title>
            <para id="parad22e6" remap="shortdesc">Describes how to add a node to your system.</para>
        
            <para id="parad22e13" remap="p">If you want to increase your system’s capacity, you’ll want to add more nodes (NC
        		servers). To add a
        		node, perform the following tasks:</para>
        
            <orderedlist id="old22e17" remap="steps">
            
               <listitem id="lid22e19" remap="step">
                  <para remap="#PCDATA">
                
                     <phrase id="phrsd22e21" remap="cmd">Log in to the CLC and enter the following command:</phrase>

                  </para>
                  <programlisting id="cdblkd22e25" remap="codeblock">/usr/sbin/euca_conf --register-nodes \ "&lt;nodeName1&gt; ...
&lt;nodeNameN&gt;"</programlisting>
               </listitem>
        	
               <listitem id="lid22e29" remap="step">
                  <para remap="#PCDATA">
        		
                     <phrase id="phrsd22e31" remap="cmd">When prompted, enter the password to log into &lt;nodeNameN&gt;.</phrase>
        		
                  </para>
                  <para remap="#PCDATA">Eucalyptus requires this password to propagate the cryptographic keys.</para>
               </listitem>
        
            </orderedlist>
    	
    
         </section>
         <section remap="task" id="del_nodes">
            <title id="ttld23e3" remap="title">Remove a Node</title>
            <para id="parad23e6" remap="shortdesc">Describes how to delete nodes in your system.</para>
		
            <para id="parad23e13" remap="p">If you want to decrease your system’s capacity, you’ll need to decrease nodes (NC servers). To delete a
				node, perform the following tasks.</para>
		
            <orderedlist id="old23e17" remap="steps">
			
               <listitem id="lid23e19" remap="step">
                  <para remap="#PCDATA">
				
                     <phrase id="phrsd23e21" remap="cmd">Log in to the CLC and enter the following command:</phrase>
				
                  </para>
                  <programlisting id="cdblkd23e25" remap="codeblock">/usr/sbin/euca_conf	--deregister-nodes "&lt;nodeName1&gt; ... &lt;nodeNameN&gt;"</programlisting>
               </listitem>
		
            </orderedlist>
	
         </section>
         <section remap="concept" id="restart_euca">
            <title id="ttld24e3" remap="title">Restart Eucalyptus</title>
            <para id="parad24e6" remap="shortdesc">Describes the recommended processes to restart Eucalyptus, including terminating
		instances and restarting Eucalyptus components.</para>
		
            <para id="parad24e11" remap="p">You must restart Eucalyptus whenever you make a physical change (e.g., switch out routers), or edit the eucalyptus.conf file. To restart Eucalyptus, perform the following tasks in the order presented.</para>
		
		
            <note id="noted24e14" remap="note">
               <para remap="#PCDATA">Before you restart Eucalyptus, we recommend that you notify all users that you are terminating all instances.</para>
            </note>
		
		
            <orderedlist id="old24e17" remap="ol">
			
               <listitem id="lid24e19" remap="li"/>
			
               <listitem id="lid24e22" remap="li"/>
			
               <listitem id="lid24e25" remap="li"/>
			
               <listitem id="lid24e28" remap="li"/>
			
               <listitem id="lid24e31" remap="li"/>
			
               <listitem id="lid24e34" remap="li"/>
		
            </orderedlist>
	
            <section remap="task" id="instance_shutdown">
               <title id="ttld28e3" remap="title">Shut Down All Instances</title>
               <para id="parad28e6" remap="shortdesc"/>
        
               <para id="parad28e12" remap="p">To terminate all instances on all nodes:</para>
        
               <orderedlist id="old28e16" remap="steps">
            
        	
                  <listitem id="lid28e18" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd28e20" remap="cmd">Enter the following command:</phrase>
        			
                     </para>
                     <programlisting id="cdblkd28e24" remap="codeblock">euca-terminate-instances &lt;instance_id&gt;</programlisting>
                  </listitem>
        
               </orderedlist>
    
            </section>
            <section remap="task" id="clc_restart">
               <title id="ttld29e3" remap="title">Restart the CLC</title>
               <para id="parad29e6" remap="shortdesc"/>
        
               <para id="sctnd29e10" remap="context">
        
        
               </para>
        
               <orderedlist id="old29e13" remap="steps">
            
                  <listitem id="lid29e15" remap="step">
                     <para remap="#PCDATA">
                
                        <phrase id="phrsd29e17" remap="cmd">Log in to the CLC and enter the following command:</phrase>
            	
                     </para>
                     <programlisting id="cdblkd29e22" remap="codeblock">service eucalyptus-cloud restart</programlisting>
                     <para remap="#PCDATA">All Eucalyptus components on this server will restart.</para>
                  </listitem>
        
               </orderedlist>
    
            </section>
            <section remap="task" id="walrus_restart">
               <title id="ttld30e3" remap="title">Restart Walrus</title>
               <para id="parad30e6" remap="shortdesc"/>
		
               <para id="sctnd30e10" remap="context">
			
		
               </para>
		
               <orderedlist id="old30e13" remap="steps">
			
                  <listitem id="lid30e15" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd30e17" remap="cmd">Log in to Walrus and enter the following command:</phrase>
				
                     </para>
                     <programlisting id="cdblkd30e22" remap="codeblock">service eucalyptus-cloud restart</programlisting>
                  </listitem>
		
               </orderedlist>
	
            </section>
            <section remap="concept" id="cc_restart">
               <title id="ttld31e3" remap="title">Restart the CC</title>
               <para id="parad31e6" remap="shortdesc"/>
		
               <para id="parad31e10" remap="p">You can start the CC two different ways. A normal restart causes the CC to re-parse the eucalyptus.conf file without resetting the networking state of the cloud. This means that the CC maintains routes, firewall rules, IP assignments for running VMs. This is how you restart under normal circumstances.</para>
		
               <para id="parad31e13" remap="p">A clean restart causes the CC to reset the networking configuration it maintains. The CC clears any existing network configuration regardless of whether it is in use.  That is, a clean restart of a CC managing active VMs can cause the network connectivity they are using to be irreparably lost. We recommend that you only perform this type of restart when you change network modes.</para>
		
	
               <section remap="task" id="cc_restart_normal">
                  <title id="ttld34e3" remap="title">Restart the CC (Normal)</title>
                  <para id="parad34e6" remap="shortdesc"/>
        
                  <para id="parad34e12" remap="p">To perform a normal restart:</para>
        
                  <orderedlist id="old34e16" remap="steps">
            
                     <listitem id="lid34e18" remap="step">
                        <para remap="#PCDATA">
            	
                           <phrase id="phrsd34e20" remap="cmd">Log in to the CC and enter the following command:
            	</phrase>
            	
                        </para>
                        <programlisting id="cdblkd34e25" remap="codeblock">service eucalyptus-cc restart</programlisting>
                     </listitem>
        
                  </orderedlist>
    
               </section>
               <section remap="task" id="cc_restart_clean">
                  <title id="ttld35e3" remap="title">Restart the CC (Clean)</title>
                  <para id="parad35e6" remap="shortdesc"/>
		
                  <para id="parad35e12" remap="p">To perform a clean restart:</para>
		
                  <orderedlist id="old35e16" remap="steps">
			
                     <listitem id="lid35e18" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd35e20" remap="cmd">Log in to the CC and enter the following command:
				</phrase>
				
                        </para>
                        <programlisting id="cdblkd35e25" remap="codeblock">service eucalyptus-cc cleanrestart</programlisting>
                     </listitem>
		
                  </orderedlist>
	
               </section>
            </section>
            <section remap="task" id="sc_restart">
               <title id="ttld32e3" remap="title">Restart the SC</title>
               <para id="parad32e6" remap="shortdesc"/>
		
               <para id="sctnd32e10" remap="context">
			
		
               </para>
		
               <orderedlist id="old32e13" remap="steps">
			
                  <listitem id="lid32e15" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd32e17" remap="cmd">Log in to the SC and enter the following command:</phrase>
				
                     </para>
                     <programlisting id="cdblkd32e22" remap="codeblock">service eucalyptus-cloud restart</programlisting>
                  </listitem>
		
               </orderedlist>
	
            </section>
            <section remap="task" id="nc_restart">
               <title id="ttld33e3" remap="title">Restart a NC</title>
               <para id="parad33e6" remap="shortdesc"/>
        
               <para id="sctnd33e10" remap="context">
           
        
               </para>
    	
               <orderedlist id="old33e13" remap="steps">
    		
                  <listitem id="lid33e15" remap="step">
                     <para remap="#PCDATA">
    			
                        <phrase id="phrsd33e17" remap="cmd">Log in to the NC and enter the following command:
    			</phrase>
    			
                     </para>
                     <programlisting id="cdblkd33e22" remap="codeblock">service eucalyptus-nc restart</programlisting>
                  </listitem>
    		
                  <listitem id="lid33e27" remap="step">
                     <para remap="#PCDATA">
    			
                        <phrase id="phrsd33e29" remap="cmd">Repeat for each NC.</phrase>
    		
                     </para>
                  </listitem>
    	
               </orderedlist>
    	
               <informalexample id="xmpd33e34" remap="example">
    		
                  <remark id="spd33e36" remap="draft-comment">Verify that the following is even needed. If so, replicate for other NC-tasks.</remark>
    		
                  <para id="parad33e39" remap="p">You can automate the restart command for all of your NCs. Store a list 
    		of your NCs in a file called <filename id="flpthd33e41" remap="filepath">nc-hosts</filename> that looks like:</para>
    		
                  <programlisting id="cdblkd33e45" remap="codeblock">nc-host-00
nc-host-01
...
nc-host-nn</programlisting>
    		
                  <para id="parad33e48" remap="p">To restart all of your NCs, run the following command:</para>
    		
                  <programlisting id="cdblkd33e51" remap="codeblock">cat nc-hosts | xargs -i ssh root@{} service eucalyptus-nc restart</programlisting>
    	
               </informalexample>
    
            </section>
         </section>
         <section remap="concept" id="shut_down">
            <title id="ttld25e3" remap="title">Shut Down Eucalyptus</title>
            <para id="parad25e6" remap="shortdesc">Describes the recommended processes to shut down Eucalyptus.</para>
 	
            <para id="parad25e11" remap="p">There may be times when you need to shut down Eucalyptus. This might be because of a physical
 		failure, topological change, backing up, or making an upgrade. We recommend that you shut down Eucalyptus components in the reverse order of how you started them. 
 		To stop the system, shut down the components in the order listed.</para>
 	
 	
            <note id="noted25e14" remap="note">
               <para remap="#PCDATA">Before you shut Eucalyptus down, we recommend that you notify all users that you are terminating all instances.</para>
            </note>
 	
 	
            <orderedlist id="old25e17" remap="ol">
 		
               <listitem id="lid25e19" remap="li"/>
 		
               <listitem id="lid25e22" remap="li"/>
 		
               <listitem id="lid25e25" remap="li"/>
 		
               <listitem id="lid25e28" remap="li"/>
 		
               <listitem id="lid25e31" remap="li"/>
 		
               <listitem id="lid25e34" remap="li"/>
 		
               <listitem id="lid25e37" remap="li"/>
 	
            </orderedlist>
 
            <section remap="task" id="instance_shutdown">
               <title id="ttld28e3" remap="title">Shut Down All Instances</title>
               <para id="parad28e6" remap="shortdesc"/>
        
               <para id="parad28e12" remap="p">To terminate all instances on all nodes:</para>
        
               <orderedlist id="old28e16" remap="steps">
            
        	
                  <listitem id="lid28e18" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd28e20" remap="cmd">Enter the following command:</phrase>
        			
                     </para>
                     <programlisting id="cdblkd28e24" remap="codeblock">euca-terminate-instances &lt;instance_id&gt;</programlisting>
                  </listitem>
        
               </orderedlist>
    
            </section>
            <section remap="task" id="nc_shutdown">
               <title id="ttld36e3" remap="title">Shut Down the NCs</title>
               <para id="parad36e6" remap="shortdesc"/>
        
               <para id="parad36e12" remap="p">To shut down the NCs:</para>
        
               <orderedlist id="old36e16" remap="steps">
            
                  <listitem id="lid36e18" remap="step">
                     <para remap="#PCDATA">
            	
                        <phrase id="phrsd36e20" remap="cmd">Log in as root to a machine hosting an NC.</phrase>
            
                     </para>
                  </listitem>
        	
                  <listitem id="lid36e24" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd36e26" remap="cmd">Enter the following command:</phrase>
        		
                     </para>
                     <programlisting id="cdblkd36e30" remap="codeblock">service eucalyptus-nc stop</programlisting>
                  </listitem>
        	
                  <listitem id="lid36e34" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd36e36" remap="cmd">Repeat for each machine hosting an NC.</phrase>
        	
                     </para>
                  </listitem>
        
               </orderedlist>
    
            </section>
            <section remap="task" id="cc_shutdown">
               <title id="ttld37e3" remap="title">Shut Down the CCs</title>
               <para id="parad37e6" remap="shortdesc"/>
        
               <para id="parad37e12" remap="p">To shut down the CCs:</para>
        
               <orderedlist id="old37e16" remap="steps">
            
                  <listitem id="lid37e18" remap="step">
                     <para remap="#PCDATA">
            	
                        <phrase id="phrsd37e20" remap="cmd">Log in as root to a machine hosting a CC.</phrase>
            
                     </para>
                  </listitem>
        	
                  <listitem id="lid37e24" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd37e26" remap="cmd">Enter the following command:</phrase>
        			
                     </para>
                     <programlisting id="cdblkd37e30" remap="codeblock">service eucalyptus-cc cleanstop</programlisting>
                     <note id="noted37e33" remap="note">
                        <para remap="#PCDATA">The cleanstop command causes the CC to reset and/or flush all of the existing networking state.</para>
                     </note>
                  </listitem>
        	
                  <listitem id="lid37e37" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd37e39" remap="cmd">Repeat for each machine hosting a CC.</phrase>
        	
                     </para>
                  </listitem>
        
               </orderedlist>
    
            </section>
            <section remap="task" id="broker_shutdown">
               <title id="ttld38e3" remap="title">Shut Down the Broker</title>
               <para id="parad38e6" remap="shortdesc"/>
        
               <para id="parad38e12" remap="p">If your system uses the optional Broker component of Eucalyptus, shut it down by
            	performing the following steps:</para>
        
               <orderedlist id="old38e16" remap="steps">
            
                  <listitem id="lid38e18" remap="step">
                     <para remap="#PCDATA">
            	
                        <phrase id="phrsd38e20" remap="cmd">Log in as root to the machine running both the CC and the VMware Broker.</phrase>
            
                     </para>
                  </listitem>
        	
                  <listitem id="lid38e24" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd38e26" remap="cmd">Enter the following command:</phrase>
        		
                     </para>
                     <programlisting id="cdblkd38e30" remap="codeblock">service eucalyptus-cloud stop</programlisting>
                     <tip id="warningd38e33" remap="note">
                        <para remap="#PCDATA">The <command id="cmdnmd38e35" remap="cmdname">eucalyptus-cloud</command> stop command also shuts down a CLC, Walrus, and SC components co-located with the CC and VMware Broker to stop at the same time, in the correct order.</para>
                     </tip>
                  </listitem>
        
               </orderedlist>
    
            </section>
            <section remap="task" id="sc_shutdown">
               <title id="ttld39e3" remap="title">Shut Down the SCs</title>
               <para id="parad39e6" remap="shortdesc"/>
        
               <para id="parad39e12" remap="p">To shut down the SC:</para>
        
               <orderedlist id="old39e16" remap="steps">
            
                  <listitem id="lid39e18" remap="step">
                     <para remap="#PCDATA">
                
                        <phrase id="phrsd39e20" remap="cmd">Log in as root to the physical machine that hosts the SC.</phrase>
            
                     </para>
                  </listitem>
        	
                  <listitem id="lid39e24" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd39e26" remap="cmd">Enter the following command:</phrase>
        		
                     </para>
                     <programlisting id="cdblkd39e30" remap="codeblock">service eucalyptus-cloud stop</programlisting>
                  </listitem>
        	
                  <listitem id="lid39e34" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd39e36" remap="cmd">Repeat for any other machine hosting an SC.</phrase>
        	
                     </para>
                  </listitem>
        
               </orderedlist>
    
            </section>
            <section remap="task" id="walrus_shutdown">
               <title id="ttld40e3" remap="title">Shut Down Walrus</title>
               <para id="parad40e6" remap="shortdesc"/>
		
               <para id="parad40e12" remap="p">To shut down Walrus:</para>
		
               <orderedlist id="old40e16" remap="steps">
			
                  <listitem id="lid40e18" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd40e20" remap="cmd">Log in as root to the physical machine that hosts Walrus.</phrase>
			
                     </para>
                  </listitem>
			
                  <listitem id="lid40e24" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd40e26" remap="cmd">Enter the following command:</phrase>
				
                     </para>
                     <programlisting id="cdblkd40e30" remap="codeblock">service eucalyptus-cloud stop</programlisting>
                  </listitem>
			
		
               </orderedlist>
	
            </section>
            <section remap="task" id="clc_shutdown">
               <title id="ttld41e3" remap="title">Shut Down the CLC</title>
               <para id="parad41e6" remap="shortdesc"/>
		
               <para id="parad41e12" remap="p">To shut down the CLC:</para>
		
               <orderedlist id="old41e16" remap="steps">
			
                  <listitem id="lid41e18" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd41e20" remap="cmd">Log in as root to the physical machine that hosts the CLC.</phrase>
			
                     </para>
                  </listitem>
			
                  <listitem id="lid41e24" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd41e26" remap="cmd">Enter the following command:</phrase>
				
                     </para>
                     <programlisting id="cdblkd41e30" remap="codeblock">service eucalyptus-cloud stop</programlisting>
                  </listitem>
			
		
               </orderedlist>
	
            </section>
         </section>
         <section remap="concept" id="backup_restore">
            <title id="ttld26e3" remap="title">Back Up and Restore Eucalyptus</title>
            <para id="parad26e6" remap="shortdesc"/>
  
            <para id="parad26e10" remap="p">You can back up and restore Eucalyptus by completing the following tasks:</para>
 	
            <orderedlist id="old26e13" remap="ol">
 		
               <listitem id="lid26e15" remap="li"/>
 		
               <listitem id="lid26e18" remap="li"/>
 		
               <listitem id="lid26e21" remap="li"/>
 	
            </orderedlist>
 
            <section remap="concept" id="shut_down">
               <title id="ttld25e3" remap="title">Shut Down Eucalyptus</title>
               <para id="parad25e6" remap="shortdesc">Describes the recommended processes to shut down Eucalyptus.</para>
 	
               <para id="parad25e11" remap="p">There may be times when you need to shut down Eucalyptus. This might be because of a physical
 		failure, topological change, backing up, or making an upgrade. We recommend that you shut down Eucalyptus components in the reverse order of how you started them. 
 		To stop the system, shut down the components in the order listed.</para>
 	
 	
               <note id="noted25e14" remap="note">
                  <para remap="#PCDATA">Before you shut Eucalyptus down, we recommend that you notify all users that you are terminating all instances.</para>
               </note>
 	
 	
               <orderedlist id="old25e17" remap="ol">
 		
                  <listitem id="lid25e19" remap="li"/>
 		
                  <listitem id="lid25e22" remap="li"/>
 		
                  <listitem id="lid25e25" remap="li"/>
 		
                  <listitem id="lid25e28" remap="li"/>
 		
                  <listitem id="lid25e31" remap="li"/>
 		
                  <listitem id="lid25e34" remap="li"/>
 		
                  <listitem id="lid25e37" remap="li"/>
 	
               </orderedlist>
 
            </section>
            <section remap="task" id="back_up">
               <title id="ttld42e3" remap="title">Back Up Eucalyptus</title>
               <para id="parad42e6" remap="shortdesc"/>
        
               <para id="parad42e12" remap="p">Backing up Eucalyptus involves saving contents of the specific directories on each
        	component. On the CLC host, these directories are:</para>
               <itemizedlist id="uld42e15" remap="ul">
        		
                  <listitem id="lid42e17" remap="li">
                     <para remap="#PCDATA">The configuration file (<filename id="flpthd42e19" remap="filepath">/etc/eucalyptus.conf</filename>)</para>
                  </listitem>
        		
                  <listitem id="lid42e23" remap="li">
                     <para remap="#PCDATA">The database files (<filename id="flpthd42e25" remap="filepath">/var/lib/eucalyptus/db</filename>)</para>
                  </listitem>
        		
                  <listitem id="lid42e29" remap="li">
                     <para remap="#PCDATA">The cryptographic keys (<filename id="flpthd42e31" remap="filepath">/var/lib/eucalyptus/keys</filename>)</para>
                  </listitem>
        	
               </itemizedlist>
               <para id="parad42e36" remap="p">On the Walrus host (which, depending on your set-up, might be the same as the CLC host):</para>
               <itemizedlist id="uld42e39" remap="ul">
        		
                  <listitem id="lid42e41" remap="li">
                     <para remap="#PCDATA">The Walrus buckets (the default location is <filename id="flpthd42e43" remap="filepath">/var/lib/eucalyptus/bukkits</filename>). You should only do this if you have enough spare disk space available. If the Walrus buckets location is an external storage location (like NFS), consult with your storage administrator to back up that location.</para>
                  </listitem>
        	
               </itemizedlist>
               <para id="parad42e48" remap="p">On the Storage Controller host (may be the same as the CLC host):</para>
               <itemizedlist id="uld42e51" remap="ul">
        		
                  <listitem id="lid42e53" remap="li">
                     <para remap="#PCDATA">he SC volumes (the default location is <filename id="flpthd42e55" remap="filepath">/var/lib/eucalyptus/volumes</filename>). You should only back this up if you are not using SAN support. If you are using a supported SAN device, consult with your storage administrator to back up volumes stored on the SAN.</para>
                  </listitem>
        	
               </itemizedlist>
               <para id="parad42e60" remap="p">To back up Eucalyptus:</para>
        
               <orderedlist id="old42e64" remap="steps">
            
                  <listitem id="lid42e66" remap="step">
                     <para remap="#PCDATA">
            	
                        <phrase id="phrsd42e68" remap="cmd">Calculate the disk space required to store the files about to be backed up (this is most relevant for buckets and volumes, which can be large). For example, on a single-cluster installation with default buckets and volumes paths:</phrase>
            		
                     </para>
                     <programlisting id="cdblkd42e72" remap="codeblock">du -sh /var/lib/eucalyptus/</programlisting>
                  </listitem>
        	
                  <listitem id="lid42e76" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd42e78" remap="cmd">Create a directory for storing these ($BACKUP) in a location with enough disk space</phrase>
        	
                     </para>
                  </listitem>
        
               </orderedlist>
    
            </section>
            <section remap="task" id="restore">
               <title id="ttld43e3" remap="title">Restore Eucalyptus from a Backup</title>
               <para id="parad43e6" remap="shortdesc"/>
        
               <para id="parad43e12" remap="p">In case your system experiences a failure, you can restore Eucalyptus from a backup by performing the following tasks:</para>
        
               <orderedlist id="old43e16" remap="steps">
            
                  <listitem id="lid43e18" remap="step">
                     <para remap="#PCDATA">
            	
                        <phrase id="phrsd43e20" remap="cmd">Shut down any running Eucalyptus components. For further information about the
            		shut down process, see <xref linkend="shut_down" id="xrefd43e22" remap="xref"/>.</phrase>
            
                     </para>
                  </listitem>
        	
        	
                  <listitem id="lid43e26" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd43e28" remap="cmd">If you are trying to recover from a broken upgrade by rolling back or by trying the
        		upgrade again, this would be the right time to:</phrase>
        		
                     </para>
                     <itemizedlist id="uld43e33" remap="ul">
        				
                        <listitem id="lid43e35" remap="li">
                           <para remap="#PCDATA">Remove all software components related to Eucalyptus (for example, <literal id="cdphd43e37" remap="codeph">rpm -e</literal> or <literal id="cdphd43e40" remap="codeph">apt-get
        					remove</literal>).</para>
                        </listitem>
        				
                        <listitem id="lid43e44" remap="li">
                           <para remap="#PCDATA">Install the appropriate version. For more information, go to the Eucalyptus
        					Installation Guide.</para>
                        </listitem>
        			
                     </itemizedlist>
                  </listitem>
        	
                  <listitem id="lid43e53" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd43e55" remap="cmd">Replace the saved state.</phrase>
        		
                     </para>
                     <itemizedlist id="uld43e58" remap="choices">
        			
                        <listitem id="lid43e60" remap="choice">
                           <para remap="#PCDATA">If you backed up with cp, enter the following:
        			</para>
                           <programlisting id="cdblkd43e62" remap="codeblock">cp -a $BACKUP/eucalyptus.conf /etc/eucalyptus
cp -a $BACKUP/keys $BACKUP/db $BACKUP/bukkits $BACKUP/volumes /var/lib/eucalyptus</programlisting>
                        </listitem>
        			
                        <listitem id="lid43e66" remap="choice">
                           <para remap="#PCDATA">If you backed up with tar, enter the following:
        			</para>
                           <programlisting id="cdblkd43e68" remap="codeblock">tar xvf $BACKUP/eucalyptus-backup.tar</programlisting>
                        </listitem>
        		
                     </itemizedlist>
                  </listitem>
        
               </orderedlist>
    
            </section>
         </section>
      </section>
   </section>
   <section remap="concept" id="managing_auth">
      <title id="ttld44e3" remap="title">Managing Access</title>
      <para id="parad44e6" remap="shortdesc"/>
 	
 	
      <para id="parad44e10" remap="p">Eucalyptus manages access control through an authentication, authorization,
 		and accounting system. This system manages user identities, enforces access controls over resources, and
 		provides reporting on resource usage as a basis for auditing and managing cloud activities. The
 		user identity organizational model and the scheme of authorizations used to access resources are
 		based on and compatible with the AWS Identity and Access Management (IAM) system, with some Eucalyptus extensions provided that support ease-of-use in a private cloud environment.</para>
 	
      <para id="parad44e13" remap="p">You can also perform user authentication by integrating Eucalyptus with an existing LDAP or
 		Active Directory. In this case, the user, group and account information, and Dashboard login
 		authenticate using the LDAP/AD service. This information cannot be changed from Eucalyptus side when LDAP/AD integration is turned on. However, other Eucalyptus-specific information about user, group and account is still stored within the local database of Eucalyptus, including certificates, secret keys and attached policies.</para>
 	
      <para id="parad44e16" remap="p">For more information about synchronizing an existing LDAP or Active Directory with Eucalyptus,
 		see <xref linkend="integrating_ldap" id="xrefd44e18" remap="xref"/>.</para>
 	
 
      <section remap="concept" id="understanding_identities">
         <title id="ttld46e3" remap="title">Access Overview</title>
         <para id="parad46e6" remap="shortdesc"/>
 	
         <para id="parad46e10" remap="p">The Eucalyptus design of user identity and access management provides layers in the
 		hierarchical organization of user identities. This gives you refined control over resource
 		access. The core of the this design is compatible with the AWS Identity and Access Management
 		(IAM) service. There are also a few Eucalyptus-specific extensions that meet the needs of enterprise customers.</para>
 		
 		
 
         <section remap="concept" id="concepts_eiam">
            <title id="ttld47e3" remap="title">Access Concepts</title>
            <para id="parad47e6" remap="shortdesc"/>
  
            <para id="parad47e11" remap="p">This section describes what Eucalyptus access is and what you need to know about it so that you
  can configure access to your cloud.</para>
  	
  
 
            <section remap="concept" id="access_identities">
               <title id="ttld48e3" remap="title">User Identities</title>
               <para id="parad48e6" remap="shortdesc"/>
 	
               <para id="parad48e10" remap="p">User identities are organized into accounts. An account is the unit of resource usage
 		accounting, and also a separate namespace for many resources (security groups, key pairs, users,
 		etc.)</para>
 	
               <para id="parad48e13" remap="p">Accounts are identified by either a unique ID (UUID) or a unique name. The account name is
 	equivalent to IAM’s account alias. It is used to manipulate accounts in most cases. However, to be compatible with AWS, the EC2 commands often use account ID to display resource ownership. There are command line tools to discover the correspondence of account ID and account name. For example, euare-accountlist lists all the accounts with both their IDs and names.</para>
 	
 	
               <para id="parad48e16" remap="p">An account can have multiple users, but a user can only be in one account. Within an account, users can be associated with Groups. Group is used to attach access permissions to multiple users. A user can be associated with multiple groups. Because an account is a separate name space, user names and group names have to be unique only within an account. Therefore, user X in account A and user X in account B are two different identities.</para>
 	
 	
               <para id="parad48e19" remap="p">Both users and groups are identified by their names, which are unique within an account (they also have UUIDs, but rarely used).</para>
 
            </section>
            <section remap="concept" id="access_credentials">
               <title id="ttld49e3" remap="title">Credentials</title>
               <para id="parad49e6" remap="shortdesc"/>
 	
               <para id="parad49e10" remap="p">Each user has a unique set of credentials. These credentials are used to authenticate access to
 	resources. There are three types of credentials:</para>
 	
 	
               <itemizedlist id="uld49e13" remap="ul">
 	
 	
                  <listitem id="lid49e15" remap="li">
                     <para remap="#PCDATA">A <emphasis role="bold" id="bd49e17" remap="b">X.509 certificate</emphasis> is used to authenticate requests to the SOAP API service.</para>
                  </listitem>
 	
                  <listitem id="lid49e21" remap="li">
                     <para remap="#PCDATA">A <emphasis role="bold" id="bd49e23" remap="b">secret access key</emphasis>  is used to authenticate requests to the REST API service.</para>
                  </listitem>
 	
                  <listitem id="lid49e27" remap="li">
                     <para remap="#PCDATA">A <emphasis role="bold" id="bd49e29" remap="b">login password</emphasis> is used to authenticate the Eucalyptus Dashboard access.</para>
                  </listitem>
 	
               </itemizedlist>
 	
 
               <para id="parad49e34" remap="p">You can manage credentials use the IAM-compatible command line tools (the
 	<literal id="cdphd49e36" remap="codeph">euare-</literal> commands) or the Dashboard.</para>
 	
 	
               <para id="parad49e40" remap="p">In IAM, each account has its own credentials. In Eucalyptus, the equivalent of account credentials are the credentials of admin user of the account.</para>
 	
 	
 
            </section>
            <section remap="concept" id="access_special_ids">
               <title id="ttld50e3" remap="title">Special Identities</title>
               <para id="parad50e6" remap="shortdesc"/>
 	
 	
               <para id="parad50e10" remap="p">Eucalyptus has two special identities for the convenience of administration and use of the system.</para>
 	
               <itemizedlist id="uld50e13" remap="ul">
 	
                  <listitem id="lid50e15" remap="li">
                     <para remap="#PCDATA">The <emphasis role="bold" id="bd50e17" remap="b">eucalyptus</emphasis> account: This is like the root group in a Linux system. Every user in the eucalyptus account has full access to the resources in the system. These users are often referred to as sys admin or cloud admin. This account is automatically created when the system starts for the first time. You can not remove eucalyptus account from the system.</para>
                  </listitem>
 	
                  <listitem id="lid50e21" remap="li">
                     <para remap="#PCDATA">The <emphasis role="bold" id="bd50e23" remap="b">admin</emphasis> user of an account: Each account, including the eucalyptus account, has a user named admin by default, i.e. created automatically by the system when an account is created. The admin of an account has full access to the resources owned by the account. You can not remove the admin user from an account. The admin can delegate resource access to other users in the account by using policies.</para>
                  </listitem>
 	
               </itemizedlist>
 
            </section>
            <section remap="concept" id="access_create_acct">
               <title id="ttld51e3" remap="title">Account Creation</title>
               <para id="parad51e6" remap="shortdesc"/>
 	
               <para id="parad51e10" remap="p">Accounts can be created in two ways:</para>
 
               <itemizedlist id="uld51e13" remap="ul">
 	
 
                  <listitem id="lid51e15" remap="li">
                     <para remap="#PCDATA">The system administrator can create the account directly, using the CLI or the Dashboard. The
 	accounts created in this method are available for accessing immediately.</para>
                  </listitem>
 
                  <listitem id="lid51e18" remap="li">
                     <para remap="#PCDATA">A user can apply for an account using the Dashboard. An email is sent to the system
 	administrator for review. The system administrator can approve or reject the application by
 	invoking a URL included in the email. A notification email will be sent to the intended account
 	owner. If the application is approved, the account owner needs to invoke the URL included in the notification email to confirm the approval. Once confirmed, the new account becomes available.</para>
                  </listitem>
 
               </itemizedlist>
 	
 	

               <para id="parad51e22" remap="p">The account registration status can be found in Dashboard. The account registration status is
	actually associated with the account admin user. That means you can use the following command to obtain the same information:</para>
 	
 	
               <programlisting id="cdblkd51e25" remap="codeblock">euare-usergetattributes --delegate account -u admin --show-extra</programlisting>
 
               <para id="parad51e28" remap="p">Where the <literal id="cdphd51e30" remap="codeph">--show-extra</literal> option displays extra information of a user in the following order:</para>
 	
               <itemizedlist id="uld51e34" remap="ul">
                  <listitem id="lid51e35" remap="li">
                     <para remap="#PCDATA">If the user is enabled</para>
                  </listitem>
 	
                  <listitem id="lid51e38" remap="li">
                     <para remap="#PCDATA">Registration status</para>
                  </listitem>
 	
                  <listitem id="lid51e41" remap="li">
                     <para remap="#PCDATA">Password expires</para>
                  </listitem>
               </itemizedlist>
 	
 	
               <para id="parad51e44" remap="p">The account registration status has the following values based on the status of registration
 		process: <literal id="cdphd51e46" remap="codeph">REGISTERED</literal>, <literal id="cdphd51e49" remap="codeph">APPROVED</literal>, or <literal id="cdphd51e52" remap="codeph">CONFIRMED</literal>.
 		An account that is not confirmed cannot be used or accessed. The system administrator can
 		manipulate the account registration status in both dashboard and command line:</para>
 	
 	
               <programlisting id="cdblkd51e56" remap="codeblock">euare-usermod --delegate account -u admin --reg-status=status</programlisting>
 	
               <para id="parad51e59" remap="p">The command line manipulation of the registration status does not send the notification emails.
 		So unless you experienced, we recommend that you use the Dashboard.</para>
 
            </section>
            <section remap="concept" id="access_special">
               <title id="ttld52e3" remap="title">Special User Attributes</title>
               <para id="parad52e6" remap="shortdesc"/>
       
        	
               <para id="parad52e10" remap="p">Eucalyptus extends the IAM model by providing the following extra attributes for a user.</para>
        	
               <itemizedlist id="uld52e13" remap="ul">
        	
                  <listitem id="lid52e15" remap="li">
                     <para remap="#PCDATA">
                        <emphasis role="bold" id="bd52e16" remap="b">Registration status:</emphasis> This is only meaningful for the account administrator
        		(that is, the account level).</para>
                  </listitem>
        	
                  <listitem id="lid52e20" remap="li">
                     <para remap="#PCDATA">
                        <emphasis role="bold" id="bd52e21" remap="b">Enabled status: </emphasis>. Use this attribute to temporarily disable a user.</para>
                  </listitem>
        	
                  <listitem id="lid52e25" remap="li">
                     <para remap="#PCDATA">
                        <emphasis role="bold" id="bd52e26" remap="b">Password expiration date</emphasis>
                     </para>
                  </listitem>
        	
                  <listitem id="lid52e29" remap="li">
                     <para remap="#PCDATA">
                        <emphasis role="bold" id="bd52e30" remap="b">Custom information:</emphasis> Add any name-value pair to a user’s custom information
        		attribute. This is useful for attaching pure text information, like an address, phone
        		number, or department. This is especially helpful with external LDAP or Active Directory services.</para>
                  </listitem>
        	
               </itemizedlist>
        	
        	
               <para id="parad52e35" remap="p">You can retrieve and modify the registration status, enabled status, and password
        		expiration date using the <command id="cmdnmd52e37" remap="cmdname">euare-usergetattributes</command> and
        		<command id="cmdnmd52e40" remap="cmdname">euare-usermod</command> commands. You can retrieve and modify custom information
        		using <command id="cmdnmd52e43" remap="cmdname">euare-usergetinfo</command> and <command id="cmdnmd52e46" remap="cmdname">euare-userupdateinfo</command>
        		commands. For more information, see the <ulink url="http://www.eucalyptus.com/sites/all/files/docs/latest/cli.pdf" type="" id="linkd52e49" remap="xref">CLI Reference Guide</ulink> for detailed usage of these commands.</para>
        
    
            </section>
         </section>
         <section remap="concept" id="access_policies">
            <title id="ttld53e3" remap="title">Policy Overview</title>
            <para id="parad53e6" remap="shortdesc"/>
 	
            <para id="parad53e12" remap="p">Eucalyptus uses the same policy language to specify user level permissions as AWS IAM. Policies
 		are written in JSON. Each policy file can contain multiple statements, each specifying a permission. Each statement has the following components:</para>
            <itemizedlist id="uld53e15" remap="ul">
 	
               <listitem id="lid53e17" remap="li">
                  <para remap="#PCDATA">
                     <emphasis role="bold" id="bd53e18" remap="b">Effect:</emphasis> Begins the decision that applies to all following components. Either: <literal id="cdphd53e21" remap="codeph">“Allow”</literal> or <literal id="cdphd53e24" remap="codeph">“Deny”</literal>
                  </para>
               </listitem>
 	
               <listitem id="lid53e27" remap="li">
                  <para remap="#PCDATA">
                     <emphasis role="bold" id="bd53e28" remap="b">Action or NotAction:</emphasis> Indicates service-specific commands. For example: <literal id="cdphd53e31" remap="codeph">“ec2:RunInstances”</literal>
                  </para>
               </listitem>
 	
               <listitem id="lid53e34" remap="li">
                  <para remap="#PCDATA">
                     <emphasis role="bold" id="bd53e35" remap="b">Resource or NotResource:</emphasis> Indicates selected resources, each specified as an Amazon
 		resource name (ARN). For example: <literal id="cdphd53e38" remap="codeph">“arn:aws:s3:::acme_bucket/blob”</literal>
                  </para>
               </listitem>
 		
               <listitem id="lid53e41" remap="li">
                  <para remap="#PCDATA">
                     <emphasis role="bold" id="bd53e42" remap="b">Condition:</emphasis> Indicates additional constraints of the permission. For example: <literal id="cdphd53e45" remap="codeph">"DateGreaterThan"</literal>
                  </para>
               </listitem>
 	
            </itemizedlist>
            <para id="parad53e49" remap="p">A permission statement specifies whether to allow or deny a list of
 	actions to be performed on a list of resources, under specific conditions. The following example ,
 	contains one policy that gives a user with full permission. This is the same access as the account
 	administrator:</para>
            <programlisting id="cdblkd53e52" remap="codeblock">{
  "Version":"2011-04-01",
 	"Statement":[{
 	  "Sid":"1",
 	  "Effect":"Allow",
 	  "Action":"*",
 	  "Resource":"*"
 	}]
}</programlisting>
            <para id="parad53e55" remap="p">For more information about policy language, go to the <ulink url="http://docs.amazonwebservices.com/IAM/latest/UserGuide/PermissionsOverview.html" type="" id="linkd53e57" remap="xref">IAM User Guide</ulink>.</para>
 
            <section remap="concept" id="access_polextens">
               <title id="ttld54e3" remap="title">Policy Extensions</title>
               <para id="parad54e6" remap="shortdesc"/>
 	
               <para id="parad54e10" remap="p">Eucalyptus extends the IAM policy in order to meet the needs of enterprise customers.</para>
 	
               <sidebar id="sctnd54e13" remap="section">
                  <title id="ttld54e15" remap="title">EC2 Resource</title>
                  <para id="parad54e18" remap="p">In IAM, you cannot specify EC2 resources in a policy statement except a wildcard,<literal id="cdphd54e20" remap="codeph">“*”</literal>. Therefore it is not possible to constrain a permission on specific EC2 entities. For example, you can not restrict a user to run instances on a specific image or VM type. To solve that, Eucalyptus 3 introduces the EC2 resource for the policy language. The ARN of an EC2 resource is like the following:</para>
                  <programlisting id="cdblkd54e24" remap="codeblock">arn:aws:ec2::&lt;account_id&gt;:&lt;resource_type&gt;/&lt;resource_id&gt;</programlisting>
                  <para id="parad54e27" remap="p">Where account id is optional.</para>
                  <para id="parad54e30" remap="p">Eucalyptus supports the following resource types for EC2:</para>
                  <itemizedlist id="uld54e33" remap="ul">
 		
                     <listitem id="lid54e35" remap="li">
                        <para remap="#PCDATA">image</para>
                     </listitem>
 		
                     <listitem id="lid54e38" remap="li">
                        <para remap="#PCDATA">securitygroup</para>
                     </listitem>
 		
                     <listitem id="lid54e41" remap="li">
                        <para remap="#PCDATA">address (either an address or address range: 192.168.7.1-192.168.7.255)</para>
                     </listitem>
 		
                     <listitem id="lid54e44" remap="li">
                        <para remap="#PCDATA">availabilityzone</para>
                     </listitem>
 		
                     <listitem id="lid54e47" remap="li">
                        <para remap="#PCDATA">instance</para>
                     </listitem>
 		
                     <listitem id="lid54e50" remap="li">
                        <para remap="#PCDATA">keypair</para>
                     </listitem>
 		
                     <listitem id="lid54e53" remap="li">
                        <para remap="#PCDATA">volume</para>
                     </listitem>
 		
                     <listitem id="lid54e56" remap="li">
                        <para remap="#PCDATA">snapshot</para>
                     </listitem>
 		
                     <listitem id="lid54e59" remap="li">
                        <para remap="#PCDATA">vmtype</para>
                     </listitem>
 		
                  </itemizedlist>
                  <para id="parad54e63" remap="p">The following example specifies permission to launch instances with only an m1.small VM type:</para>
                  <programlisting id="cdblkd54e66" remap="codeblock">{
  "Version":"2011-04-01",
  "Statement":[{
    "Sid":"2",
    "Effect":"Allow",
    "Action":"ec2:RunInstances",
    "Resource":"arn:aws:ec2:::vmtype/m1.small"
  }]
}</programlisting>
               </sidebar>
 	
               <sidebar id="sctnd54e70" remap="section">
                  <title id="ttld54e72" remap="title">Policy Key</title>
                  <para id="parad54e75" remap="p">Eucalyptus does not implement all IAM policy keys. Eucalyptus implements the following AWS policy keys:</para>
                  <itemizedlist id="uld54e78" remap="ul">
 		
                     <listitem id="lid54e80" remap="li">
                        <para remap="#PCDATA">aws:CurrentTime</para>
                     </listitem>
 		
                     <listitem id="lid54e83" remap="li">
                        <para remap="#PCDATA">aws:SourceIp</para>
                     </listitem>
 		
                  </itemizedlist>
                  <para id="parad54e87" remap="p">Eucalyptus extends the policy keys by adding the following to the specification of instance lifetime.:</para>
                  <itemizedlist id="uld54e90" remap="ul">
 			
                     <listitem id="lid54e92" remap="li">
                        <para remap="#PCDATA">ec2:KeepAlive: specifies how long an instance can run</para>
                     </listitem>
 			
                     <listitem id="lid54e95" remap="li">
                        <para remap="#PCDATA">ec2:ExpirationTime: specifies the expiration time for an instance</para>
                     </listitem>
 		
                  </itemizedlist>
                  <para id="parad54e99" remap="p">The following example restricts an instance running time to 24 hours:</para>
                  <programlisting id="cdblkd54e102" remap="codeblock">{
  "Version":"2011-04-01",
  "Statement":[{
    "Sid":"3",
    "Effect":"Allow",
    "Action":"ec2:RunInstances",
    "Resource":"*",
    "Condition":{
      “NumericEquals”:{
        “ec2:KeepAlive”:”1440”
      }
    }
  }]
}</programlisting>
                  <para id="parad54e105" remap="p">If there are multiple <literal id="cdphd54e107" remap="codeph">ec2:KeepAlive</literal> or <literal id="cdphd54e110" remap="codeph">ec2:ExpirationTime</literal>
 			keys that match a request, Eucalyptus chooses the longer lifetime for the instance to run.</para>
               </sidebar>
 
            </section>
            <section remap="concept" id="policies_samples">
               <title id="ttld55e3" remap="title">Sample Policies</title>
               <para id="parad55e6" remap="shortdesc">A few example use cases and associated policies.</para>
  
               <para id="parad55e11" remap="p">Here are some example use cases and associated polices. You can edit these
  polices for your use, or use them as examples of JSON syntax and form.</para>
 	
 	
               <tip id="warningd55e14" remap="note">
                  <para remap="#PCDATA">For more information about JSON syntax used with AWS resources, go to <ulink url="http://aws.amazon.com/documentation/iam/" type="external" id="linkd55e16" remap="xref">Using AWS Identity
 		and Access Management</ulink>.</para>
               </tip>
 	
 	
               <sidebar id="sctnd55e20" remap="section">
                  <title id="ttld55e22" remap="title">Examples: Allowing Specific Actions</title>
                  <para id="parad55e25" remap="p">The following policy allows a user to only run instances and describe things.</para>
                  <programlisting id="cdblkd55e28" remap="codeblock">{
   "Statement":[{
      "Effect":"Allow",
      "Action":["ec2:*Describe*",​"ec2:*Run*"],
      "Resource":"*",
      }
   ]
   }</programlisting>
                  <para id="parad55e31" remap="p">The following policy allows a user to only list things:</para>
                  <programlisting id="cdblkd55e34" remap="codeblock">{
  "Statement": [
    {
      "Sid": "Stmt1313686153864",
      "Action": [
        "iam:List*"
      ],
      "Effect": "Allow",
      "Resource": "*"
    }
  ]
  }</programlisting>
                  <para id="parad55e37" remap="p">The following policy grants a generic basic user permission for running instances and
 			describing things.</para>
                  <programlisting id="cdblkd55e40" remap="codeblock">{
  "Statement": [
    {
      "Sid": "Stmt1313605116084",
      "Action": [
        "ec2:AllocateAddress",
        "ec2:AssociateAddress",
        "ec2:AttachVolume",
        "ec2:Authorize*",
        "ec2:CreateKeyPair",
        "ec2:CreateSecurityGroup",
        "ec2:CreateSnapshot",
        "ec2:CreateVolume",
        "ec2:DeleteKeyPair",
        "ec2:DeleteSecurityGroup",
        "ec2:DeleteSnapshot",
        "ec2:DeleteVolume",
        "ec2:Describe*",
        "ec2:DetachVolume",
        "ec2:DisassociateAddress",
        "ec2:GetConsoleOutput",
        "ec2:RunInstances",
        "ec2:TerminateInstances"
        "ec2:ReleaseAddress"
      ],
      "Effect": "Allow",
      "Resource": "*"
    }
  ]
}</programlisting>
               </sidebar>
 	
 	
               <sidebar id="sctnd55e44" remap="section">
                  <title id="ttld55e46" remap="title">Examples: Denying Specific Actions</title>
                  <para id="parad55e49" remap="p">The following policy allows a user to do anything but delete.</para>
                  <programlisting id="cdblkd55e52" remap="codeblock">{
  "Statement": [
    {
      "Action": [
        "ec2:Delete*"
      ],
      "Effect": "Deny",
      "Resource": "*"
    }
  ]
  }</programlisting>
                  <para id="parad55e55" remap="p">The following policy denies a user from creating other users.</para>
                  <programlisting id="cdblkd55e58" remap="codeblock">{
  "Statement": [
    {
      "Sid": "Stmt1313686153864",
      "Action": [
        "iam:CreateUser"
      ],
      "Effect": "Deny",
      "Resource": "*"
    }
  ]
}</programlisting>
               </sidebar>
 	
 	
               <sidebar id="sctnd55e62" remap="section">
                  <title id="ttld55e64" remap="title">Examples: Specifying Time Limits</title>
                  <para id="parad55e67" remap="p">The following policy allows a user to run instances within a specific time.</para>
                  <programlisting id="cdblkd55e70" remap="codeblock">{
  "Statement": [
    {
      "Sid": "Stmt1313453084396",
      "Action": [
        "ec2:RunInstances"
      ],
      "Effect": "Allow",
      "Resource": "*",
      "Condition": {
        "DateLessThanEquals": {
          "aws:CurrentTime": "2011-08-16T00:00:00Z"
        }
      }
    }
  ]
}</programlisting>
                  <para id="parad55e73" remap="p">The following policy blocks users from running instances at a specific time.</para>
                  <programlisting id="cdblkd55e76" remap="codeblock">{
  "Statement": [
    {
      "Sid": "Stmt1313453084396",
      "Action": [
        "ec2:RunInstances"
      ],
      "Effect": "Allow",
      "Resource": "*",
      "Condition": {
        "DateLessThanEquals": {
          "aws:CurrentTime": "2011-08-16T00:00:00Z"
        }
      }
    }
  ]
  }</programlisting>
                  <para id="parad55e79" remap="p">The following policy keeps alive an instance for <remark id="spd55e81" remap="draft-comment">60000 milliseconds or seconds
 			or what?</remark>.</para>
                  <programlisting id="cdblkd55e85" remap="codeblock">{
  "Statement": [
    {
      "Action": ["ec2:RunInstances" ],
      "Effect": "Allow",
      "Resource": "*",
      "Condition": { "NumericEquals":{"ec2:KeepAlive":"60000"}}
    }
  ]
  }</programlisting>
                  <para id="parad55e88" remap="p">The following policy sets an expiration date on running instances.</para>
                  <programlisting id="cdblkd55e91" remap="codeblock">{
  "Statement": [
    {
      "Action": ["ec2:RunInstances" ],
      "Effect": "Allow",
      "Resource": "*",
      "Condition": { "DateEquals":{"ec2:ExpirationTime":"2011-08-16T00:00:00Z"}}
    }
  ]
}</programlisting>
               </sidebar>
 	
 	
               <sidebar id="sctnd55e95" remap="section">
                  <title id="ttld55e97" remap="title">Examples: Restricting Resources</title>
                  <para id="parad55e100" remap="p">The following policy allows users to only launch instances with a large image type.</para>
                  <programlisting id="cdblkd55e103" remap="codeblock">{
  "Statement": [
    {
      "Action": [
        "ec2:RunInstances"
      ],
      "Effect": "Deny",
      "Resource": "arn:aws:ec2:::vmtype/m1.xlarge"
    }
  ]
  }</programlisting>
                  <para id="parad55e106" remap="p">The following policy restricts users from launching instances with a specific image ID.</para>
                  <programlisting id="cdblkd55e109" remap="codeblock">{
  "Statement": [
    {
      "Action": [
        "ec2:RunInstances"
      ],
      "Effect": "Deny",
      "Resource": "arn:aws:ec2:::image/emi-0FFF1874"
    }
  ]
  }</programlisting>
                  <para id="parad55e112" remap="p">The following policy restricts users from allocating addresses to a specified IP address.</para>
                  <programlisting id="cdblkd55e115" remap="codeblock">{
  "Statement": [
    {
      "Sid": "Stmt1313626078249",
      "Action": "*",
      "Effect": "Deny",
      "Resource": "arn:aws:ec2:::address/192.168.10.140"
    }
  ]
  }</programlisting>
                  <para id="parad55e118" remap="p">The following policy denies volume access.</para>
                  <programlisting id="cdblkd55e121" remap="codeblock">{
  "Statement": [
    {
      "Action": [
        "ec2:*"
      ],
      "Effect": "Deny",
      "Resource": "arn:aws:ec2:::volume/*"
    }
  ]
}</programlisting>
               </sidebar>
 	
 
 	
 	
 	
 
            </section>
         </section>
         <section remap="concept" id="integrating_ldap">
            <title id="ttld45e3" remap="title">LDAP/AD Integration</title>
            <para id="parad45e6" remap="shortdesc"/>
 	
            <para id="parad45e10" remap="p">You can use the Eucalyptus LDAP/Active Directory (AD) integration to synchronize existing LDAP/AD user and group information with Eucalyptus. The integration lets you:</para>
 	
            <itemizedlist id="uld45e13" remap="ul">
 	
               <listitem id="lid45e15" remap="li">
                  <para remap="#PCDATA">Use existing LDAP/AD user/group to manage Eucalyptus identities</para>
               </listitem>
 	
               <listitem id="lid45e18" remap="li">
                  <para remap="#PCDATA">Access specific LDAP/AD user information from Eucalyptus</para>
               </listitem>
 	
               <listitem id="lid45e21" remap="li">
                  <para remap="#PCDATA">Use existing LDAP/AD to authenticate users to log in to Eucalyptus Dashboard</para>
               </listitem>
 	
            </itemizedlist>
 
            <para id="parad45e25" remap="p">The following are still managed only within Eucalyptus and can’t be synchronized from LDAP/AD:</para>
 	
            <itemizedlist id="uld45e28" remap="ul">
 	
               <listitem id="lid45e30" remap="li">
                  <para remap="#PCDATA">User credentials, including access keys and X509 certificates</para>
               </listitem>
 	
               <listitem id="lid45e33" remap="li">
                  <para remap="#PCDATA">Permissions and quotas to access Eucalyptus resources</para>
               </listitem>
 	
               <listitem id="lid45e36" remap="li">
                  <para remap="#PCDATA">Special Eucalyptus users, including system administrators (that is, users in the <guilabel id="uictrld45e38" remap="uicontrol">eucalyptus</guilabel> account) and every account administrator</para>
               </listitem>
 	
            </itemizedlist>
 	
 	
            <sidebar id="sctnd45e43" remap="section">
               <title id="ttld45e45" remap="title">The Synchronization Process</title>
               <para id="parad45e48" remap="p">The synchronization always starts when the following happens:</para>
               <itemizedlist id="uld45e51" remap="ul">
 			
                  <listitem id="lid45e53" remap="li">
                     <para remap="#PCDATA">You manually upload a LDAP/AD Integration Configuration (LIC) file. Every new or updated LIC
 				upload triggers a new synchronization.</para>
                  </listitem>
 			
                  <listitem id="lid45e56" remap="li">
                     <para remap="#PCDATA">If the automatic synchronization is enabled, a synchronization is started when the timer goes off.</para>
                  </listitem>
 		
               </itemizedlist>
               <note id="noted45e60" remap="note">
                  <para remap="#PCDATA">Eucalyptus does not allow concurrent synchronization. If you trigger synchronization more
 			than once within a short time period, Eucalyptus only allows the first one.</para>
               </note>
               <para id="parad45e63" remap="p">During a synchronization, everything specified by an LIC in the LDAP/AD tree will be downloaded into Eucalyptus’ internal database. Each synchronization is a merging process of the information already in the database and the information from LDAP/AD. There are three cases for each entity: user, group or account:</para>
               <itemizedlist id="uld45e66" remap="ul">
 			
                  <listitem id="lid45e68" remap="li">
                     <para remap="#PCDATA">If an entity from LDAP/AD is not in Eucalyptus, a new one is created in the database.</para>
                  </listitem>
 			
                  <listitem id="lid45e71" remap="li">
                     <para remap="#PCDATA">If an entity from LDAP/AD is already in Eucalyptus, the Eucalyptus version is updated. For example, if a user’s info attributes are changed, those changes are downloaded and updated.</para>
                  </listitem>
 			
                  <listitem id="lid45e74" remap="li">
                     <para remap="#PCDATA">If an entity in Eucalyptus is missing from LDAP/AD, it will be removed from the database if the clean-deletion option in LIC is set to true. Otherwise, it will be left in the database. </para>
                  </listitem>
 		
               </itemizedlist>
               <important id="importantd45e78" remap="note">
                  <para remap="#PCDATA">If clean-deletion is set to true, the removed entities in Eucalyptus will be lost forever, along with all its permissions and credentials. The resources associated with the entity will be left untouched. It is system administrator’s job to recycle these resources.</para>
               </important>
            </sidebar>
 	
 	
            <sidebar id="sctnd45e82" remap="section">
               <title id="ttld45e84" remap="title">LDAP Integration Configuration Format</title>
               <para id="parad45e87" remap="p">An LIC is in JSON format, it has the following hierarchical structure and elements. Following
 			shows an example of the LIC file:</para>
               <programlisting id="cdblkd45e90" remap="codeblock">{
 	"ldap-service":{
 	"server-url":"ldap://localhost:7733",
 	"auth-method":"simple",
 	"user-auth-method":"simple",
 	"auth-principal":"cn=ldapadmin,dc=foo,dc=com",
 	"auth-credentials": "{RSA/ECB/PKCS1Padding}EAXRnvwnKtCZOxSrD/F3ng/yHH3J4jMxNUSkJJf6oqNMsUihjUerZ20e5iyXImPgjK1ELAPnppEfJvhCs7woS7jtFsedunsp5DJCNhgmOb2CR/MnH11V3FNY7bBWoew5A8Wwy6.x7YrPMS0j7dJkwM7yfp1Z6AbKOo2688I9uIvJUQwEKS4dOp7RVdA0izlJBDPAxiFZ2qa40VjFI/1mggbiWDNlgxiVtZXAEK7x9SRHJytLS8nrNPpIvPuTg3djKiWPVOLZ6vpSgPcVEliP261qdUfnf3GDKi3jqbPpRRQ6n8yI6aHw0gAtq8/qPyqjkkDP8JsGBgmXMxiCNPogbWg==",
 	"use-ssl":"false",
 	"ignore-ssl-cert-validation":"false",
 	"krb5-conf":"/path/to/krb5.conf",
 	},
 	
 	"sync":{
 	"enable":"true",
 	"auto":"true",
 	"interval":"900000",
 	"clean-deletion":"false",
 	},
 	
 	"accounting-groups":{
 	"base-dn":"ou=groups,dc=foo,dc=com",
 	"id-attribute":"cn",
 	"member-attribute":"member",
 	"selection":{
 	"filter":"objectClass=accountingGroup",
 	"select":["cn=accountingToSelect,ou=Groups,dc=foo,dc=com"],
 	"not-select":["cn=accountingToIgnore,ou=Groups,dc=foo,dc=com"],
 	}
 	},
 	
 	"groups-partition":{
 	"fooAccount":["fooGroup1", "fooGroup2"],
 	"barAccount":["barGroup1", "barGroup2"],
 	},
 	
 	"groups":{
 	"base-dn":"ou=groups,dc=foo,dc=com",
 	"id-attribute":"cn",
 	"member-attribute":"member",
 	"selection":{
 	"filter":"objectClass=groupOfNames",
 	"select":["cn=groupToSelect,ou=Groups,dc=foo,dc=com"],
 	"not-select":["cn=groupToIgnore,ou=Groups,dc=foo,dc=com"],
 	}
 	},
 	
 	"users":{
 	"base-dn":"ou=people,dc=foo,dc=com",
 	"id-attribute":"uid",
 	"user-info-attributes":{
 	"fullName":"Full Name",
 	"email":"Email"
 	},
 	"selection":{
 	"filter":"objectClass=inetOrgPerson",
 	"select":["uid=john,ou=People,dc=foo,dc=com", "uid=jack,ou=People,dc=foo,dc=com"],
 	"not-select":["uid=tom,ou=People,dc=foo,dc=com"],
 	}
 	},
 	}</programlisting>
               <para id="parad45e93" remap="p">The following sections explain the main parts of a LIC file.</para>
            </sidebar>
 
 
            <section remap="concept" id="ldap_sync_process">
               <title id="ttld56e3" remap="title">Synchronization Overview</title>
               <para id="parad56e6" remap="shortdesc"/>
 	
               <sidebar id="sctnd56e10" remap="section">
                  <title id="ttld56e12" remap="title">The Synchronization Process</title>
                  <para id="parad56e15" remap="p">The synchronization always starts when the following happens:</para>
                  <itemizedlist id="uld56e18" remap="ul">
 			
                     <listitem id="lid56e20" remap="li">
                        <para remap="#PCDATA">You manually upload a LDAP/AD Integration Configuration (LIC) file. Every new or updated LIC
 				upload triggers a new synchronization.</para>
                     </listitem>
 			
                     <listitem id="lid56e23" remap="li">
                        <para remap="#PCDATA">If the automatic synchronization is enabled, a synchronization is started when the timer goes off.</para>
                     </listitem>
 		
                  </itemizedlist>
                  <note id="noted56e27" remap="note">
                     <para remap="#PCDATA">Eucalyptus does not allow concurrent synchronization. If you trigger synchronization more
 			than once within a short time period, Eucalyptus only allows the first one.</para>
                  </note>
                  <para id="parad56e30" remap="p">During a synchronization, everything specified by an LIC in the LDAP/AD tree will be downloaded into Eucalyptus’ internal database. Each synchronization is a merging process of the information already in the database and the information from LDAP/AD. There are three cases for each entity: user, group or account:</para>
                  <itemizedlist id="uld56e33" remap="ul">
 			
                     <listitem id="lid56e35" remap="li">
                        <para remap="#PCDATA">If an entity from LDAP/AD is not in Eucalyptus, a new one is created in the database.</para>
                     </listitem>
 			
                     <listitem id="lid56e38" remap="li">
                        <para remap="#PCDATA">If an entity from LDAP/AD is already in Eucalyptus, the Eucalyptus version is updated. For example, if a user’s info attributes are changed, those changes are downloaded and updated.</para>
                     </listitem>
 			
                     <listitem id="lid56e41" remap="li">
                        <para remap="#PCDATA">If an entity in Eucalyptus is missing from LDAP/AD, it will be removed from the database if the clean-deletion option in LIC is set to true. Otherwise, it will be left in the database. </para>
                     </listitem>
 		
                  </itemizedlist>
                  <important id="importantd56e45" remap="note">
                     <para remap="#PCDATA">If clean-deletion is set to true, the removed entities in Eucalyptus will be lost forever, along with all its permissions and credentials. The resources associated with the entity will be left untouched. It is system administrator’s job to recycle these resources.</para>
                  </important>
               </sidebar>
 	
 	
               <sidebar id="sctnd56e49" remap="section">
                  <title id="ttld56e51" remap="title">LDAP Integration Configuration Format</title>
                  <para id="parad56e54" remap="p">An LIC is in JSON format, it has the following hierarchical structure and elements. Following
 				shows an example of the LIC file:</para>
                  <programlisting id="cdblkd56e57" remap="codeblock">{
 	"ldap-service":{
 	"server-url":"ldap://localhost:7733",
 	"auth-method":"simple",
 	"user-auth-method":"simple",
 	"auth-principal":"cn=ldapadmin,dc=foo,dc=com",
 	"auth-credentials": "{RSA/ECB/PKCS1Padding}EAXRnvwnKtCZOxSrD/F3ng/yHH3J4jMxNUS
 	kJJf6oqNMsUihjUerZ20e5iyXImPgjK1ELAPnppEfJvhCs7woS7jtFsedunsp5DJCNhgmOb2CR/MnH
 	11V3FNY7bBWoew5A8Wwy6.x7YrPMS0j7dJkwM7yfp1Z6AbKOo2688I9uIvJUQwEKS4dOp7RVdA0izl
 	lJBDPAxiFZ2qa40VjFI/1mggbiWDNlgxiVtZXAEK7x9SRHJytLS8nrNPpIvPuTg3djKiWPVOLZ6vpS
 	gPcVEliP261qdUfnf3GDKi3jqbPpRRQ6n8yI6aHw0gAtq8/qPyqjkkDP8JsGBgmXMxiCNPogbWg==",
 	"use-ssl":"false",
 	"ignore-ssl-cert-validation":"false",
 	"krb5-conf":"/path/to/krb5.conf",
 	},
 	
 	"sync":{
 	"enable":"true",
 	"auto":"true",
 	"interval":"900000",
 	"clean-deletion":"false",
 	},
 	
 	"accounting-groups":{
 	"base-dn":"ou=groups,dc=foo,dc=com",
 	"id-attribute":"cn",
 	"member-attribute":"member",
 	"selection":{
 	"filter":"objectClass=accountingGroup",
 	"select":["cn=accountingToSelect,ou=Groups,dc=foo,dc=com"],
 	"not-select":["cn=accountingToIgnore,ou=Groups,dc=foo,dc=com"],
 	}
 	},
 	
 	"groups-partition":{
 	"fooAccount":["fooGroup1", "fooGroup2"],
 	"barAccount":["barGroup1", "barGroup2"],
 	},
 	
 	"groups":{
 	"base-dn":"ou=groups,dc=foo,dc=com",
 	"id-attribute":"cn",
 	"member-attribute":"member",
 	"selection":{
 	"filter":"objectClass=groupOfNames",
 	"select":["cn=groupToSelect,ou=Groups,dc=foo,dc=com"],
 	"not-select":["cn=groupToIgnore,ou=Groups,dc=foo,dc=com"],
 	}
 	},
 	
 	"users":{
 	"base-dn":"ou=people,dc=foo,dc=com",
 	"id-attribute":"uid",
 	"user-info-attributes":{
 	"fullName":"Full Name",
 	"email":"Email"
 	},
 	"selection":{
 	"filter":"objectClass=inetOrgPerson",
 	"select":["uid=john,ou=People,dc=foo,dc=com", "uid=jack,ou=People,dc=foo,dc=com"],
 	"not-select":["uid=tom,ou=People,dc=foo,dc=com"],
 	}
 	},
 	}</programlisting>
                  <para id="parad56e60" remap="p">The following sections explain the main parts of a LIC file.</para>
               </sidebar>
 	
 
               <section remap="reference" id="ldap_service">
                  <title id="ttld57e3" remap="title">ldap-service</title>
                  <para id="parad57e6" remap="shortdesc">Short reference description.</para>
  	
                  <para id="parad57e12" remap="p">The <literal id="cdphd57e14" remap="codeph">ldap-service</literal> element contains everything related to the LDAP/AD service.</para>
    
    
                  <informaltable id="smtbld57e18" remap="properties">
                     <tgroup cols="2">
                        <thead id="sthdd57e20" remap="prophead">
                           <row>
    		
                              <entry id="stentd57e22" remap="proptypehd">Element</entry>
    		
                              <entry id="stentd57e25" remap="propdeschd">Description</entry>
    	
                           </row>
                        </thead>
                        <tbody>
                           <row id="strwd57e29" remap="property">
      	
                              <entry id="stentd57e31" remap="proptype">server-url</entry>
      	
                              <entry id="stentd57e34" remap="propdesc">The LDAP/AD server URL, starting with ldap:// or ldaps://.</entry>
      
                           </row>
                           <row id="strwd57e38" remap="property">
    		
                              <entry id="stentd57e40" remap="proptype">auth-method</entry>
    		
                              <entry id="stentd57e43" remap="propdesc">The LDAP/AD authentication method to perform synchronization.</entry>
    	
                           </row>
                           <row id="strwd57e47" remap="property">
    		
                              <entry id="stentd57e49" remap="proptype">auth-principal</entry>
    		
                              <entry id="stentd57e52" remap="propdesc">The ID of the administrative user for synchronization.</entry>
    	
                           </row>
                           <row id="strwd57e56" remap="property">
    		
                              <entry id="stentd57e58" remap="proptype">auth-credentials</entry>
    		
                              <entry id="stentd57e61" remap="propdesc">The credentials for LDAP/AD authentication, like a password. We recommend that you encrypt
    			this using ${EUCALYPTUS}/usr/sbin/euca-lictool.</entry>
    	
                           </row>
                           <row id="strwd57e65" remap="property">
    		
                              <entry id="stentd57e67" remap="proptype">user-auth-method</entry>
    		
                              <entry id="stentd57e70" remap="propdesc">The LDAP/AD authentication method for normal users to perform Dashboard login.
    			<itemizedlist id="uld57e72" remap="ul">
    				
                                    <listitem id="lid57e74" remap="li">
                                       <para remap="#PCDATA">
                                          <varname id="vrnmd57e75" remap="varname">simple</varname>: for clear text user/password authentication.</para>
                                    </listitem>
    				
                                    <listitem id="lid57e79" remap="li">
                                       <para remap="#PCDATA">
                                          <varname id="vrnmd57e80" remap="varname">DIGEST-MD5</varname>: for SASL authentication using MD5</para>
                                    </listitem>
    				
                                    <listitem id="lid57e84" remap="li">
                                       <para remap="#PCDATA">
                                          <varname id="vrnmd57e85" remap="varname">GSSAPI</varname>: SASL authentication using Kerberos V5.</para>
                                    </listitem>
    			
                                 </itemizedlist>
    			
    			
                              </entry>
    	
                           </row>
                           <row id="strwd57e92" remap="property">
    		
                              <entry id="stentd57e94" remap="proptype">use-ssl</entry>
    		
                              <entry id="stentd57e97" remap="propdesc">Specifies whether to use SSL for connecting to LDAP/AD service.</entry>
    	
                           </row>
                           <row id="strwd57e101" remap="property">
    		
                              <entry id="stentd57e103" remap="proptype">ignore-ssl-cert-validation</entry>
    		
                              <entry id="stentd57e106" remap="propdesc">Specifies whether to ignore self-signed SSL certs. This is useful when you only have self-signed SSL certs for your LDAP/AD services.</entry>
    	
                           </row>
                           <row id="strwd57e110" remap="property">
    		
                              <entry id="stentd57e112" remap="proptype">krb5-conf</entry>
    		
                              <entry id="stentd57e115" remap="propdesc">The file path for krb5.conf, if you use GSSAPI authentication method. </entry>
    	
                           </row>
                           <row id="strwd57e119" remap="property">
    		
                              <entry id="stentd57e121" remap="proptype">Prop name</entry>
    		
                              <entry id="stentd57e124" remap="propdesc">Prop value</entry>
    	
                           </row>
                        </tbody>
                     </tgroup>
                  </informaltable>
  
               </section>
               <section remap="reference" id="sync">
                  <title id="ttld58e3" remap="title">sync</title>
                  <para id="parad58e6" remap="shortdesc">Short reference description.</para>
  	
                  <para id="parad58e12" remap="p">The <literal id="cdphd58e14" remap="codeph">sync</literal> element contains elements for controlling synchronization.</para>
  	
                  <informaltable id="smtbld58e18" remap="properties">
                     <tgroup cols="2">
                        <thead id="sthdd58e20" remap="prophead">
                           <row>
  			
                              <entry id="stentd58e22" remap="proptypehd">Element</entry>
  			
                              <entry id="stentd58e25" remap="propdeschd">Description</entry>
  		
                           </row>
                        </thead>
                        <tbody>
                           <row id="strwd58e29" remap="property">
  			
                              <entry id="stentd58e31" remap="proptype">enable</entry>
  			
                              <entry id="stentd58e34" remap="propdesc">States whether the Dashboard uses LDAP rather than the Eucalyptus database for log-ins. Set
  				to true to turn on LDAP web logging. Set to false to use the Eucalyptus database for web
  				logging. If set to false, you can ignore all other fields in this section. Default value:
  				false</entry>
  		
                           </row>
                           <row id="strwd58e38" remap="property">
  			
                              <entry id="stentd58e40" remap="proptype">auto</entry>
  			
                              <entry id="stentd58e43" remap="propdesc">Set to true to turn on automatic synchronization. Set to false to turn off synchronization.
  			</entry>
  		
                           </row>
                           <row id="strwd58e47" remap="property">
  			
                              <entry id="stentd58e49" remap="proptype">interval</entry>
  			
                              <entry id="stentd58e52" remap="propdesc">The length in milliseconds of the automatic synchronization interval.</entry>
  		
                           </row>
                           <row id="strwd58e56" remap="property">
  			
                              <entry id="stentd58e58" remap="proptype">clean-deletion</entry>
  			
                              <entry id="stentd58e61" remap="propdesc">Parmeter denoting whether to remove identity entities from Eucalyptus when they are deleted
  				from LDAP. Set to true if you want Eucalyptus to remove any identities once their counterparts
  				in LDAP are deleted. Set to false if you want these identities kept without being purged.
  			</entry>
  		
                           </row>
                        </tbody>
                     </tgroup>
                  </informaltable>
  
               </section>
               <section remap="reference" id="accounting_groups">
                  <title id="ttld59e3" remap="title">account-groups</title>
                  <para id="parad59e6" remap="shortdesc">Short reference description.</para>
  	
                  <para id="parad59e12" remap="p">This section uses a special group in LDAP/AD to designate accounts in the Eucalyptus “accounting group.” The accounting group takes normal LDAP/AD groups as members, i.e., they are groups of groups. The accounting group’s name becomes the account name in Eucalyptus. The member groups become Eucalyptus groups in that account. And the users of all those groups become Eucalyptus users within that account and corresponding Eucalyptus groups.</para>
                  <tip id="warningd59e15" remap="note">
                     <para remap="#PCDATA">If you use <command id="cmdnmd59e17" remap="cmdname">accounting-groups</command>, remove the groups-partition section. These two sections are mutually exclusive.</para>
                  </tip>
  	
                  <informaltable id="smtbld59e22" remap="properties">
                     <tgroup cols="2">
                        <thead id="sthdd59e24" remap="prophead">
                           <row>
  			
                              <entry id="stentd59e26" remap="proptypehd">Element</entry>
  			
                              <entry id="stentd59e29" remap="propdeschd">Description</entry>
  		
                           </row>
                        </thead>
                        <tbody>
                           <row id="strwd59e33" remap="property">
  			
                              <entry id="stentd59e35" remap="proptype">base-dn</entry>
  			
                              <entry id="stentd59e38" remap="propdesc">The base DN of accounting groups in the LDAP/AD tree.</entry>
  		
                           </row>
                           <row id="strwd59e42" remap="property">
  			
                              <entry id="stentd59e44" remap="proptype">id-attribute</entry>
  			
                              <entry id="stentd59e47" remap="propdesc">The ID attribute name of the accounting group entry in LDAP/AD tree.</entry>
  		
                           </row>
                           <row id="strwd59e51" remap="property">
  			
                              <entry id="stentd59e53" remap="proptype">member-attribute</entry>
  			
                              <entry id="stentd59e56" remap="propdesc">The LDAP/AD attribute name for members of the accounting group.</entry>
  		
                           </row>
                           <row id="strwd59e60" remap="property">
  			
                              <entry id="stentd59e62" remap="proptype">selection</entry>
  			
                              <entry id="stentd59e65" remap="propdesc">The accounting groups you want to map to. This contains the following elements:
  				<itemizedlist id="uld59e67" remap="ul">
  					
                                    <listitem id="lid59e69" remap="li">
                                       <para remap="#PCDATA">
                                          <varname id="vrnmd59e70" remap="varname">filter</varname>: The LDAP/AD searching filter used for the LDAP/AD search to get the relevant LDAP/AD entities, e.g. the users to be synchronized. (Example: objectClass=groupOfNames)</para>
                                    </listitem>
  					
                                    <listitem id="lid59e74" remap="li">
                                       <para remap="#PCDATA">
                                          <varname id="vrnmd59e75" remap="varname">select</varname>: Explicitly gives the full DN of entities to be synchronized, in case they can not be specified by the search filter. (Example: cn=groupToSelect,ou=Groups,dc=foo,dc=com)</para>
                                    </listitem>
  					
                                    <listitem id="lid59e79" remap="li">
                                       <para remap="#PCDATA">
                                          <varname id="vrnmd59e80" remap="varname">not-select:</varname> Explicitly gives the full DN of entities NOT to be
  						synchronized, in case this can not be specified by the search filter. (Example: cn=groupToIgnore,ou=Groups,dc=foo,dc=com)</para>
                                    </listitem>
  				
                                 </itemizedlist>
  			
                              </entry>
  		
                           </row>
                        </tbody>
                     </tgroup>
                  </informaltable>
  
               </section>
               <section remap="reference" id="groups_partition">
                  <title id="ttld60e3" remap="title">groups-partition</title>
                  <para id="parad60e6" remap="shortdesc">Short reference description.</para>
  	
                  <para id="parad60e12" remap="p">Like accounting-groups, groups-partition specifies how to map LDAP/AD groups to
  		Eucalyptus accounts. However, in this section you to manually specify which LDAP/AD groups you want to map to Eucalyputs accounts. </para>
                  <para id="parad60e15" remap="p">The Eucalyptus accounts are created by partitioning LDAP/AD groups. Each partition composes
  			an Eucalyptus account. So all the groups within the partition become Eucalyptus groups within that account. All the users of those groups will become Eucalyptus users within that account and the corresponding Eucalyptus groups. </para>
                  <para id="parad60e18" remap="p">This section requires that you specify one partition at a time, using a list of JSON key-value pairs. For each entry, the key is the account name to be mapped and the value is a list of names of LDAP/AD groups to be mapped into the account. For example:</para>
                  <programlisting id="cdblkd60e21" remap="codeblock">"groups-partition": {
          "salesmarketing": ["sales", "marketing"],
          "devsupport": ["engineering", "support"],
}
</programlisting>
                  <para id="parad60e24" remap="p">Here salesmarketing and devsupport are names for the groups partition and are used as the corresponding Eucalyptus account names.</para>
                  <tip id="warningd60e27" remap="note">
                     <para remap="#PCDATA">If you use groups-partition, remove the accounting-groups section. These two sections are mutually exclusive.</para>
                  </tip>
  	
  
               </section>
               <section remap="reference" id="groups">
                  <title id="ttld61e3" remap="title">groups</title>
                  <para id="parad61e6" remap="shortdesc">Short reference description.</para>
  	
                  <para id="parad61e12" remap="p">This groups element specifies how to map LDAP/AD groups to Eucalyptus groups. It contains the elements listed in the following table. The meanings are similar to those in accounting-groups element.</para>
    
  	
                  <informaltable id="smtbld61e15" remap="properties">
                     <tgroup cols="2">
                        <thead id="sthdd61e17" remap="prophead">
                           <row>
  			
                              <entry id="stentd61e19" remap="proptypehd">Element</entry>
  			
                              <entry id="stentd61e22" remap="propdeschd">Description</entry>
  		
                           </row>
                        </thead>
                        <tbody>
                           <row id="strwd61e26" remap="property">
  			
                              <entry id="stentd61e28" remap="proptype">base-dn</entry>
  			
                              <entry id="stentd61e31" remap="propdesc">The base DN for searching groups.</entry>
  		
                           </row>
                           <row id="strwd61e35" remap="property">
  			
                              <entry id="stentd61e37" remap="proptype">id-attribute</entry>
  			
                              <entry id="stentd61e40" remap="propdesc">The ID attribute name of the LDAP group.</entry>
  		
                           </row>
                           <row id="strwd61e44" remap="property">
  			
                              <entry id="stentd61e46" remap="proptype">member-attribute</entry>
  			
                              <entry id="stentd61e49" remap="propdesc">The name of the attribute for group members. Usually, it is member in modern LDAP implementation, which lists full user DN.</entry>
  		
                           </row>
                           <row id="strwd61e53" remap="property">
  			
                              <entry id="stentd61e55" remap="proptype">selection</entry>
  			
                              <entry id="stentd61e58" remap="propdesc">The specific LDAP/AD groups you want to map to. This contains the following elements:
  				<itemizedlist id="uld61e60" remap="ul">
  					
                                    <listitem id="lid61e62" remap="li">
                                       <para remap="#PCDATA">
                                          <varname id="vrnmd61e63" remap="varname">filter</varname>: The LDAP/AD searching filter used for the LDAP/AD search to get the relevant LDAP/AD entities, e.g. the users to be synchronized. (Example: objectClass=groupOfNames)</para>
                                    </listitem>
  					
                                    <listitem id="lid61e67" remap="li">
                                       <para remap="#PCDATA">
                                          <varname id="vrnmd61e68" remap="varname">select</varname>: The LDAP/AD searching filter used for the LDAP/AD search to get the relevant LDAP/AD entities, e.g. the users to be synchronized. (Example: objectClass=groupOfNames)</para>
                                    </listitem>
  					
                                    <listitem id="lid61e72" remap="li">
                                       <para remap="#PCDATA">
                                          <varname id="vrnmd61e73" remap="varname">not-select:</varname> Explicitly gives the full DN of entities NOT to be
  						synchronized, in case this can not be specified by the search filter. (Example: cn=groupToIgnore,ou=Groups,dc=foo,dc=com)</para>
                                    </listitem>
  				
                                 </itemizedlist>
  			
                              </entry>
  		
                           </row>
                        </tbody>
                     </tgroup>
                  </informaltable>
  
               </section>
               <section remap="reference" id="users">
                  <title id="ttld62e3" remap="title">users</title>
                  <para id="parad62e6" remap="shortdesc">Short reference description.</para>
  	
                  <para id="parad62e12" remap="p">Explicitly gives the full DN of entities NOT to be synchronized, in case this can not be specified by the search filter. (Example: cn=groupToIgnore,ou=Groups,dc=foo,dc=com)</para>
  	
                  <informaltable id="smtbld62e16" remap="properties">
                     <tgroup cols="2">
                        <thead id="sthdd62e18" remap="prophead">
                           <row>
  			
                              <entry id="stentd62e20" remap="proptypehd">Element</entry>
  			
                              <entry id="stentd62e23" remap="propdeschd">Description</entry>
  		
                           </row>
                        </thead>
                        <tbody>
                           <row id="strwd62e27" remap="property">
  			
                              <entry id="stentd62e29" remap="proptype">base-dn</entry>
  			
                              <entry id="stentd62e32" remap="propdesc">The base DN for searching users.</entry>
  		
                           </row>
                           <row id="strwd62e36" remap="property">
  			
                              <entry id="stentd62e38" remap="proptype">id-attribute</entry>
  			
                              <entry id="stentd62e41" remap="propdesc">The attribute ID of the LDAP user.</entry>
  		
                           </row>
                           <row id="strwd62e45" remap="property">
  			
                              <entry id="stentd62e47" remap="proptype">selection</entry>
  			
                              <entry id="stentd62e50" remap="propdesc">The specific LDAP/AD users you want to map to. This contains the following elements:
  				<itemizedlist id="uld62e52" remap="ul">
  					
                                    <listitem id="lid62e54" remap="li">
                                       <para remap="#PCDATA">
                                          <varname id="vrnmd62e55" remap="varname">filter</varname>: The LDAP/AD searching filter used for the LDAP/AD search to get the relevant LDAP/AD entities, e.g. the users to be synchronized. (Example: objectClass=groupOfNames)</para>
                                    </listitem>
  					
                                    <listitem id="lid62e59" remap="li">
                                       <para remap="#PCDATA">
                                          <varname id="vrnmd62e60" remap="varname">select</varname>: Explicitly gives the full DN of entities to be synchronized, in case they can not be specified by the search filter. (Example: cn=groupToSelect,ou=Groups,dc=foo,dc=com)</para>
                                    </listitem>
  					
                                    <listitem id="lid62e64" remap="li">
                                       <para remap="#PCDATA">
                                          <varname id="vrnmd62e65" remap="varname">not-select:</varname> Explicitly gives the full DN of entities NOT to be
  						synchronized, in case this can not be specified by the search filter. (Example: cn=groupToIgnore,ou=Groups,dc=foo,dc=com)</para>
                                    </listitem>
  				
                                 </itemizedlist>
  			
                              </entry>
  		
                           </row>
                        </tbody>
                     </tgroup>
                  </informaltable>
  
               </section>
            </section>
         </section>
      </section>
      <section remap="concept" id="task_oview">
         <title id="ttld63e3" remap="title">Access Tasks</title>
         <para id="parad63e6" remap="shortdesc"/>
		
         <para id="parad63e11" remap="p">This section provides details about the tasks you perform using policies and identities. The
			tasks you can perform are divided up into tasks for users, tasks for groups, and tasks for
			policies.</para>
		
		
         <para id="parad63e16" remap="p">The following use cases detail work flows for common processes:</para>
		
         <itemizedlist id="uld63e19" remap="ul">
			
            <listitem id="lid63e21" remap="li"/>
			
            <listitem id="lid63e24" remap="li"/>
		
         </itemizedlist>
		
         <para id="parad63e28" remap="p">You can perform the following access-related tasks listed in the following sections:</para>
		
         <itemizedlist id="uld63e31" remap="ul">
			
            <listitem id="lid63e33" remap="li">
               <para remap="#PCDATA">Accounts: </para>
               <itemizedlist id="uld63e35" remap="ul">
					
                  <listitem id="lid63e37" remap="li"/>
					
                  <listitem id="lid63e40" remap="li"/>
					
                  <listitem id="lid63e43" remap="li"/>
					
                  <listitem id="lid63e46" remap="li"/>
					
                  <listitem id="lid63e49" remap="li"/>
					
                  <listitem id="lid63e52" remap="li"/>
				
               </itemizedlist>
            </listitem>
			
            <listitem id="lid63e57" remap="li">
               <para remap="#PCDATA">Groups: </para>
               <itemizedlist id="uld63e59" remap="ul">
					
                  <listitem id="lid63e61" remap="li"/>
					
                  <listitem id="lid63e64" remap="li"/>
					
                  <listitem id="lid63e67" remap="li"/>
					
                  <listitem id="lid63e70" remap="li"/>
					
                  <listitem id="lid63e73" remap="li"/>
					
                  <listitem id="lid63e76" remap="li"/>
					
                  <listitem id="lid63e79" remap="li"/>
					
                  <listitem id="lid63e82" remap="li"/>
				
               </itemizedlist>
            </listitem>
			
            <listitem id="lid63e87" remap="li">
               <para remap="#PCDATA">Users:
				</para>
               <itemizedlist id="uld63e89" remap="ul">
					
                  <listitem id="lid63e91" remap="li"/>
					
                  <listitem id="lid63e94" remap="li"/>
					
                  <listitem id="lid63e97" remap="li"/>
					
                  <listitem id="lid63e100" remap="li"/>
					
                  <listitem id="lid63e103" remap="li"/>
				
               </itemizedlist>
            </listitem>
				
            <listitem id="lid63e108" remap="li">
               <para remap="#PCDATA">Credentials:
					</para>
               <itemizedlist id="uld63e110" remap="ul">
						
                  <listitem id="lid63e112" remap="li"/>
						
                  <listitem id="lid63e115" remap="li"/>
						
                  <listitem id="lid63e118" remap="li"/>
						
                  <listitem id="lid63e121" remap="li"/>
						
					
               </itemizedlist>
            </listitem>
			
		
         </itemizedlist>
	
         <section remap="task" id="access_initial_setup">
            <title id="ttld64e3" remap="title">Use Case: Creating an Administrator</title>
            <para id="parad64e6" remap="shortdesc"/>
        
            <para id="parad64e12" remap="p">This use case details tasks for creating an administrator. These tasks require that you
        		have your account credentials for sending requests to Eucalyptus using the command line interface (CLI) tools.</para>
        
    
            <section remap="task" id="setup_create_admin_group">
               <title id="ttld64e23" remap="title">Create an Admin Group</title>
			
               <para id="parad64e30" remap="p">Eucalyptus recommends using account credentials as little as possible. You can avoid using account credentials by creating a group of users with administrative privileges. </para>
			
               <orderedlist id="old64e34" remap="steps">
				
                  <listitem id="lid64e36" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd64e38" remap="cmd">Create a group called <userinput id="usrinptd64e40" remap="userinput">administrators</userinput>.</phrase>
					
                     </para>
                     <programlisting id="cdblkd64e46" remap="codeblock">euare-groupcreate -g administrators</programlisting>
                  </listitem>
				
                  <listitem id="lid64e51" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd64e53" remap="cmd">Verify that the group was created.</phrase>
					
                     </para>
                     <programlisting id="cdblkd64e58" remap="codeblock">euare-grouplistbypath</programlisting>
                     <para id="parad64e64" remap="p">Eucalyptus returns a listing of the groups that have been created, as in the following
						example.</para>
                     <programlisting id="cdblkd64e67" remap="codeblock">arn:aws:iam::123456789012:group/administrators</programlisting>
                  </listitem>
			
               </orderedlist>
		
            </section>
            <section remap="task" id="setup_group_pol">
               <title id="ttld64e77" remap="title">Add a Policy to the Group</title>
			
               <para id="parad64e84" remap="p">Add a policy to the administrators group that allows its members to perform all actions in
					Eucalyptus.</para>
			
               <orderedlist id="old64e88" remap="steps">
				
                  <listitem id="lid64e90" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd64e92" remap="cmd">Enter the following command to create a policy called <literal id="cdphd64e94" remap="codeph">admin-root</literal> that
						grants all actions on all resources to all users in the
						administrators group:</phrase>
					
                     </para>
                     <programlisting id="cdblkd64e100" remap="codeblock">euare-groupaddpolicy -p admin-root -g administrators -e Allow -a "*" -r "*" -o</programlisting>
                  </listitem>
			
               </orderedlist>
		
            </section>
            <section remap="task" id="setup_admin_user">
               <title id="ttld64e110" remap="title">Create an Administrative User</title>
               <para id="parad64e113" remap="shortdesc"/>
			
               <para id="parad64e119" remap="p">Create a user for day-to-day administrative work and add that user to the administrators group.</para>
			
               <orderedlist id="old64e123" remap="steps">
				
                  <listitem id="lid64e125" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd64e127" remap="cmd">Enter the following command to create an administrative user named <literal id="cdphd64e129" remap="codeph">alice</literal>:</phrase>
					
                     </para>
                     <programlisting id="cdblkd64e135" remap="codeblock">euare-usercreate -u alice</programlisting>
                  </listitem>
				
                  <listitem id="lid64e140" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd64e142" remap="cmd">Add the new administrative user to the administrators group.</phrase>
					
                     </para>
                     <programlisting id="cdblkd64e147" remap="codeblock">euare-groupadduser -g administrators -u alice</programlisting>
                  </listitem>
			
               </orderedlist>
		
            </section>
            <section remap="task" id="setup_gen_admin_creds">
               <title id="ttld64e157" remap="title">Generate Administrative Credentials</title>
               <para id="parad64e160" remap="shortdesc"/>
			
               <para id="parad64e166" remap="p">To start running commands as the new administrative user, you must create an access key for
					that user.</para>
			
               <orderedlist id="old64e170" remap="steps">
				
                  <listitem id="lid64e172" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd64e174" remap="cmd">Enter the following command to generate an access key for the administrative user:</phrase>
					
                     </para>
                     <programlisting id="cdblkd64e179" remap="codeblock">euare-useraddkey -u alice</programlisting>
                     <para id="parad64e185" remap="p">Eucalyptus returns the access key ID and the user's secret key.</para>
                  </listitem>
				
                  <listitem id="lid64e190" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd64e192" remap="cmd">Open the <filename id="flpthd64e194" remap="filepath">~/.iamrc</filename> file and replace your account credentials the
						user's credentials you just created.</phrase>
					
                     </para>
                     <programlisting id="cdblkd64e200" remap="codeblock">ed ~/.iamrc</programlisting>
                  </listitem>
				
                  <listitem id="lid64e205" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd64e207" remap="cmd">Switch euca2ools over to using the new credentials.</phrase>
					
                     </para>
                     <programlisting id="cdblkd64e212" remap="codeblock">source ~/.eucarc</programlisting>
                  </listitem>
			
               </orderedlist>
		
            </section>
         </section>
         <section remap="task" id="setup_user">
            <title id="ttld65e3" remap="title">Use Case: Creating a User</title>
            <para id="parad65e6" remap="shortdesc"/>
        
            <para id="parad65e12" remap="p">This use case details tasks needed to create a user with limited access. </para>
        
    
            <section remap="task" id="setup_user_group">
               <title id="ttld65e19" remap="title">Create a Group</title>
               <para id="parad65e22" remap="shortdesc"/>
			
               <para id="parad65e28" remap="p">We recommend that you apply permissions to groups, not users. In this example, we will create
					a group for users with limited access.</para>
			
               <orderedlist id="old65e32" remap="steps">
				
                  <listitem id="lid65e34" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd65e36" remap="cmd">Enter the following command to create a group for users who will be allowed create
					snapshots of volumes in Eucalyptus.</phrase>
					
                     </para>
                     <programlisting id="cdblkd65e41" remap="codeblock">euare-groupcreate -g ebs-backup</programlisting>
                  </listitem>
				
                  <listitem id="lid65e46" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd65e48" remap="cmd">Open an editor and enter the following JSON policy:</phrase>
					
                     </para>
                     <programlisting id="cdblkd65e53" remap="codeblock">{
  "Statement": [
    {
      "Action": [
        "ec2:CreateSnapshot"
      ],
      "Effect": "Allow",
      "Resource": "*"
    }
  ]
}</programlisting>
                  </listitem>
				
                  <listitem id="lid65e58" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd65e60" remap="cmd">Save and close the file.</phrase>
					
				
                     </para>
                  </listitem>
				
                  <listitem id="lid65e64" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd65e66" remap="cmd">Enter the following to add the new policy name <literal id="cdphd65e68" remap="codeph">allow-snapshot</literal> and the
						JSON policy file to the <literal id="cdphd65e71" remap="codeph">ebs-backup</literal> group:</phrase>
					
                     </para>
                     <programlisting id="cdblkd65e77" remap="codeblock">euare-groupuploadpolicy -g ebs-backup -p allow-snapshot -f allow-snapshot.json</programlisting>
                  </listitem>
			
               </orderedlist>
		
            </section>
            <section remap="task" id="setup_user_create">
               <title id="ttld65e87" remap="title">Create the User</title>
               <para id="parad65e90" remap="shortdesc"/>
					
               <para id="parad65e96" remap="p">Create the user for the group with limited access.</para>
					
               <orderedlist id="old65e100" remap="steps">
						
                  <listitem id="lid65e102" remap="step">
                     <para remap="#PCDATA">
							
                        <phrase id="phrsd65e104" remap="cmd">Enter the following command to create the user <literal id="cdphd65e106" remap="codeph">sam</literal> in the group
								<literal id="cdphd65e109" remap="codeph">ebs-backup</literal> and generate a new key pair for the user:</phrase>
							
                     </para>
                     <programlisting id="cdblkd65e115" remap="codeblock">euare-usercreate -u sam -g ebs-backup -k</programlisting>
                     <para id="parad65e121" remap="p">Eucalyptus responds with the access key ID and the secret key, as in the following
								example:</para>
                     <programlisting id="cdblkd65e124" remap="codeblock">AKIAJ25S6IJ5K53Y5GCA
QLKyiCpfjWAvlo9pWqWCbuGB9L3T61w7nYYF057l</programlisting>
                  </listitem>
					
               </orderedlist>
				
            </section>
         </section>
         <section remap="concept" id="account_tasks">
            <title id="ttld88e3" remap="title">Accounts</title>
            <para id="parad88e6" remap="shortdesc"/>
 	
            <para id="parad88e10" remap="p">Accounts are the primary unit for resource usage accounting. Each account is a separate name
 		space and is identified by its UUID (Universal Unique Identifier).</para>
 	
            <para id="parad88e13" remap="p">Tasks performed at the account level can only be done by the users in the <emphasis role="bold" id="bd88e15" remap="b">eucalyptus</emphasis>
 		account.</para>
 		
 	
 
            <section remap="task" id="account_add">
               <sectioninfo id="prlgd66e8" remap="prolog">
                  <abstract>
                     <para id="shrtdscd66e6" remap="shortdesc"/>
                  </abstract>
			
                  <itermset>
                     <indexterm id="indxtrmd66e14" remap="indexterm">
                        <primary>
					account
					
				</primary>
                        <secondary id="indxtrmd66e16" remap="indexterm">add</secondary>
                     </indexterm>
                  </itermset>
		
               </sectioninfo>
               <title id="ttld66e3" remap="title">Add an Account</title>
               <para id="parad66e6" remap="shortdesc"/>
        
               <para id="parad66e27" remap="p">To add a new account:</para>
        
    
               <section remap="task" id="account_add_cli">
                  <title id="ttld66e34" remap="title">Add an Account (CLI)</title>
			
                  <para id="parad66e41" remap="p">To add a new account using the CLI:</para>
			
                  <orderedlist id="old66e45" remap="steps">
				
                     <listitem id="lid66e47" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd66e49" remap="cmd">Enter the following command:</phrase>
					
                        </para>
                        <programlisting id="cdblkd66e54" remap="codeblock">euare-accountcreate -a &lt;account_name&gt;</programlisting>
                        <para remap="#PCDATA">Eucalyptus returns the account name and its ID, as in this example:
					</para>
                        <programlisting id="cdblkd66e60" remap="codeblock">account01 	592459037010</programlisting>
                     </listitem>
				
			
                  </orderedlist>
			
		
               </section>
               <section remap="task" id="account_add_db">
                  <title id="ttld66e70" remap="title">Add an Account (Dashboard)</title>
                  <para id="parad66e73" remap="shortdesc"/>
			
                  <para id="parad66e79" remap="p">To add a new account using the Dashboard:</para>
			
                  <orderedlist id="old66e83" remap="steps">
				
                     <listitem id="lid66e85" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd66e87" remap="cmd">Click <guilabel id="uictrld66e89" remap="uicontrol">Accounts</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld66e95" remap="uicontrol">Accounts</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid66e100" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd66e102" remap="cmd">Click <guilabel id="uictrld66e104" remap="uicontrol">New account</guilabel> in the <guilabel id="uictrld66e107" remap="uicontrol">Accounts</guilabel> page.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld66e113" remap="uicontrol">Create a new account</guilabel> popup displays.</para>
                     </listitem>
				
                     <listitem id="lid66e118" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd66e120" remap="cmd">Enter an account name in the <guilabel id="uictrld66e122" remap="uicontrol">Account name</guilabel> field and click
						<guilabel id="uictrld66e125" remap="uicontrol">OK</guilabel>.</phrase>
					
                        </para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd66e134" remap="result">The new account displays in the list on the <guilabel id="uictrld66e136" remap="uicontrol">Accounts</guilabel> page.</para>
		
               </section>
            </section>
            <section remap="task" id="account_approve">
               <sectioninfo id="prlgd67e8" remap="prolog">
                  <abstract>
                     <para id="shrtdscd67e6" remap="shortdesc"/>
                  </abstract>
			
                  <itermset>
                     <indexterm id="indxtrmd67e14" remap="indexterm">
                        <primary>
					account
					
				</primary>
                        <secondary id="indxtrmd67e16" remap="indexterm">approve</secondary>
                     </indexterm>
                  </itermset>
		
               </sectioninfo>
               <title id="ttld67e3" remap="title">Approve an Account</title>
               <para id="parad67e6" remap="shortdesc"/>
        
               <para id="parad67e27" remap="p">To approve an account:</para>

    
			
               <orderedlist id="old67e31" remap="steps">
				
                  <listitem id="lid67e33" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd67e35" remap="cmd">Click <guilabel id="uictrld67e37" remap="uicontrol">Accounts</guilabel> in the Quick Links section.</phrase>
					
                     </para>
                     <para remap="#PCDATA">The <guilabel id="uictrld67e43" remap="uicontrol">Accounts</guilabel> page displays.</para>
                  </listitem>
				
                  <listitem id="lid67e48" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd67e50" remap="cmd">Click the <guilabel id="uictrld67e52" remap="uicontrol">ID</guilabel> of the account you want to approve.</phrase>
					
                     </para>
                     <para remap="#PCDATA">The account, name, and Registration status are highlighted.</para>
                  </listitem>
				
                  <listitem id="lid67e60" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd67e62" remap="cmd">Click <guilabel id="uictrld67e64" remap="uicontrol">Approve</guilabel>.</phrase>
					
                     </para>
                     <para remap="#PCDATA">The <guilabel id="uictrld67e70" remap="uicontrol">Approve selected accounts</guilabel> popup displays.</para>
                  </listitem>
				
                  <listitem id="lid67e75" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd67e77" remap="cmd">Verify that the displayed account is the one you want, and click <guilabel id="uictrld67e79" remap="uicontrol">OK</guilabel>.</phrase>
				
                     </para>
                  </listitem>
			
               </orderedlist>
			
               <para id="sctnd67e85" remap="result">The account's registration status displays as <guilabel id="uictrld67e87" remap="uicontrol">CONFIRMED</guilabel> on the <guilabel id="uictrld67e90" remap="uicontrol">Accounts</guilabel> page.</para>
		
            </section>
            <section remap="task" id="account_reject">
               <sectioninfo id="prlgd68e8" remap="prolog">
                  <abstract>
                     <para id="shrtdscd68e6" remap="shortdesc"/>
                  </abstract>
			
                  <itermset>
                     <indexterm id="indxtrmd68e14" remap="indexterm">
                        <primary>
					account
					
				</primary>
                        <secondary id="indxtrmd68e16" remap="indexterm">reject</secondary>
                     </indexterm>
                  </itermset>
		
               </sectioninfo>
               <title id="ttld68e3" remap="title">Reject an Account</title>
               <para id="parad68e6" remap="shortdesc"/>
        
               <para id="parad68e27" remap="p">To reject an account:</para>
        
   
			
               <orderedlist id="old68e31" remap="steps">
				
                  <listitem id="lid68e33" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd68e35" remap="cmd">Click <guilabel id="uictrld68e37" remap="uicontrol">Accounts</guilabel> in the Quick Links section.</phrase>
					
                     </para>
                     <para remap="#PCDATA">The <guilabel id="uictrld68e43" remap="uicontrol">Accounts</guilabel> page displays.</para>
                  </listitem>
				
                  <listitem id="lid68e48" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd68e50" remap="cmd">Click the <guilabel id="uictrld68e52" remap="uicontrol">ID</guilabel> of the account you want to delete.</phrase>
					
                     </para>
                     <para remap="#PCDATA">The account, name, and Registration status are highlighted.</para>
                  </listitem>
				
                  <listitem id="lid68e60" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd68e62" remap="cmd">Click <guilabel id="uictrld68e64" remap="uicontrol">Reject</guilabel>.</phrase>
					
                     </para>
                     <para remap="#PCDATA">The <guilabel id="uictrld68e70" remap="uicontrol">Reject selected accounts</guilabel> popup displays.</para>
                  </listitem>
				
                  <listitem id="lid68e75" remap="step">
                     <para remap="#PCDATA">
					
                        <phrase id="phrsd68e77" remap="cmd">Verify that the displayed account is the one you want, and click <guilabel id="uictrld68e79" remap="uicontrol">OK</guilabel>.</phrase>
				
                     </para>
                  </listitem>
			
               </orderedlist>
			
               <para id="sctnd68e85" remap="result">The account no longer displays on the <guilabel id="uictrld68e87" remap="uicontrol">Accounts</guilabel> page.</para>
		
            </section>
            <section remap="task" id="account_rename">
               <sectioninfo id="prlgd69e8" remap="prolog">
                  <abstract>
                     <para id="shrtdscd69e6" remap="shortdesc"/>
                  </abstract>
			
                  <itermset>
                     <indexterm id="indxtrmd69e14" remap="indexterm">
                        <primary>
					account
					
				</primary>
                        <secondary id="indxtrmd69e16" remap="indexterm">rename</secondary>
                     </indexterm>
                  </itermset>
		
               </sectioninfo>
               <title id="ttld69e3" remap="title">Rename an Account</title>
               <para id="parad69e6" remap="shortdesc"/>
        
               <para id="parad69e27" remap="p">This section explains steps to perform so that you can rename an account.</para>
        
    
               <section remap="task" id="account_rename_cli">
                  <title id="ttld69e34" remap="title">Using the CLI</title>
                  <para id="parad69e37" remap="shortdesc"/>
			
                  <para id="parad69e43" remap="p">To change an account's name using the CLI:</para>
			
                  <orderedlist id="old69e47" remap="steps">
				
                     <listitem id="lid69e49" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd69e51" remap="cmd">Enter the following command:</phrase>
					
                        </para>
                        <programlisting id="cdblkd69e56" remap="codeblock">uare-accountaliascreate -a &lt;new_name&gt;</programlisting>
                     </listitem>
			
                  </orderedlist>
		
               </section>
               <section remap="task" id="group_rename_db">
                  <title id="ttld69e68" remap="title">Using the Dashboard</title>
                  <para id="parad69e71" remap="shortdesc"/>
			
                  <para id="parad69e77" remap="p">To change an account's name using the Dashboard:</para>
			
                  <orderedlist id="old69e81" remap="steps">
				
                     <listitem id="lid69e83" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd69e85" remap="cmd">Click <guilabel id="uictrld69e87" remap="uicontrol">Accounts</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld69e93" remap="uicontrol">Accounts</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid69e98" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd69e100" remap="cmd">Click the <guilabel id="uictrld69e102" remap="uicontrol">ID</guilabel> of the account you want to rename.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The account's <guilabel id="uictrld69e108" remap="uicontrol">Properties</guilabel> area displays.</para>
                     </listitem>
				
                     <listitem id="lid69e113" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd69e115" remap="cmd">In the <guilabel id="uictrld69e117" remap="uicontrol">Name</guilabel> field, enter the new name of the account.</phrase>
				
                        </para>
                     </listitem>
				
                     <listitem id="lid69e122" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd69e124" remap="cmd">Click <guilabel id="uictrld69e126" remap="uicontrol">Save</guilabel>.</phrase>
				
                        </para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd69e132" remap="result">The new account name displays in the <guilabel id="uictrld69e134" remap="uicontrol">Accounts</guilabel> page.</para>
		
               </section>
            </section>
            <section remap="task" id="accounts_list">
               <title id="ttld70e3" remap="title">List Accounts</title>
               <para id="parad70e6" remap="shortdesc"/>
        
               <para id="parad70e12" remap="p">This section explains steps to perform so that you can list accounts.</para>
        
    
               <section remap="task" id="user_list_cli">
                  <title id="ttld70e19" remap="title">Using the CLI</title>
                  <para id="parad70e22" remap="shortdesc"/>
			
                  <para id="parad70e28" remap="p">Use the <command id="cmdnmd70e30" remap="cmdname">euare-accountlist</command> command to list all the accounts in an account
				or to list all the users with a particular path prefix. The output lists the ARN for each resulting user.</para>
                  <programlisting id="cdblkd70e34" remap="codeblock">euare-userlistbypath -p &lt;path&gt;</programlisting>
			
		
               </section>
               <section remap="task" id="user_list_db">
                  <title id="ttld70e42" remap="title">Using the Dashboard</title>
                  <para id="parad70e45" remap="shortdesc"/>
			
                  <para id="parad70e51" remap="p">To list accounts using the Dashboard:</para>
			
                  <orderedlist id="old70e55" remap="steps">
				
                     <listitem id="lid70e57" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd70e59" remap="cmd">Click <guilabel id="uictrld70e61" remap="uicontrol">Accounts</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld70e67" remap="uicontrol">Accounts</guilabel> page displays.</para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd70e73" remap="result">The <guilabel id="uictrld70e75" remap="uicontrol">Accounts</guilabel> page displays all accounts in your cloud.</para>
		
               </section>
            </section>
            <section remap="task" id="account_delete">
               <sectioninfo id="prlgd71e8" remap="prolog">
                  <abstract>
                     <para id="shrtdscd71e6" remap="shortdesc"/>
                  </abstract>
			
                  <itermset>
                     <indexterm id="indxtrmd71e14" remap="indexterm">
                        <primary>
					account
					
				</primary>
                        <secondary id="indxtrmd71e16" remap="indexterm">delete</secondary>
                     </indexterm>
                  </itermset>
		
               </sectioninfo>
               <title id="ttld71e3" remap="title">Delete an Account</title>
               <para id="parad71e6" remap="shortdesc"/>
        
               <tip id="warningd71e27" remap="note">
                  <para remap="#PCDATA">If there are resources tied to the account that you delete, the resources remain. We
        		recommend that you delete these resources first. </para>
               </tip>
               <para id="parad71e30" remap="p">To delete an account:</para>
        
    
               <section remap="task" id="account_delete_cli">
                  <title id="ttld71e37" remap="title">Delete an Account (CLI)</title>
                  <para id="parad71e40" remap="shortdesc"/>
			
                  <para id="parad71e46" remap="p">To delete an account using the CLI:</para>
			
                  <orderedlist id="old71e50" remap="steps">
				
                     <listitem id="lid71e52" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd71e54" remap="cmd">Enter the following command:</phrase>
					
                        </para>
                        <programlisting id="cdblkd71e59" remap="codeblock">euare-accountdel -a &lt;account_name&gt; -r true</programlisting>
                        <para id="parad71e62" remap="p">Use the <literal id="cdphd71e64" remap="codeph">-r</literal> option set to <literal id="cdphd71e67" remap="codeph">true</literal> to delete the account
							recursively. You don't have to use this option if have already deleted users, keys, and
							passwords in this account.</para>
                        <para remap="#PCDATA">Eucalyptus does not return any message.
					</para>
                     </listitem>
				
			
                  </orderedlist>
			
		
               </section>
               <section remap="task" id="account_delete_db">
                  <title id="ttld71e81" remap="title">Delete an Account (Dashboard)</title>
                  <para id="parad71e84" remap="shortdesc"/>
				
                  <para id="parad71e90" remap="p">To delete an account:</para>
				
                  <orderedlist id="old71e94" remap="steps">
					
                     <listitem id="lid71e96" remap="step">
                        <para remap="#PCDATA">
						
                           <phrase id="phrsd71e98" remap="cmd">Click <guilabel id="uictrld71e100" remap="uicontrol">Accounts</guilabel> in the Quick Links section.</phrase>
						
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld71e106" remap="uicontrol">Accounts</guilabel> page displays.</para>
                     </listitem>
					
                     <listitem id="lid71e111" remap="step">
                        <para remap="#PCDATA">
						
                           <phrase id="phrsd71e113" remap="cmd">Click the <guilabel id="uictrld71e115" remap="uicontrol">ID</guilabel> of the account you want to delete.</phrase>
						
                        </para>
                        <para remap="#PCDATA">The account, name, and Registration status are highlighted.</para>
                     </listitem>
					
                     <listitem id="lid71e123" remap="step">
                        <para remap="#PCDATA">
						
                           <phrase id="phrsd71e125" remap="cmd">Click <guilabel id="uictrld71e127" remap="uicontrol">Delete accounts</guilabel>.</phrase>
						
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld71e133" remap="uicontrol">Delete selected accounts</guilabel> popup displays.</para>
                     </listitem>
					
                     <listitem id="lid71e138" remap="step">
                        <para remap="#PCDATA">
						
                           <phrase id="phrsd71e140" remap="cmd">Verify that the displayed account is the one you want, and click <guilabel id="uictrld71e142" remap="uicontrol">OK</guilabel>.</phrase>
						
                        </para>
                     </listitem>
				
                  </orderedlist>
				
                  <para id="sctnd71e151" remap="result">The account no longer displays in the list on the <guilabel id="uictrld71e153" remap="uicontrol">Accounts</guilabel> page.</para>
			
               </section>
            </section>
         </section>
         <section remap="concept" id="group_tasks">
            <title id="ttld89e3" remap="title">Groups</title>
            <para id="parad89e6" remap="shortdesc"/>
 	
            <para id="parad89e10" remap="p">Groups are used to share resource access authorizations among a set of users within an
 	account. Users can belong to multiple groups.</para>
 	
 	
            <important id="importantd89e13" remap="note">
               <para remap="#PCDATA">A group in the context of access is not the same as a security group.</para>
            </important>
 	
            <para id="parad89e16" remap="p">This section details tasks that can be performed on groups.</para>
 
            <section remap="task" id="group_create">
               <sectioninfo id="prlgd72e8" remap="prolog">
                  <abstract>
                     <para id="shrtdscd72e6" remap="shortdesc"/>
                  </abstract>
			
                  <itermset>
                     <indexterm id="indxtrmd72e14" remap="indexterm">
                        <primary>
					group
				
				</primary>
                        <secondary id="indxtrmd72e16" remap="indexterm">create</secondary>
                     </indexterm>
                  </itermset>
		
               </sectioninfo>
               <title id="ttld72e3" remap="title">Create a Group</title>
               <para id="parad72e6" remap="shortdesc"/>
        
               <para id="sctnd72e25" remap="context">
            
        
               </para>
        
    
               <section remap="task" id="group_create_cli">
                  <title id="ttld72e31" remap="title">Using the CLI</title>
			
                  <para id="sctnd72e36" remap="context">To create a group using the CLI:
				
			</para>
			
                  <orderedlist id="old72e39" remap="steps">
				
                     <listitem id="lid72e41" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd72e43" remap="cmd">Enter the following command:</phrase>
					
                        </para>
                        <programlisting id="cdblkd72e48" remap="codeblock">euare-groupcreate -g &lt;group_name&gt;</programlisting>
                        <para remap="#PCDATA">Eucalyptus does not return anything.</para>
                     </listitem>
			
                  </orderedlist>
		
               </section>
               <section remap="task" id="group_create_db">
                  <title id="ttld72e61" remap="title">Using the Dashboard</title>
			
                  <para id="parad72e68" remap="p">To create a group using the Dashboard:</para>
			
                  <orderedlist id="old72e72" remap="steps">
				
                     <listitem id="lid72e74" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd72e76" remap="cmd">Click <guilabel id="uictrld72e78" remap="uicontrol">Accounts</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld72e84" remap="uicontrol">Accounts</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid72e89" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd72e91" remap="cmd">Click the <guilabel id="uictrld72e93" remap="uicontrol">ID</guilabel> of the account you want to add a group to.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The account, name, and Registration status are highlighted.</para>
                     </listitem>
				
                     <listitem id="lid72e101" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd72e103" remap="cmd">Click <guilabel id="uictrld72e105" remap="uicontrol">New groups</guilabel> in the <guilabel id="uictrld72e108" remap="uicontrol">Accounts</guilabel> page.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld72e114" remap="uicontrol">Create new groups</guilabel> popup displays.</para>
                     </listitem>
				
                     <listitem id="lid72e119" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd72e121" remap="cmd">Enter the group name in the <guilabel id="uictrld72e123" remap="uicontrol">Group name</guilabel> field.</phrase>
					
                        </para>
                        <tip id="warningd72e129" remap="note">
                           <para remap="#PCDATA">You can add more than one group at a time. Every group you add, however, will
							be in the same path.</para>
                        </tip>
                     </listitem>
				
                     <listitem id="lid72e134" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd72e136" remap="cmd">Enter the group path in the <guilabel id="uictrld72e138" remap="uicontrol">Group path</guilabel> field.</phrase>
				
                        </para>
                     </listitem>
				
                     <listitem id="lid72e143" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd72e145" remap="cmd">Click <guilabel id="uictrld72e147" remap="uicontrol">OK</guilabel>.</phrase>
				
                        </para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd72e153" remap="result">The group is associated with the account you chose. You can see the information if you
				select the account in the <guilabel id="uictrld72e155" remap="uicontrol">Accounts</guilabel> page and click the <guilabel id="uictrld72e158" remap="uicontrol">Member groups</guilabel> link,
				located in the <guilabel id="uictrld72e161" remap="uicontrol">Properties</guilabel> section of the screen.</para>
		
               </section>
            </section>
            <section remap="task" id="policy_add_group">
               <sectioninfo id="prlgd73e8" remap="prolog">
                  <abstract>
                     <para id="shrtdscd73e6" remap="shortdesc"/>
                  </abstract>
			
                  <itermset>
                     <indexterm id="indxtrmd73e14" remap="indexterm">
                        <primary>
					policy
					
				</primary>
                        <secondary id="indxtrmd73e16" remap="indexterm">group</secondary>
                        <tertiary id="indxtrmd73e18" remap="indexterm">add to</tertiary>
                     </indexterm>
                  </itermset>
		
               </sectioninfo>
               <title id="ttld73e3" remap="title">Add a Group Policy</title>
               <para id="parad73e6" remap="shortdesc"/>
        
               <para id="parad73e29" remap="p">
                  <remark id="spd73e30" remap="draft-comment">Cf. with IAM doc.</remark>
               </para>
 
    
               <section remap="task" id="policy_add_cli">
                  <title id="ttld73e37" remap="title">Using the CLI</title>
                  <para id="parad73e40" remap="shortdesc"/>
			
                  <para id="parad73e46" remap="p">To add a policy to a group using the CLI:</para>
			
                  <orderedlist id="old73e50" remap="steps">
				
                     <listitem id="lid73e52" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd73e54" remap="cmd">Enter the following command:</phrase>
					
                        </para>
                        <programlisting id="cdblkd73e59" remap="codeblock">euare-groupaddpolicy -g &lt;group_name&gt; -p &lt;policy_name&gt; -e &lt;effect&gt; -a
							&lt;actions&gt; -o
						</programlisting>
                        <para id="parad73e65" remap="p">The optional <literal id="cdphd73e67" remap="codeph">-o</literal> parameter tells Eucalyptus to return the JSON policy, as
						in this example:</para>
                        <programlisting id="cdblkd73e71" remap="codeblock">{"Version":"2008-10-17","Statement":[{"Effect":"Allow", "Action":["ec2:RunInstances"], "Resource":["*"]}]}
</programlisting>
                     </listitem>
			
                  </orderedlist>
			
		
               </section>
               <section remap="task" id="policy_add_db">
                  <title id="ttld73e81" remap="title">Using the Dashboard</title>
                  <para id="parad73e84" remap="shortdesc"/>
			
                  <para id="parad73e90" remap="p">To add a policy to a group using the Dashboard:</para>
			
                  <orderedlist id="old73e94" remap="steps">
				
                     <listitem id="lid73e96" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd73e98" remap="cmd">Click <guilabel id="uictrld73e100" remap="uicontrol">Groups</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld73e106" remap="uicontrol">Groups</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid73e111" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd73e113" remap="cmd">Click the <guilabel id="uictrld73e115" remap="uicontrol">ID</guilabel> of the group you want to add a policy to.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The ID, Name, Path, and Owner account line is highlighted.</para>
                     </listitem>
				
                     <listitem id="lid73e123" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd73e125" remap="cmd">Click <guilabel id="uictrld73e127" remap="uicontrol">Add policy</guilabel>.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld73e133" remap="uicontrol">Add new policy</guilabel> popup displays.</para>
                     </listitem>
				
                     <listitem id="lid73e138" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd73e140" remap="cmd">Enter the policy name in the <guilabel id="uictrld73e142" remap="uicontrol">Policy name</guilabel> field.</phrase>
				
                        </para>
                     </listitem>
				
                     <listitem id="lid73e147" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd73e149" remap="cmd">Enter the policy content in the <guilabel id="uictrld73e151" remap="uicontrol">Policy content</guilabel> field.</phrase>
				
                        </para>
                     </listitem>
				
                     <listitem id="lid73e156" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd73e158" remap="cmd">Click <guilabel id="uictrld73e160" remap="uicontrol">OK</guilabel>.</phrase>
				
                        </para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd73e166" remap="result">The policy is now added to the group.</para>
		
               </section>
            </section>
            <section remap="task" id="group_rename">
               <sectioninfo id="prlgd74e8" remap="prolog">
                  <abstract>
                     <para id="shrtdscd74e6" remap="shortdesc"/>
                  </abstract>
			
                  <itermset>
                     <indexterm id="indxtrmd74e14" remap="indexterm">
                        <primary>
					group
					
				</primary>
                        <secondary id="indxtrmd74e16" remap="indexterm">modify</secondary>
                     </indexterm>
                  </itermset>
		
               </sectioninfo>
               <title id="ttld74e3" remap="title">Modify a Group</title>
               <para id="parad74e6" remap="shortdesc"/>
        
               <para id="parad74e27" remap="p">Modifying a group is similar to a "move" operation. Whoever wants to modify the group must
        		have permission to do it on both sides of the move. That is, you need permission to remove
        		the group from its current path or name, and put that group in the new path or name.</para>
               <para id="parad74e30" remap="p">For example, if a group changes from
        		one area in a company to another, you can change the group's path from
        		<filename id="flpthd74e32" remap="filepath">/area_abc/</filename> to <filename id="flpthd74e35" remap="filepath">/area_efg/</filename>. You need
        		permission to remove the group from <filename id="flpthd74e38" remap="filepath">/area_abc/</filename>. You also need
        		permission to put the group into <filename id="flpthd74e41" remap="filepath">/area_efg/</filename>. This means you need
        		permission to call <command id="cmdnmd74e44" remap="cmdname">UpdateGroup</command> on both <filename id="flpthd74e47" remap="filepath">arn:aws:iam::123456789012:group/area_abc/*</filename> and
        		<filename id="flpthd74e50" remap="filepath">arn:aws:iam::123456789012:group/area_efg/*</filename>. </para>
        
    
               <section remap="task" id="group_rename_cli">
                  <title id="ttld74e58" remap="title">Using the CLI</title>
                  <para id="parad74e61" remap="shortdesc"/>
			
                  <para id="parad74e67" remap="p">To modify a group using the CLI:</para>
			
                  <orderedlist id="old74e71" remap="steps">
				
                     <listitem id="lid74e73" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd74e75" remap="cmd">Enter the following command to modify the group's name:</phrase>
					
                        </para>
                        <programlisting id="cdblkd74e80" remap="codeblock">euare-groupmod -g &lt;group_name&gt; --new-group-name &lt;new_name&gt;</programlisting>
                        <para remap="#PCDATA">Eucalyptus does not return a message.</para>
                     </listitem>
				
                     <listitem id="lid74e88" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd74e90" remap="cmd">Enter the following command to modify a group's path:</phrase>
					
                        </para>
                        <programlisting id="cdblkd74e95" remap="codeblock">euare-groupmod -g &lt;group_name&gt; -p &lt;new_path&gt;</programlisting>
                        <para remap="#PCDATA">Eucalyptus does not return a message.</para>
                     </listitem>
			
                  </orderedlist>
		
               </section>
               <section remap="task" id="group_rename_db">
                  <title id="ttld74e108" remap="title">Using the Dashboard</title>
                  <para id="parad74e111" remap="shortdesc"/>
			
                  <para id="parad74e117" remap="p">To modify a group using the Dashboard:</para>
			
                  <orderedlist id="old74e121" remap="steps">
				
                     <listitem id="lid74e123" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd74e125" remap="cmd">Click <guilabel id="uictrld74e127" remap="uicontrol">Groups</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld74e133" remap="uicontrol">Groups</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid74e138" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd74e140" remap="cmd">Click the <guilabel id="uictrld74e142" remap="uicontrol">ID</guilabel> of the group you want to rename.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The group's <guilabel id="uictrld74e148" remap="uicontrol">Properties</guilabel> area displays.</para>
                     </listitem>
				
                     <listitem id="lid74e153" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd74e155" remap="cmd">In the <guilabel id="uictrld74e157" remap="uicontrol">Name</guilabel> field, enter the new name of the group.</phrase>
				
                        </para>
                     </listitem>
				
                     <listitem id="lid74e162" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd74e164" remap="cmd">In the <guilabel id="uictrld74e166" remap="uicontrol">Path</guilabel> field, enter the new path for the group.</phrase>
				
                        </para>
                     </listitem>
				
                     <listitem id="lid74e171" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd74e173" remap="cmd">Click <guilabel id="uictrld74e175" remap="uicontrol">Save</guilabel>.</phrase>
				
                        </para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd74e181" remap="result">The new group name displays in the <guilabel id="uictrld74e183" remap="uicontrol">Groups</guilabel> page.</para>
		
               </section>
            </section>
            <section remap="task" id="group_rem_user">
               <sectioninfo id="prlgd76e8" remap="prolog">
                  <abstract>
                     <para id="shrtdscd76e6" remap="shortdesc"/>
                  </abstract>
			
                  <itermset>
                     <indexterm id="indxtrmd76e14" remap="indexterm">
                        <primary>
					group
					
				</primary>
                        <secondary id="indxtrmd76e16" remap="indexterm">remove user</secondary>
                     </indexterm>
                  </itermset>
		
               </sectioninfo>
               <title id="ttld76e3" remap="title">Remove a User from a Group</title>
               <para id="parad76e6" remap="shortdesc"/>
        
               <para id="sctnd76e25" remap="context">
            
        
               </para>
        
    
               <section remap="task" id="group_rem_user_cli">
                  <title id="ttld76e31" remap="title">Using the CLI</title>
                  <para id="parad76e34" remap="shortdesc"/>
			
                  <para id="parad76e40" remap="p">To remove a user from a group using the CLI:</para>
			
                  <orderedlist id="old76e44" remap="steps">
				
                     <listitem id="lid76e46" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd76e48" remap="cmd">Enter the following command:</phrase>
					
                        </para>
                        <programlisting id="cdblkd76e53" remap="codeblock">euare-groupremoveuser -g &lt;group_name&gt; -u &lt;user-name&gt; </programlisting>
                     </listitem>
			
                  </orderedlist>
		
               </section>
               <section remap="task" id="group_rem_user_db">
                  <title id="ttld76e63" remap="title">Using the Dashboard</title>
                  <para id="parad76e66" remap="shortdesc"/>
			
                  <para id="parad76e72" remap="p">To remove a user from a group using the Dashboard:</para>
			
                  <orderedlist id="old76e76" remap="steps">
				
                     <listitem id="lid76e78" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd76e80" remap="cmd">Click <guilabel id="uictrld76e82" remap="uicontrol">Groups</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld76e88" remap="uicontrol">Groups</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid76e93" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd76e95" remap="cmd">Click the <guilabel id="uictrld76e97" remap="uicontrol">ID</guilabel> of the group you want to remove the user from.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The ID, Name, Path, and Owner account line is highlighted.</para>
                     </listitem>
				
                     <listitem id="lid76e105" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd76e107" remap="cmd">Click <guilabel id="uictrld76e109" remap="uicontrol">Remove users</guilabel>.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld76e115" remap="uicontrol">Remove users to selected groups</guilabel> popup displays.
						<mediaobject id="imgd76e118" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/group_remove_user.png"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Image of the Remove users to selected groups popup window</phrase>
                              </textobject>
                           </mediaobject>
                        </para>
                     </listitem>
				
                     <listitem id="lid76e121" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd76e123" remap="cmd">Enter the name of the user you want to remove and click <guilabel id="uictrld76e125" remap="uicontrol">OK</guilabel>.</phrase>
				
                        </para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd76e131" remap="result">The user is now removed from the group.</para>
		
               </section>
            </section>
            <section remap="task" id="group_list">
               <sectioninfo id="prlgd77e8" remap="prolog">
                  <abstract>
                     <para id="shrtdscd77e6" remap="shortdesc"/>
                  </abstract>
			
                  <itermset>
                     <indexterm id="indxtrmd77e14" remap="indexterm">
                        <primary>
					group
					
				</primary>
                        <secondary id="indxtrmd77e16" remap="indexterm">list</secondary>
                     </indexterm>
                  </itermset>
		
               </sectioninfo>
               <title id="ttld77e3" remap="title">List Groups</title>
               <para id="parad77e6" remap="shortdesc"/>
        
    
               <section remap="task" id="group_list_cli">
                  <title id="ttld77e28" remap="title">Using the CLI</title>
                  <para id="parad77e31" remap="shortdesc"/>
			
                  <para id="parad77e37" remap="p">To list all the groups a specific user is in:</para>
			
                  <orderedlist id="old77e41" remap="steps">
				
                     <listitem id="lid77e43" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd77e45" remap="cmd">Enter the following command:</phrase>
					
                        </para>
                        <programlisting id="cdblkd77e50" remap="codeblock">euare-grouplistbypath</programlisting>
                        <para remap="#PCDATA">Eucalyptus returns a list of paths followed by the ARNs for the groups in each path. For example:
					</para>
                        <programlisting id="cdblkd77e56" remap="codeblock">arn:aws:iam::eucalyptus:group/groupa</programlisting>
                     </listitem>
			
                  </orderedlist>
		
               </section>
               <section remap="task" id="group_list_db">
                  <title id="ttld77e66" remap="title">Using the Dashboard</title>
                  <para id="parad77e69" remap="shortdesc"/>
			
                  <para id="parad77e75" remap="p">To list groups using the Dashboard:</para>
			
                  <orderedlist id="old77e79" remap="steps">
				
                     <listitem id="lid77e81" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd77e83" remap="cmd">Click <guilabel id="uictrld77e85" remap="uicontrol">Groups</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld77e91" remap="uicontrol">Groups</guilabel> page displays.</para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd77e97" remap="result">The <guilabel id="uictrld77e99" remap="uicontrol">Groups</guilabel> page displays all groups in your cloud.</para>
		
               </section>
            </section>
            <section remap="task" id="group_list_pols">
               <title id="ttld78e3" remap="title">List Policies for a Group</title>
               <para id="parad78e6" remap="shortdesc"/>
        
               <para id="sctnd78e10" remap="context">
            
        
               </para>
        
    
               <section remap="task" id="group_list_pols_cli">
                  <title id="ttld78e16" remap="title">Using the CLI</title>
                  <para id="parad78e19" remap="shortdesc"/>
			
                  <para id="parad78e25" remap="p">To list policies associated with a group using the CLI:</para>
			
                  <orderedlist id="old78e29" remap="steps">
				
                     <listitem id="lid78e31" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd78e33" remap="cmd">Enter the following command:</phrase>
					
                        </para>
                        <programlisting id="cdblkd78e38" remap="codeblock">euare-grouplistpolicies -g &lt;group_name&gt;</programlisting>
                        <para id="parad78e44" remap="p">Eucalyptus returns a listing of all policies associated with the group.</para>
                     </listitem>
			
                  </orderedlist>
			
		
               </section>
               <section remap="task" id="group_list_pols_db">
                  <title id="ttld78e54" remap="title">Using the Dashboard</title>
                  <para id="parad78e57" remap="shortdesc"/>
			
                  <para id="parad78e63" remap="p">To list the policies associated with a group using the Dashboard:</para>
			
                  <orderedlist id="old78e67" remap="steps">
				
                     <listitem id="lid78e69" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd78e71" remap="cmd">Click <guilabel id="uictrld78e73" remap="uicontrol">Groups</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld78e79" remap="uicontrol">Groups</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid78e84" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd78e86" remap="cmd">Click the <guilabel id="uictrld78e88" remap="uicontrol">ID</guilabel> of the group you want to list policies for.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld78e94" remap="uicontrol">Properties</guilabel> section displays.</para>
                     </listitem>
				
                     <listitem id="lid78e99" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd78e101" remap="cmd">In the <guilabel id="uictrld78e103" remap="uicontrol">Properties</guilabel> section, click <guilabel id="uictrld78e106" remap="uicontrol">Policies</guilabel>.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld78e112" remap="uicontrol">Access Policies</guilabel> page displays.</para>
                     </listitem>
			
                  </orderedlist>
			
		
               </section>
            </section>
            <section remap="task" id="group_delete">
               <sectioninfo id="prlgd79e8" remap="prolog">
                  <abstract>
                     <para id="shrtdscd79e6" remap="shortdesc"/>
                  </abstract>
			
                  <itermset>
                     <indexterm id="indxtrmd79e14" remap="indexterm">
                        <primary>
					group
					
				</primary>
                        <secondary id="indxtrmd79e16" remap="indexterm">delete</secondary>
                     </indexterm>
                  </itermset>
		
               </sectioninfo>
               <title id="ttld79e3" remap="title">Delete a Group</title>
               <para id="parad79e6" remap="shortdesc"/>
        
               <para id="sctnd79e25" remap="context">
            
        
               </para>
        
    
               <section remap="task" id="group_delete_cli">
                  <title id="ttld79e31" remap="title">Using the CLI</title>
                  <para id="parad79e34" remap="shortdesc"/>
			
                  <para id="parad79e40" remap="p">When you delete a group, you have to remove users from the group and delete any policies from
					the group. You can do this with one command, using the <command id="cmdnmd79e42" remap="cmdname">euare-groupdel</command> command
					with the <literal id="cdphd79e45" remap="codeph">-r</literal> option. Or you can follow the following steps to specify who and what you
				want to delete.</para>
			
                  <orderedlist id="old79e50" remap="steps">
				
                     <listitem id="lid79e52" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd79e54" remap="cmd">Individually remove all users from the group.</phrase>
					
                        </para>
                        <programlisting id="cdblkd79e59" remap="codeblock">euare-groupremoveuser -g &lt;group_name&gt; -u &lt;user_name&gt;</programlisting>
                     </listitem>
				
                     <listitem id="lid79e64" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd79e66" remap="cmd">Delete the policies attached to the group.</phrase>
					
                        </para>
                        <programlisting id="cdblkd79e71" remap="codeblock">euare-groupdelpolicy -g &lt;group_name&gt; -p &lt;policy_name&gt;</programlisting>
                     </listitem>
				
                     <listitem id="lid79e76" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd79e78" remap="cmd">Delete the group.</phrase>
					
                        </para>
                        <programlisting id="cdblkd79e83" remap="codeblock">euare-groupdel -g &lt;group_name&gt;</programlisting>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd79e89" remap="result">The group is now deleted.</para>
			
		
               </section>
               <section remap="task" id="group_delete_db">
                  <title id="ttld79e98" remap="title">Using the Dashboard</title>
                  <para id="parad79e101" remap="shortdesc"/>
			
                  <para id="parad79e107" remap="p">To delete a group using the Dashboard:</para>
			
                  <orderedlist id="old79e111" remap="steps">
				
                     <listitem id="lid79e113" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd79e115" remap="cmd">Click <guilabel id="uictrld79e117" remap="uicontrol">Groups</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld79e123" remap="uicontrol">Groups</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid79e128" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd79e130" remap="cmd">Click the <guilabel id="uictrld79e132" remap="uicontrol">ID</guilabel> of the group you want to delete.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The ID, Name, Path, and Owner account line is highlighted.</para>
                     </listitem>
				
                     <listitem id="lid79e140" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd79e142" remap="cmd">Click <guilabel id="uictrld79e144" remap="uicontrol">Delete groups</guilabel>.</phrase>
					
                        </para>
                        <para id="parad79e149" remap="p">The <guilabel id="uictrld79e151" remap="uicontrol">Delete selected groups</guilabel> popup displays.</para>
                        <para remap="#PCDATA">
					
                           <mediaobject id="imgd79e155" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/group_delete.png"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Image of the Delete selected groups popup window</phrase>
                              </textobject>
                           </mediaobject>
                        </para>
                     </listitem>
				
                     <listitem id="lid79e158" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd79e160" remap="cmd">Click <guilabel id="uictrld79e162" remap="uicontrol">OK</guilabel>.</phrase>
				
                        </para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd79e168" remap="result">The group is now deleted.</para>
		
               </section>
            </section>
         </section>
         <section remap="concept" id="conceptId">
            <title id="ttld90e3" remap="title">Users</title>
            <para id="parad90e6" remap="shortdesc"/>
 	
            <para id="parad90e10" remap="p">Users are subsets of accounts and are added to accounts by an appropriately credentialed
 		administrator. While the term <emphasis role="bold" id="bd90e12" remap="b">user</emphasis> typically refers to a specific person, in Eucalyptus, a <emphasis role="bold" id="bd90e15" remap="b">user</emphasis> is defined by a specific set of credentials generated to enable access to a given account. Each set of user credentials is valid for accessing only the account for which they were created. Thus a user only has access to one account within a Eucalyptus system. If an individual person wishes to have access to more than one account within a Eucalyptus system, a separate set of credentials must be generated (in effect a new ‘user’) for each account (though the same username and password can be used for different accounts).</para>
 	
            <para id="parad90e19" remap="p">When you need to add a new user to your Eucalyptus cloud, you'll go through the
 		following process:</para>
 	
            <informaltable id="tbld90e22" remap="table">
               <tgroup cols="2">
 			
 			
                  <tbody>
 				
                     <row>
 					
                        <entry>1</entry>
 					
                        <entry>
                           <xref linkend="user_add" id="xrefd90e34" remap="xref"/>
                        </entry>
 				
                     </row>
 				
 				
                     <row>
 					
                        <entry>2</entry>
 					
                        <entry>
                           <xref linkend="group_add_user" id="xrefd90e44" remap="xref"/>
                        </entry>
 				
                     </row>
 				
                     <row>
 					
                        <entry>3</entry>
 					
                        <entry>
                           <xref linkend="user_loginprof" id="xrefd90e54" remap="xref"/>
                        </entry>
 				
                     </row>
 			
                  </tbody>
 		
               </tgroup>
            </informaltable>
 
            <section remap="task" id="user_add">
               <title id="ttld80e3" remap="title">Add a User</title>
               <para id="parad80e6" remap="shortdesc"/>
        
               <para id="sctnd80e10" remap="context">
        	
        
               </para>
        
    
               <section remap="task" id="user_add_cli">
                  <title id="ttld80e16" remap="title">Using the CLI</title>
                  <para id="parad80e19" remap="shortdesc"/>
			
                  <para id="parad80e25" remap="p">To add a user using the CLI:</para>
			
                  <orderedlist id="old80e29" remap="steps">
				
                     <listitem id="lid80e31" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd80e33" remap="cmd">Enter the following command</phrase>
					
                        </para>
                        <programlisting id="cdblkd80e38" remap="codeblock">euare-usercreate -u &lt;user_name&gt; -g &lt;group_name&gt; -k</programlisting>
                        <para remap="#PCDATA">Eucalyptus does not return a response.
					
						</para>
                        <tip id="warningd80e44" remap="note">
                           <para remap="#PCDATA">If you include the <literal id="cdphd80e46" remap="codeph">-v</literal> parameter, Eucalyptus returns a
							response that includes the user's
							ARN and GUID.</para>
                        </tip>
                     </listitem>
			
                  </orderedlist>
		
               </section>
               <section remap="task" id="user_add_db">
                  <title id="ttld80e56" remap="title">Using the Dashboard</title>
                  <para id="parad80e59" remap="shortdesc"/>
			
                  <para id="parad80e65" remap="p">To add a user using the Dashboard:</para>
			
                  <orderedlist id="old80e69" remap="steps">
				
                     <listitem id="lid80e71" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd80e73" remap="cmd">Click <guilabel id="uictrld80e75" remap="uicontrol">Accounts</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld80e81" remap="uicontrol">Accounts</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid80e86" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd80e88" remap="cmd">Click the <guilabel id="uictrld80e90" remap="uicontrol">ID</guilabel> of the account you want to rename.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The account's <guilabel id="uictrld80e96" remap="uicontrol">Properties</guilabel> area displays.</para>
                     </listitem>
				
                     <listitem id="lid80e101" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd80e103" remap="cmd">Click <guilabel id="uictrld80e105" remap="uicontrol">New Users</guilabel>.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld80e111" remap="uicontrol">Create new users</guilabel> popup window displays.</para>
                     </listitem>
				
                     <listitem id="lid80e116" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd80e118" remap="cmd">Enter a name in the <guilabel id="uictrld80e120" remap="uicontrol">User names</guilabel> field.</phrase>
					
                        </para>
                        <tip id="warningd80e126" remap="note">
                           <para remap="#PCDATA">You can add more than one user at a time. Every user you add, however, will
							be in the same path.</para>
                        </tip>
                     </listitem>
				
                     <listitem id="lid80e131" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd80e133" remap="cmd">Enter a path in the <guilabel id="uictrld80e135" remap="uicontrol">User path</guilabel> field.</phrase>
				
                        </para>
                     </listitem>
				
                     <listitem id="lid80e140" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd80e142" remap="cmd">Click <guilabel id="uictrld80e144" remap="uicontrol">OK</guilabel>.</phrase>
				
                        </para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd80e150" remap="result">The user is added to the account.</para>
		
               </section>
            </section>
            <section remap="task" id="group_add_user">
               <sectioninfo id="prlgd75e8" remap="prolog">
                  <abstract>
                     <para id="shrtdscd75e6" remap="shortdesc"/>
                  </abstract>
			
                  <itermset>
                     <indexterm id="indxtrmd75e14" remap="indexterm">
                        <primary>
					group
					
				</primary>
                        <secondary id="indxtrmd75e16" remap="indexterm">add user</secondary>
                     </indexterm>
                  </itermset>
		
               </sectioninfo>
               <title id="ttld75e3" remap="title">Add a User to a Group</title>
               <para id="parad75e6" remap="shortdesc"/>
        
               <para id="parad75e27" remap="p">
                  <remark id="spd75e28" remap="draft-comment">Context for the current task</remark>
               </para>
        
    
               <section remap="task" id="group_add_user_cli">
                  <title id="ttld75e35" remap="title">Using the CLI</title>
                  <para id="parad75e38" remap="shortdesc"/>
			
                  <para id="parad75e44" remap="p">To add a user to a group using the CLI:</para>
			
                  <orderedlist id="old75e48" remap="steps">
				
                     <listitem id="lid75e50" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd75e52" remap="cmd">Enter the following command:</phrase>
					
                        </para>
                        <programlisting id="cdblkd75e57" remap="codeblock">euare-groupadduser -g &lt;group_name&gt; -u &lt;user-name&gt; </programlisting>
                     </listitem>
			
                  </orderedlist>
		
               </section>
               <section remap="task" id="group_add_user_db">
                  <title id="ttld75e67" remap="title">Using the Dashboard</title>
                  <para id="parad75e70" remap="shortdesc"/>
			
                  <para id="sctnd75e74" remap="context">
				
			
                  </para>
			
                  <orderedlist id="old75e77" remap="steps">
				
                     <listitem id="lid75e79" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd75e81" remap="cmd">Click <guilabel id="uictrld75e83" remap="uicontrol">Groups</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld75e89" remap="uicontrol">Groups</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid75e94" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd75e96" remap="cmd">Click the <guilabel id="uictrld75e98" remap="uicontrol">ID</guilabel> of the group you want to add the user to.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The ID, Name, Path, and Owner account line is highlighted.</para>
                     </listitem>
				
                     <listitem id="lid75e106" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd75e108" remap="cmd">Click <guilabel id="uictrld75e110" remap="uicontrol">Add users</guilabel>.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld75e116" remap="uicontrol">Add users to selected groups</guilabel> popup displays.
						<mediaobject id="imgd75e119" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/group_add_user.png"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Image of the Add users to selected groups popup window</phrase>
                              </textobject>
                           </mediaobject>
                        </para>
                     </listitem>
				
                     <listitem id="lid75e122" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd75e124" remap="cmd">Enter the name of the user you want to add and click <guilabel id="uictrld75e126" remap="uicontrol">OK</guilabel>.</phrase>
				
                        </para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd75e132" remap="result">The user is now added to the group.</para>
		
               </section>
            </section>
            <section remap="task" id="user_loginprof">
               <title id="ttld81e3" remap="title">Create a Login Profile</title>
               <para id="parad81e6" remap="shortdesc"/>
        
               <para id="parad81e12" remap="p">Once you create a user, you must generate a password for the user to use the
            	Dashboard.</para>
    
               <section remap="task" id="user_loginprof_cli">
                  <title id="ttld81e19" remap="title">Using the CLI</title>
                  <para id="parad81e22" remap="shortdesc"/>
			
                  <para id="parad81e28" remap="p">To create a login profile using the CLI:</para>
			
                  <orderedlist id="old81e32" remap="steps">
				
                     <listitem id="lid81e34" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd81e36" remap="cmd">Enter the following command:</phrase>
					
                        </para>
                        <programlisting id="cdblkd81e41" remap="codeblock">euare-useraddloginprofile -u &lt;user_name&gt; -p &lt;password&gt;</programlisting>
                        <para remap="#PCDATA">Eucalyptus does not return a response. </para>
                     </listitem>
			
                  </orderedlist>
		
               </section>
               <section remap="task" id="user_loginprof_db">
                  <title id="ttld81e54" remap="title">Using the Dashboard</title>
                  <para id="parad81e57" remap="shortdesc"/>
			
                  <para id="parad81e63" remap="p">To create a login profile using the Dashboard:</para>
			
                  <orderedlist id="old81e67" remap="steps">
				
                     <listitem id="lid81e69" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd81e71" remap="cmd">Click <guilabel id="uictrld81e73" remap="uicontrol">Users</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld81e79" remap="uicontrol">Users</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid81e84" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd81e86" remap="cmd">Click the <guilabel id="uictrld81e88" remap="uicontrol">ID</guilabel> of the user whose path you want to change.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The user's <guilabel id="uictrld81e94" remap="uicontrol">Properties</guilabel> area displays.</para>
                     </listitem>
				
                     <listitem id="lid81e99" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd81e101" remap="cmd">Click <guilabel id="uictrld81e103" remap="uicontrol">Password</guilabel>.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld81e109" remap="uicontrol">Change password</guilabel> popup window displays.</para>
                     </listitem>
				
                     <listitem id="lid81e114" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd81e116" remap="cmd">Enter the new password in the <guilabel id="uictrld81e118" remap="uicontrol">New user password</guilabel> field, and repeat in the <guilabel id="uictrld81e121" remap="uicontrol">New password again</guilabel>
					field.</phrase>
				
                        </para>
                     </listitem>
				
                     <listitem id="lid81e126" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd81e128" remap="cmd">Click <guilabel id="uictrld81e130" remap="uicontrol">OK</guilabel>.</phrase>
				
                        </para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd81e136" remap="result">The login profile is now complete. If you are generating the password for a different
				user, let the user know the password and the URL to the Dashboard.</para>
		
               </section>
            </section>
            <section remap="task" id="user_rename">
               <title id="ttld82e3" remap="title">Modify a User</title>
               <para id="parad82e6" remap="shortdesc"/>
        
               <para id="parad82e12" remap="p">Modifying a user is similar to a "move" operation. Whoever wants to modify a user must
        		have permission to do it on both sides of the move. That is, you need permission to remove
        		the user from the current path or name, and put that user in the new path or name.</para>
               <para id="parad82e15" remap="p">For example, if a user changes from
        		one team in a company to another, you can change the user's path from
        		<filename id="flpthd82e17" remap="filepath">/team_abc/</filename> to <filename id="flpthd82e20" remap="filepath">/team_efg/</filename>. You need
        		permission to remove the user from <filename id="flpthd82e23" remap="filepath">/team_abc/</filename>. You also need
        		permission to put the user into <filename id="flpthd82e26" remap="filepath">/team_efg/</filename>. This means you need
        		permission to call UpdateUser on both <filename id="flpthd82e29" remap="filepath">arn:aws:iam::123456789012:user/team_abc/*</filename> and
        		<filename id="flpthd82e32" remap="filepath">arn:aws:iam::123456789012:user/team_efg/*</filename>. </para>
        
    
               <section remap="task" id="user_rename_cli">
                  <title id="ttld82e40" remap="title">Using the CLI</title>
                  <para id="parad82e43" remap="shortdesc"/>
			
                  <para id="parad82e49" remap="p">To rename a user using the CLI:</para>
			
                  <orderedlist id="old82e53" remap="steps">
				
                     <listitem id="lid82e55" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd82e57" remap="cmd">Enter the following command to rename a user:</phrase>
					
                        </para>
                        <programlisting id="cdblkd82e62" remap="codeblock">euare-usermod -u &lt;user_name&gt; --new-user-name &lt;new_name&gt;</programlisting>
                        <para remap="#PCDATA">Eucalyptus does not return a message.</para>
                     </listitem>
				
                     <listitem id="lid82e70" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd82e72" remap="cmd">Enter the following command:</phrase>
					
                        </para>
                        <programlisting id="cdblkd82e77" remap="codeblock">euare-groupmod -u &lt;user_name&gt; -p &lt;new_path&gt;</programlisting>
                        <para remap="#PCDATA">Eucalyptus does not return a message.</para>
                     </listitem>
			
                  </orderedlist>
		
               </section>
               <section remap="task" id="user_rename_db">
                  <title id="ttld82e90" remap="title">Using the Dashboard</title>
                  <para id="parad82e93" remap="shortdesc"/>
			
                  <para id="parad82e99" remap="p">To rename a user using the Dashboard:</para>
			
                  <orderedlist id="old82e103" remap="steps">
				
                     <listitem id="lid82e105" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd82e107" remap="cmd">Click <guilabel id="uictrld82e109" remap="uicontrol">Users</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld82e115" remap="uicontrol">Users</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid82e120" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd82e122" remap="cmd">Click the <guilabel id="uictrld82e124" remap="uicontrol">ID</guilabel> of the user you want to rename.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The user's <guilabel id="uictrld82e130" remap="uicontrol">Properties</guilabel> area displays.</para>
                     </listitem>
				
                     <listitem id="lid82e135" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd82e137" remap="cmd">In the <guilabel id="uictrld82e139" remap="uicontrol">Name</guilabel> field, enter the new name of the user.</phrase>
				
                        </para>
                     </listitem>
				
                     <listitem id="lid82e144" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd82e146" remap="cmd">Click <guilabel id="uictrld82e148" remap="uicontrol">Save</guilabel>.</phrase>
				
                        </para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd82e154" remap="result">The new user name displays in the <guilabel id="uictrld82e156" remap="uicontrol">Users</guilabel> page.</para>
		
               </section>
            </section>
            <section remap="task" id="user_list">
               <title id="ttld83e3" remap="title">List Users</title>
               <para id="parad83e6" remap="shortdesc"/>
        
               <para id="parad83e12" remap="p">You can list users within a path.</para>
        
    
               <section remap="task" id="user_list_cli">
                  <title id="ttld83e19" remap="title">Using the CLI</title>
                  <para id="parad83e22" remap="shortdesc"/>
			
                  <para id="parad83e28" remap="p">Use the <command id="cmdnmd83e30" remap="cmdname">euare-userlistbypath</command> command to list all the users in an account
				or to list all the users with a particular path prefix. The output lists the ARN for each resulting user.</para>
                  <programlisting id="cdblkd83e34" remap="codeblock">euare-userlistbypath -p &lt;path&gt;</programlisting>
			
		
               </section>
               <section remap="task" id="user_list_db">
                  <title id="ttld83e42" remap="title">Using the Dashboard</title>
                  <para id="parad83e45" remap="shortdesc"/>
			
                  <para id="parad83e51" remap="p">To list users in the same path using the Dashboard:</para>
			
                  <orderedlist id="old83e55" remap="steps">
				
                     <listitem id="lid83e57" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd83e59" remap="cmd">Click <guilabel id="uictrld83e61" remap="uicontrol">Users</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld83e67" remap="uicontrol">Users</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid83e72" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd83e74" remap="cmd">Click the <guilabel id="uictrld83e76" remap="uicontrol">Path</guilabel> column to sort all users by path.</phrase>
				
                        </para>
                     </listitem>
			
                  </orderedlist>
		
               </section>
            </section>
            <section remap="task" id="user_delete">
               <title id="ttld21e3" remap="title">Delete a User</title>
               <para id="parad21e6" remap="shortdesc"/>
        
               <para id="sctnd21e10" remap="context">
            
        
               </para>
 
    
               <section remap="task" id="user_delete_cli">
                  <title id="ttld21e16" remap="title">Using the CLI</title>
                  <para id="parad21e19" remap="shortdesc"/>
			
                  <para id="parad21e25" remap="p">To delete a user using the CLI:</para>
			
                  <orderedlist id="old21e29" remap="steps">
				
                     <listitem id="lid21e31" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd21e33" remap="cmd">Enter the following command</phrase>
					
                        </para>
                        <programlisting id="cdblkd21e38" remap="codeblock">euare-userdel -u &lt;user_name&gt;</programlisting>
                        <para remap="#PCDATA">Eucalyptus does not return a response.</para>
                     </listitem>
			
                  </orderedlist>
		
               </section>
               <section remap="task" id="user_delete_db">
                  <title id="ttld21e51" remap="title">Using the Dashboard</title>
                  <para id="parad21e54" remap="shortdesc"/>
			
                  <para id="parad21e60" remap="p">To delete a user using the Dashboard:</para>
			
                  <orderedlist id="old21e64" remap="steps">
				
                     <listitem id="lid21e66" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd21e68" remap="cmd">Click <guilabel id="uictrld21e70" remap="uicontrol">Users</guilabel> in the Quick Links section.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld21e76" remap="uicontrol">Users</guilabel> page displays.</para>
                     </listitem>
				
                     <listitem id="lid21e81" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd21e83" remap="cmd">Click the <guilabel id="uictrld21e85" remap="uicontrol">ID</guilabel> of the user you want to delete.</phrase>
					
                        </para>
                        <para remap="#PCDATA">The user's information is highlighted.</para>
                     </listitem>
				
                     <listitem id="lid21e93" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd21e95" remap="cmd">Click <guilabel id="uictrld21e97" remap="uicontrol">Delete Users</guilabel>.</phrase>
					
					
                        </para>
                        <para id="parad21e102" remap="p">The <guilabel id="uictrld21e104" remap="uicontrol">Delete selected users</guilabel> popup window
						displays.</para>
                        <para remap="#PCDATA">
						
                           <mediaobject id="imgd21e108" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/user_del.jpg"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Delete selected users popup window</phrase>
                              </textobject>
                           </mediaobject>
					
                        </para>
                     </listitem>
				
				
                     <listitem id="lid21e112" remap="step">
                        <para remap="#PCDATA">
					
                           <phrase id="phrsd21e114" remap="cmd">Click <guilabel id="uictrld21e116" remap="uicontrol">OK</guilabel>.</phrase>
				
                        </para>
                     </listitem>
			
                  </orderedlist>
			
                  <para id="sctnd21e122" remap="result">The user is deleted.</para>
		
               </section>
            </section>
         </section>
         <section remap="concept" id="managing_certs">
            <title id="ttld91e3" remap="title">Credentials</title>
            <para id="parad91e6" remap="shortdesc"/>
    	
            <para id="parad91e10" remap="p">Eucalyptus uses different types of credentials for different
    		purposes. This section details tasks needed to allow access to
    		Eucalyptus services.</para>
        
        
    
            <section remap="task" id="creds_create">
               <title id="ttld84e3" remap="title">Create Credentials</title>
               <para id="parad84e6" remap="shortdesc"/>
        
               <para id="parad84e12" remap="p">You can generate new credentials a number of ways. The first time you get credentials
        		using either the Dashboard or the <command id="cmdnmd84e14" remap="cmdname">euca_conf</command> command, a
        		new secret access key is generated. On each subsequent request to get
        		credentials, an existing active secret Key is returned. You can also generate new keys
        		using the <command id="cmdnmd84e17" remap="cmdname">eucare-useraddkey</command> command. </para>
               <tip id="warningd84e21" remap="note">
                  <para remap="#PCDATA">Each request to get a user's credentials either via the download
        		link in the Dashboard or using euca_conf, a new pair of a private key
        		and X.509 certificate </para>
               </tip>
    	
               <itemizedlist id="uld84e25" remap="steps-unordered">
    		
                  <listitem id="lid84e27" remap="step">
                     <para remap="#PCDATA">
    			
                        <phrase id="phrsd84e29" remap="cmd">To generate a new key for a user by an account
    				administrator, enter the following</phrase>
    			
                     </para>
                     <programlisting id="cdblkd84e34" remap="codeblock">euare-useraddkey -u &lt;user_name&gt;</programlisting>
                  </listitem>
    		
                  <listitem id="lid84e39" remap="step">
                     <para remap="#PCDATA">
    			
                        <phrase id="phrsd84e41" remap="cmd">To generate a private key and an X.509 certificate pair, enter the following:</phrase>
    			
                     </para>
                     <programlisting id="cdblkd84e46" remap="codeblock">euare-usercreatecert -u &lt;user_name&gt;</programlisting>
                  </listitem>
    		
    	
               </itemizedlist>
    	
    
            </section>
            <section remap="task" id="cred_get">
               <title id="ttld85e3" remap="title">Get Credentials</title>
               <para id="parad85e6" remap="shortdesc"/>
 	
               <para id="parad85e12" remap="p">Eucalyptus provides two main ways of getting user credentials. In both cases, Eucalyptus
 			returns a zip file that contains keys, certificates, a bash
 			script, and several other required files. To use these credentials with
 			such CLI tools as euca2ools or ec2-tools, unzip your credentials zip
 			file to a directory of your choice.</para>
 	
               <itemizedlist id="uld85e16" remap="steps-unordered">
 		
                  <listitem id="lid85e18" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd85e20" remap="cmd">An administrator with a root access to the machine on which CLC is
 				installed can get credentials using euca_conf CLI tool on that
 				machine.</phrase>
 			
                     </para>
                     <programlisting id="cdblkd85e25" remap="codeblock">/usr/sbin/euca_conf --cred-account &lt;account&gt; --cred-user &lt;user_name&gt;
 --get-credentials &lt;filename&gt;.zip</programlisting>
                     <para id="parad85e28" remap="p">Where &lt;account&gt; and &lt;user_name&gt; are the names of the account and the
 				user whose credentials are retrieved. </para>
                     <tip id="warningd85e31" remap="note">
                        <para remap="#PCDATA">You can omit the <literal id="cdphd85e33" remap="codeph">--cred-account</literal> and
 					<literal id="cdphd85e36" remap="codeph">--cred-user</literal> options when you get credentials for the
 					<emphasis role="bold" id="bd85e39" remap="b">admin</emphasis> user of the <emphasis role="bold" id="bd85e42" remap="b">eucalyptus</emphasis> account.</para>
                     </tip>
                  </listitem>
 		
                  <listitem id="lid85e48" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd85e50" remap="cmd">A user can get his or her credentials by logging in into the
 				Dashboard and clicking <guilabel id="uictrld85e52" remap="uicontrol">Download new credentials</guilabel> in the
 				drop-down menu at the top of the screen. This will result in a
 				download of a zip file.</phrase>
 			
 		
                     </para>
                  </listitem>
 	
               </itemizedlist>
 	
               <informalexample id="xmpd85e58" remap="example">
 		
                  <para id="parad85e60" remap="p">In the following example we
 		download the credentials zip file to <filename id="flpthd85e62" remap="filepath">~/.euca</filename>, then change access
 		permissions, as shown:</para>
 		
                  <programlisting id="cdblkd85e66" remap="codeblock">mkdir ~/.euca
cd ~/.euca
unzip &lt;filepath&gt;/&lt;creds_zipfile&gt;.zip
chmod 0700 ~/.euca 
chmod 0600 *</programlisting>
 		
                  <important id="importantd85e69" remap="note">
                     <para remap="#PCDATA">The zip file with credentials contains
 			security-sensitive information. We recommend that you remove or read-
 			and write-protect the file from other users after unzipping.</para>
                  </important>
 		
                  <para id="parad85e72" remap="p">Alternatively, you can view and copy your access keys and X.509
 			certificates from the Dashboard after logging in, using the Navigation menu.</para>
 	
               </informalexample>
 
            </section>
            <section remap="task" id="setting_up_admin_creds">
               <title id="ttld86e3" remap="title">Generate Administrator Credentials</title>
               <para id="parad86e6" remap="shortdesc"/>
		
               <para id="parad86e12" remap="p">
                  <important id="importantd86e13" remap="note">
                     <para remap="#PCDATA">When you run the following command, you are requesting a new X.509 and
				a corresponding private key. You cannot retrieve
				an existing private key.</para>
                  </important>
               </para>
               <para id="parad86e16" remap="p">To generate a set of credentials:</para>
		
               <orderedlist id="old86e20" remap="steps">
			
                  <listitem id="lid86e22" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd86e24" remap="cmd">Log in to the CLC.</phrase>
			
                     </para>
                  </listitem>
			
                  <listitem id="lid86e28" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd86e30" remap="cmd">Get administrator credentials and source eucarc:</phrase>
				
                     </para>
                     <programlisting id="cdblkd86e35" remap="codeblock">/usr/sbin/euca_conf --get-credentials admin.zip
unzip admin.zip
chmod 0600 *
source eucarc</programlisting>
                  </listitem>
		
               </orderedlist>
	
            </section>
            <section remap="task" id="certs_upload">
               <title id="ttld87e3" remap="title">Upload a Certificate</title>
               <para id="parad87e6" remap="shortdesc"/>
        
               <para id="parad87e12" remap="p">To upload a certificate provided by a user:</para>
        
               <orderedlist id="old87e16" remap="steps">
        	
                  <listitem id="lid87e18" remap="step">
                     <para remap="#PCDATA">
        		
                        <phrase id="phrsd87e20" remap="cmd">Enter the following command:</phrase>
        		
                     </para>
                     <programlisting id="cdblkd87e25" remap="codeblock">euare-useraddcert -u &lt;user_name&gt; -f &lt;cert_file&gt;</programlisting>
                  </listitem>
        
               </orderedlist>
    
            </section>
         </section>
         <section remap="concept" id="syncing_ldap">
            <title id="ttld92e3" remap="title">Synchronize LDAP/AD</title>
            <para id="parad92e6" remap="shortdesc"/>
        
        	
            <para id="parad92e10" remap="p">To start an LDAP/AD synchronization:</para>
        
        
            <orderedlist id="old92e13" remap="ol">
            
               <listitem id="lid92e15" remap="li">
                  <para remap="#PCDATA">Create an LDAP/AD Integration Configuration (LIC) file to specify all the details about the LDAP/AD synchronization.
            </para>
               </listitem>
        	
               <listitem id="lid92e18" remap="li">
                  <para remap="#PCDATA">Upload the LIC file to Eucalyptus using <literal id="cdphd92e20" remap="codeph">euca-modify-property</literal>.
        	</para>
               </listitem>
        
            </orderedlist>
    
            <section remap="task" id="lic_starting">
               <title id="ttld93e3" remap="title">Start a LIC File</title>
               <para id="parad93e6" remap="shortdesc"/>
		
               <para id="parad93e12" remap="p">The LIC is a file in JSON format, specifying everything Eucalyptus needs to know about how to synchronize with an LDAP or AD service. Eucalyptus provides a LIC template at <filename id="flpthd93e14" remap="filepath">${EUCALYPTUS}/usr/share/eucalyptus/lic_template</filename>. This template shows all the fields of the LIC, and provides detailed documentation and example values for each field. </para>
               <para id="parad93e18" remap="p">To start a LIC file:</para>
		
               <orderedlist id="old93e22" remap="steps">
			
                  <listitem id="lid93e24" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd93e26" remap="cmd">Enter the following command:</phrase>
				
                     </para>
                     <programlisting id="cdblkd93e31" remap="codeblock">/usr/sbin/euca-lictool --password secret --out example.lic</programlisting>
                     <para remap="#PCDATA">The above command invokes the LIC tool to create a template LIC and fill in the encrypted password for authenticating to LDAP/AD service (i.e. the password of the administrative user for accessing the LDAP/AD during synchronization). The LIC tool’s primary functions are to encrypt the LDAP/AD password and to generate the starting LIC template. The usage of the LIC tool shows different ways to invoke the command.</para>
                  </listitem>
		
               </orderedlist>
		
               <para id="sctnd93e40" remap="postreq">Once you have the LIC template, you can fill in the details by editing the
			<filename id="flpthd93e42" remap="filepath">*.lic</filename> file using a text editor. Each top level entity specifies one aspect of the LDAP/AD synchronization.</para>
	
            </section>
            <section remap="task" id="lic_uploading">
               <title id="ttld94e3" remap="title">Upload a New LIC File</title>
               <para id="parad94e6" remap="shortdesc"/>
        
               <para id="parad94e12" remap="p">To upload a new LIC file:</para>
        
               <orderedlist id="old94e16" remap="steps">
            
                  <listitem id="lid94e18" remap="step">
                     <para remap="#PCDATA">
            	
                        <phrase id="phrsd94e20" remap="cmd">Enter the following:
            	</phrase>
            	
                     </para>
                     <programlisting id="cdblkd94e25" remap="codeblock">/usr/sbin/euca-modify-property -f
            			authentication.ldap_integration_configuration=&lt;lic_filename.lic&gt;</programlisting>
                     <para remap="#PCDATA">This triggers a new synchronization using the uploaded LIC file.</para>
                  </listitem>
        
               </orderedlist>
    
            </section>
         </section>
      </section>
   </section>
   <section remap="concept" id="managing_resources">
      <title id="ttld10e3" remap="title">Managing Images</title>
		
      <para id="parad10e10" remap="p">A Eucalyptus Machine Image (EMI) is a special type of pre-packaged operating system and
			application software that Eucalyptus uses to create a virtual machine instance. An EMI contains
			all necessary information to boot instances of your software. An EMI can contain whatever software you want to meet your needs. For example, you can create an EMI to act as an application server, or a web server, or a custom web service. The following sections contain information to help you create, configure, and modify EMIs.</para>
	
		
      <important id="importantd10e13" remap="note">
         <para remap="#PCDATA">All users can upload and register images, depending on their access. However, only the admin user can upload and register kernels or ramdisks.</para>
      </important>
		
      <para id="parad10e16" remap="p"/>
		
		
      <informaltable id="tbld10e20" remap="table">
         <tgroup cols="4">
				
            <thead>
					
               <row>
						
                  <entry>Distro</entry>
						
                  <entry>Version</entry>
						
                  <entry>Arch</entry>
						
                  <entry>Hypervisor</entry>
					
               </row>
				
            </thead>
				
            <tbody>
					
               <row>
						
                  <entry>CentOS</entry>
						
                  <entry>5</entry>
						
                  <entry>32</entry>
						
                  <entry>Xen</entry>
					
               </row>
					
               <row>
						
                  <entry>CentOS</entry>
						
                  <entry>5</entry>
						
                  <entry>32</entry>
						
                  <entry>esx-4.0</entry>
					
               </row>
					
               <row>
						
                  <entry>CentOS</entry>
						
                  <entry>5</entry>
						
                  <entry>32</entry>
						
                  <entry>esx-4.1</entry>
					
               </row>
					
               <row>
						
                  <entry>CentOS</entry>
						
                  <entry>5</entry>
						
                  <entry>32</entry>
						
                  <entry>esxi-4.0</entry>
					
               </row>
					
               <row>
						
                  <entry>CentOS</entry>
						
                  <entry>5</entry>
						
                  <entry>32</entry>
						
                  <entry>esxi-4.1</entry>
					
               </row>
					
               <row>
						
                  <entry>CentOS</entry>
						
                  <entry>5</entry>
						
                  <entry>64</entry>
						
                  <entry>Xen</entry>
					
               </row>
					
               <row>
						
                  <entry>CentOS</entry>
						
                  <entry>5</entry>
						
                  <entry>64</entry>
						
                  <entry>esx-4.0</entry>
					
               </row>
					
               <row>
						
                  <entry>CentOS</entry>
						
                  <entry>5</entry>
						
                  <entry>64</entry>
						
                  <entry>esx-4.1</entry>
					
               </row>
					
               <row>
						
                  <entry>CentOS</entry>
						
                  <entry>5</entry>
						
                  <entry>64</entry>
						
                  <entry>esxi-4.0</entry>
					
               </row>
					
               <row>
						
                  <entry>CentOS</entry>
						
                  <entry>5</entry>
						
                  <entry>64</entry>
						
                  <entry>esxi-4.1</entry>
					
               </row>
					
               <row>
						
                  <entry>RHEL</entry>
						
                  <entry>5</entry>
						
                  <entry>32</entry>
						
                  <entry>Xen</entry>
					
               </row>
					
               <row>
						
                  <entry>RHEL</entry>
						
                  <entry>5</entry>
						
                  <entry>64</entry>
						
                  <entry>Xen</entry>
					
               </row>
					
               <row>
						
                  <entry>RHEL</entry>
						
                  <entry>5</entry>
						
                  <entry>64</entry>
						
                  <entry>esx-4.0</entry>
					
               </row>
					
               <row>
						
                  <entry>RHEL</entry>
						
                  <entry>5</entry>
						
                  <entry>64</entry>
						
                  <entry>esx-4.1</entry>
					
               </row>
					
               <row>
						
                  <entry>RHEL</entry>
						
                  <entry>5</entry>
						
                  <entry>64</entry>
						
                  <entry>esxi-4.0</entry>
					
               </row>
					
               <row>
						
                  <entry>RHEL</entry>
						
                  <entry>5</entry>
						
                  <entry>64</entry>
						
                  <entry>esxi-4.1</entry>
					
               </row>
					
               <row>
						
                  <entry>RHEL</entry>
						
                  <entry>6</entry>
						
                  <entry>64</entry>
						
                  <entry>KVM</entry>
					
               </row>
					
               <row>
						
                  <entry>RHEL</entry>
						
                  <entry>6</entry>
						
                  <entry>64</entry>
						
                  <entry>esx-4.0</entry>
					
               </row>
					
               <row>
						
                  <entry>RHEL</entry>
						
                  <entry>6</entry>
						
                  <entry>64</entry>
						
                  <entry>esx-4.1</entry>
					
               </row>
					
               <row>
						
                  <entry>RHEL</entry>
						
                  <entry>6</entry>
						
                  <entry>64</entry>
						
                  <entry>esxi-4.0</entry>
					
               </row>
					
               <row>
						
                  <entry>RHEL</entry>
						
                  <entry>6</entry>
						
                  <entry>64</entry>
						
                  <entry>esxi-4.1</entry>
					
               </row>
					
               <row>
						
                  <entry>Ubuntu</entry>
						
                  <entry>Lucid</entry>
						
                  <entry>32</entry>
						
                  <entry>KVM</entry>
					
               </row>
					
               <row>
						
                  <entry>Ubuntu</entry>
						
                  <entry>Lucid</entry>
						
                  <entry>64</entry>
						
                  <entry>KVM</entry>
					
               </row>
					
               <row>
						
                  <entry>Ubuntu</entry>
						
                  <entry>Lucid</entry>
						
                  <entry>64</entry>
						
                  <entry>esx-4.0</entry>
					
               </row>
					
               <row>
						
                  <entry>Ubuntu</entry>
						
                  <entry>Lucid</entry>
						
                  <entry>64</entry>
						
                  <entry>esx-4.1</entry>
					
               </row>
					
               <row>
						
                  <entry>Ubuntu</entry>
						
                  <entry>Lucid</entry>
						
                  <entry>64</entry>
						
                  <entry>esxi-4.0</entry>
					
               </row>
					
               <row>
						
                  <entry>Ubuntu</entry>
						
                  <entry>Lucid</entry>
						
                  <entry>64</entry>
						
                  <entry>esxi-4.1</entry>
					
               </row>
				
            </tbody>
			
         </tgroup>
      </informaltable>
	
      <section remap="concept" id="understanding_images">
         <title id="ttld95e3" remap="title">Image Overview</title>
         <para id="parad95e6" remap="shortdesc"/>
 	
         <para id="parad95e10" remap="p">An image defines what will run on a guest instance with your Eucalyptus cloud. Typically, an
 	image contains one of the Linux distributions like CentOS, Fedora, Ubuntu, Debian or others. It could also contain one of the supported Windows server versions. The format for these is identical.</para>
 	
 	
         <para id="parad95e13" remap="p">Normally when we use the term "image" we mean the root file system. Once bundled, uploaded, and
 	registered with Eucalyptus, such an image is known as a Eucalyptus machine image (EMI).</para>
 	
 	
         <para id="parad95e16" remap="p">There are, however, other types of images that support the EMI. They are the kernel (EKI) and
 		ramdisk (ERI). They contain kernel modules necessary for
 		proper functioning of the image. Often, one set of these ERIs and EKIs are used by multiple
 		EMIs. Once loaded into the Eucalyptus cloud, the EKI and ERI are referred to by the image
 		and you don't have much interaction with them directly. </para>
 	
         <tip id="warningd95e19" remap="note">
            <para remap="#PCDATA">When you run an image, you can override the image's associated kernel and ramdisk
 		if necessary (for example, if you want to try out another kernel. For more information, see <xref linkend="associating_ekieri" id="xrefd95e21" remap="xref"/>.</para>
         </tip>
 	
 	
 	
         <para id="parad95e24" remap="p">To help get you started, Eucalyptus provides pre-packaged virtual machines that are ready to
 		run in your cloud. You can get them at the <ulink url="http://http://emis.eucalyptus.com/" type="" id="linkd95e26" remap="xref">Eucalyptus Machine Images</ulink> page. Each Eucalyptus image from
 		this site comes bundled with a correspoding EKI and ERI. </para>
 	
 	
         <para id="parad95e32" remap="p">If you find that the pre-packaged images don't meet your needs, you can add an image from an
 	existing, non-registered image, or create your own image.</para>
 	
 	
         <para id="parad95e35" remap="p">Once you've selected and downloaded the image(s) you plan to use, read the details in the
 	following section for directions about how to bundle, upload and register the images with your Eucalyptus cloud.</para>
 	
         <para id="parad95e38" remap="p">To view the status of your newly created and registered EKI, ERI, and EMI images, use the
 		<command id="cmdnmd95e40" remap="cmdname">euca-describe-images</command> command. You can also view image status using the
 		Dashboard's <guilabel id="uictrld95e43" remap="uicontrol">Images</guilabel> page.</para>
 	
 	
         <para id="parad95e47" remap="p">Once you have added your image to Eucalyptus, see <xref linkend="using_instances" id="xrefd95e49" remap="xref"/> section
 		for information about launching and using instances based on the image. </para>
 	
 
      </section>
      <section remap="concept" id="working_images">
         <title id="ttld98e3" remap="title">Image Tasks</title>
         <para id="parad98e6" remap="shortdesc"/>
  
         <para id="parad98e10" remap="p">This section explains the tasks that you can perform on images in Eucalyptus.</para>
 	
 	
         <para id="parad98e13" remap="p">You can perform the following image-related tasks listed in the following sections:</para>
 	
         <itemizedlist id="uld98e16" remap="ul">
 		
 			
            <listitem id="lid98e18" remap="li"/>
 			
            <listitem id="lid98e21" remap="li"/>
 			
            <listitem id="lid98e24" remap="li"/>
 			
            <listitem id="lid98e27" remap="li"/>
 			
            <listitem id="lid98e30" remap="li"/>
 			
            <listitem id="lid98e33" remap="li"/>
 		
         </itemizedlist>
 
         <section remap="task" id="add_existing">
            <title id="ttld99e3" remap="title">Add an Image</title>
            <para id="parad99e6" remap="shortdesc"/>
        
            <para id="parad99e12" remap="p">An image is the basis for instances that you spin up for your computing needs. If you have
        		access to images that meet
        		your needs, you can skip this section. This section explains how to add an image to your
        		Eucalyptus cloud that is customized for your needs.</para>
            <para id="parad99e15" remap="p">There are a few ways you can add an image to Eucalyptus:</para>
            <itemizedlist id="uld99e18" remap="ul">
        		
               <listitem id="lid99e20" remap="li">
                  <para remap="#PCDATA">
                     <emphasis role="bold" id="bd99e21" remap="b">Add an image based on an existing image.</emphasis> If you have an image already, read the rest of this
        			section. Eucalyptus has stock images available to help you get started right away. You
        			can find links to these images in the Dashboard's start page. You can also get images
        			from the <ulink url="http://http://emis.eucalyptus.com/" type="" id="linkd99e24" remap="xref">Eucalyptus Machine Images</ulink> page.</para>
               </listitem>
        		
        		
               <listitem id="lid99e30" remap="li">
                  <para remap="#PCDATA">Add an image that you modify from an existing image. If you have an image that you want to
        			modify, see <xref linkend="image_modify" id="xrefd99e32" remap="xref"/>.</para>
               </listitem>
        		
               <listitem id="lid99e35" remap="li">
                  <para remap="#PCDATA">Add an image that you create. If you want to create a new image, see
        			<xref linkend="creating_images" id="xrefd99e37" remap="xref"/>.</para>
               </listitem>
        		
        	
            </itemizedlist>
            <para id="parad99e41" remap="p">Each of these three ways has a different first step, but the way you get image to Eucalyptus is
        		the same. To enable an image as an executable entity, you do the following:</para>
            <orderedlist id="old99e44" remap="ol">
        		
               <listitem id="lid99e46" remap="li">
                  <para remap="#PCDATA">Bundle a root disk image and kernel/ramdisk pair</para>
               </listitem>
        		
               <listitem id="lid99e49" remap="li">
                  <para remap="#PCDATA">Upload the bundled image to Walrus bucket storage</para>
               </listitem>
        		
               <listitem id="lid99e52" remap="li">
                  <para remap="#PCDATA">Register the data with Eucalyptus</para>
               </listitem>
        	
            </orderedlist>
            <important id="importantd99e56" remap="note">
               <para remap="#PCDATA">Note that while all users can bundle, upload and register images, only the administrator has the required permissions to upload and register kernels and ramdisks.</para>
            </important>
            <para id="parad99e59" remap="p">Once you have an image that meets your needs, perform the
            	tasks listed in this section to add the image to your cloud.</para>
        
    
            <inlinemediaobject role="" remap="task" id="add_existing_kernel">
               <imageobject>
                  <imagedata format="linespecific" fileref="add_kernel.dita#add_kernel"/>
               </imageobject>
            </inlinemediaobject>
            <inlinemediaobject role="" remap="task" id="add_existing_ramdisk">
               <imageobject>
                  <imagedata format="linespecific" fileref="add_ramdisk.dita#add_ramdisk"/>
               </imageobject>
            </inlinemediaobject>
            <inlinemediaobject role="" remap="task" id="add_existing_image">
               <imageobject>
                  <imagedata format="linespecific" fileref="add_rootfs.dita#add_rootfs"/>
               </imageobject>
            </inlinemediaobject>
         </section>
         <section remap="task" id="image_modify">
            <title id="ttld100e3" remap="title">Modify an Image</title>
            <para id="parad100e6" remap="shortdesc"/>
        
            <para id="parad100e12" remap="p">You might find that existing images in your cloud don't meet your needs.</para>
            <para id="parad100e15" remap="p">To modify an existing image:</para>
        
            <orderedlist id="old100e19" remap="steps">
            
               <listitem id="lid100e21" remap="step">
                  <para remap="#PCDATA">
            	
                     <phrase id="phrsd100e23" remap="cmd">Create a mount point for your image.</phrase>
            	
                  </para>
                  <programlisting id="cdblkd100e28" remap="codeblock">mkdir temp-mnt</programlisting>
               </listitem>
        	
               <listitem id="lid100e33" remap="step">
                  <para remap="#PCDATA">
        		
                     <phrase id="phrsd100e35" remap="cmd">Associate a loop block device to the image.</phrase>
        		
                  </para>
                  <programlisting id="cdblkd100e40" remap="codeblock">losetup /dev/loop5 &lt;image_name&gt;</programlisting>
                  <para id="parad100e43" remap="p">where <literal id="cdphd100e45" remap="codeph">loop5</literal> is a free device</para>
               </listitem>
        	
               <listitem id="lid100e51" remap="step">
                  <para remap="#PCDATA">
        		
                     <phrase id="phrsd100e53" remap="cmd">Mount the image.</phrase>
        		
                  </para>
                  <programlisting id="cdblkd100e58" remap="codeblock">mount /dev/loop5 temp-mnt</programlisting>
               </listitem>
        	
               <listitem id="lid100e63" remap="step">
                  <para remap="#PCDATA">
        		
                     <phrase id="phrsd100e65" remap="cmd">Make procfs, dev and sysfs available in your chroot environment.</phrase>
        		
                  </para>
                  <programlisting id="cdblkd100e70" remap="codeblock">mkdir -p temp-mnt/proc
mkdir -p temp-mnt/sys
mkdir -p temp-mnt/dev
mount -o bind /proc temp-mnt/proc
mount -o bind /sys temp-mnt/sys
mount -o bind /dev temp-mnt/dev</programlisting>
               </listitem>
        	
               <listitem id="lid100e75" remap="step">
                  <para remap="#PCDATA">
        		
                     <phrase id="phrsd100e77" remap="cmd">You now have the image under <filename id="flpthd100e79" remap="filepath">temp-mnt</filename> and you can copy over what you want into it. If you want to install packages into it, you have few options:</phrase>
        		
                  </para>
                  <itemizedlist id="uld100e83" remap="choices">
        			
                     <listitem id="lid100e85" remap="choice">
                        <para remap="#PCDATA">
                           <literal id="cdphd100e86" remap="codeph">chroot temp-mnt</literal> and use <literal id="cdphd100e89" remap="codeph">apt-get</literal>,
        				<literal id="cdphd100e92" remap="codeph">yum</literal>, or <literal id="cdphd100e95" remap="codeph">zypper</literal> to install what you want.</para>
                     </listitem>
        			
                     <listitem id="lid100e99" remap="choice">
                        <para remap="#PCDATA">Instruct the package manager program to use a different root (for example both dpkg and rpm uses the --root option)</para>
                     </listitem>
        		
                  </itemizedlist>
               </listitem>
        	
               <listitem id="lid100e104" remap="step">
                  <para remap="#PCDATA">
        		
                     <phrase id="phrsd100e106" remap="cmd">Unmount the drive.</phrase>
        		
                  </para>
                  <programlisting id="cdblkd100e111" remap="codeblock">umount /dev/loop5
losetup -d /dev/loop5</programlisting>
               </listitem>
        
            </orderedlist>
    	
            <para id="sctnd100e117" remap="result">You now have an image with your modifications. You are ready to <xref linkend="add_existing" id="xrefd100e119" remap="xref"/> to
    		Eucalyptus.</para>
    
         </section>
         <section remap="concept" id="creating_images">
            <title id="ttld101e3" remap="title">Create an Image</title>
            <para id="parad101e6" remap="shortdesc"/>
 	
            <para id="parad101e10" remap="p">You can create your own image if you to deploy an instance that is customized for your specific use. For example, you can create an EMI to deploy a LAMP server, MySQL database server, or a Postgres database server. All you need is some familiarity with the creation process.</para>
 
 	
            <sidebar id="sctnd101e13" remap="section">
               <title id="ttld101e15" remap="title">About Linux Images</title>
               <para id="parad101e18" remap="p">A Linux image is a root partition of a Linux installation. We use the convention followed by EC2 images:</para>
               <itemizedlist id="uld101e21" remap="ul">
 		
                  <listitem id="lid101e23" remap="li">
                     <para remap="#PCDATA">The first partition is the root partition (where the EMI is attached)</para>
                  </listitem>
 		
                  <listitem id="lid101e26" remap="li">
                     <para remap="#PCDATA">The second is the ephemeral partition (for additional storage)</para>
                  </listitem>
 		
                  <listitem id="lid101e29" remap="li">
                     <para remap="#PCDATA">The third is the swap partition</para>
                  </listitem>
 		
               </itemizedlist>
               <para id="parad101e33" remap="p">Any image you create must conform to these conditions (for example, <filename id="flpthd101e35" remap="filepath">/etc/fstab</filename> must follow this convention). Typically, the disk provided by Eucalyptus (as well as EC2) is the first SCSI disk (sda). However, you can customize it to be, for example, the first IDE disk (hda) or the first virtual disk on a paravirtual machine (xvda). </para>
            </sidebar>
 	
            <sidebar id="sctnd101e40" remap="section">
               <title id="ttld101e42" remap="title">About Windows Images</title>
               <para id="parad101e45" remap="p">Eucalyptus supports a licensed version of Windows images. Before you bundle a Windows image,
 			you must have a valid version of Windows OS installed on your hypervisor and the Eucalyptus
 			Windows Integration Service installed in the created Windows VM. The following sections detail
 			how to perform these tasks.</para>
               <para id="parad101e48" remap="p">Eucalyptus is compatible with images created from licensed versions of Windows Server 2003 R2, Windows Server 2008, Windows Server 2008 R2, and Windows 7. Windows OS is sensitive to physical and virtual hardware changes made after installation. We recommend that you create any Windows image on the specific hypervisor (Xen, KVM, or VMware) where you plan to run instances of that Windows image. Eucalyptus does not support running a Windows image across different hypervisors.</para>
               <para id="parad101e51" remap="p">Before you begin, you will need the following room for a blank disk file:</para>
               <itemizedlist id="uld101e54" remap="ul">
 			
                  <listitem id="lid101e56" remap="li">
                     <para remap="#PCDATA">8GB minimum, for Windows Server 2003 R2 (32-bit and 64-bit)</para>
                  </listitem>
 			
                  <listitem id="lid101e59" remap="li">
                     <para remap="#PCDATA">15GB minimum for Windows Server 2008 (32-bit and 64-bit), Windows Server 2008 R2 (64-bit), and Windows 7 (32-bit and 64-bit)</para>
                  </listitem>
 		
               </itemizedlist>
               <tip id="warningd101e63" remap="note">
                  <para remap="#PCDATA">Eucalyptus implements ephemeral disks by which a running Windows instances are allocated an additional disk space based on the instance type. For example, if you assign an instance type 15 GB of disk and the registered Windows EMI is 8 GB, 7 GB of disk spaces are ephemeral disks accessible under <filename id="flpthd101e65" remap="filepath">D:\</filename>. If your Windows application uses scratch space most of time, we recommend keeping the Windows EMI small because it takes longer to launch bigger EMIs.</para>
               </tip>
               <para id="parad101e69" remap="p">The windows image is a root file system that has no kernel and ramdisk associated with it.
 			After creating your own Windows images, you can bundle, upload, and register it with Eucalyptus.</para>
            </sidebar>
 	
            <sidebar id="sctnd101e73" remap="section">
               <title id="ttld101e75" remap="title">Hypervisor and OS Information</title>
               <para id="parad101e78" remap="p">The follow sections detail how to create an image based on the hypervisor you use. To create
 			an image, choose which hypervisor you will use, which OS you want the
 			image to be, and then follow the directions for that choice.</para>
               <informaltable id="tbld101e81" remap="table">
                  <tgroup cols="3">
 				
                     <thead>
 					
                        <row>
 						
                           <entry>Hypervisor</entry>
 						
                           <entry>OS</entry>
 						
                           <entry>Directions</entry>
 					
                        </row>
 				
                     </thead>
 				
                     <tbody>
 					
                        <row>
 						
                           <entry>Xen</entry>
 						
                           <entry>Linux</entry>
 						
                           <entry>See <xref linkend="images_xen_lin" id="xrefd101e112" remap="xref"/>
                           </entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>Xen</entry>
 						
                           <entry>Windows</entry>
 						
                           <entry>See <xref linkend="conceptId" id="xrefd101e125" remap="xref"/>
                           </entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>KVM</entry>
 						
                           <entry>Linux</entry>
 						
                           <entry>See <xref linkend="concimages_kvm_lineptId" id="xrefd101e138" remap="xref"/>
                           </entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>KVM</entry>
 						
                           <entry>Windows</entry>
 						
                           <entry>See <xref linkend="conceptId" id="xrefd101e151" remap="xref"/>
                           </entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>VMware</entry>
 						
                           <entry>Linux</entry>
 						
                           <entry>See <xref linkend="images_vmw_lin" id="xrefd101e164" remap="xref"/>
                           </entry>
 					
                        </row>
 					
                        <row>
 						
                           <entry>VMware</entry>
 						
                           <entry>Windows</entry>
 						
                           <entry>See <xref linkend="images_vmw_win" id="xrefd101e177" remap="xref"/>
                           </entry>
 					
                        </row>
 				
                     </tbody>
 			
                  </tgroup>
               </informaltable>
            </sidebar>
 	
 
            <section remap="task" id="images_xen_lin">
               <title id="ttld104e3" remap="title">Create Linux Image (Xen)</title>
               <para id="parad104e6" remap="shortdesc"/>
		
               <important id="importantd104e12" remap="note">
                  <para remap="#PCDATA">Before you begin, make sure that Xen installed and properly functioning for the account you are going to use.</para>
               </important>
               <para id="parad104e15" remap="p">To create a root filesystem to be used with Eucalyptus using Xen and an ISO image of the guest
				OS you want to install:</para>
		
               <orderedlist id="old104e19" remap="steps">
			
                  <listitem id="lid104e21" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd104e23" remap="cmd">Download the ISO image of the distro (guest OS) you want to install.</phrase>
			
                     </para>
                  </listitem>
			
                  <listitem id="lid104e27" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd104e29" remap="cmd">Create a virtual disk with the desired size. For example, to create a 4 GiB disk:</phrase>
				
                     </para>
                     <programlisting id="cdblkd104e34" remap="codeblock">dd if=/dev/zero of=&lt;image_name&gt; bs=1M count=4096</programlisting>
                  </listitem>
			
                  <listitem id="lid104e39" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd104e41" remap="cmd">Create a Xen configuration file (for example, <filename id="flpthd104e43" remap="filepath">xen.cfg</filename>) to boot off the
					ISO image. The file should look like the following:</phrase>
				
                     </para>
                     <programlisting id="cdblkd104e49" remap="codeblock">name = "bootFromISO"
kernel = "/usr/lib/xen/boot/hvmloader"
memory = 1024
builder = "hvm"
device_model = "/usr/lib64/xen/bin/qemu-dm"
boot = "d"
disk = ['file:PATH_TO_ISO,hdc:cdrom,r',
'file:PATH_TO/&lt;image_name&gt;,sda,w']
vif = ['mac=00:01:01:00:00:03, bridge=xenbr0']
dhcp="on"
vnc = 1
vncdisplay = 7
pae = 1</programlisting>
                     <important id="importantd104e52" remap="note">
                        <para remap="#PCDATA">You must modify <literal id="cdphd104e54" remap="codeph">device_model</literal> and <literal id="cdphd104e57" remap="codeph">kernel</literal> since they depend on where the
						distribution puts such files. Look into the Xen package file list. Also be sure that all the options are correct for your needs.</para>
                     </important>
                  </listitem>
			
                  <listitem id="lid104e63" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd104e65" remap="cmd">Start the domU.</phrase>
				
                     </para>
                     <programlisting id="cdblkd104e70" remap="codeblock">xen create xen.cfg</programlisting>
                  </listitem>
			
                  <listitem id="lid104e75" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd104e77" remap="cmd">Connect with a VNC viewer. For example:</phrase>
				
                     </para>
                     <programlisting id="cdblkd104e82" remap="codeblock">xvncviewer localhost:7</programlisting>
                  </listitem>
			
                  <listitem id="lid104e87" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd104e89" remap="cmd">Install the distro as you would normally would. Do not use <literal id="cdphd104e91" remap="codeph">lvm</literal> or <literal id="cdphd104e94" remap="codeph">md</literal> and install everything in one partition. Remember the partition in which the distro is installed.</phrase>
				
                     </para>
                     <important id="importantd104e99" remap="note">
                        <para remap="#PCDATA">Most distributions will remember the network interfaces by the MAC
					address, so interfaces will always be the same (that is, <literal id="cdphd104e101" remap="codeph">eth0</literal> and
					<literal id="cdphd104e104" remap="codeph">eth1</literal> will not be inverted accidentally). In Eucalyptus you have to get the
					distribution to forget the NIC, so that every instance will see the interface as the first
					interface. To do so you may want to refer to the specific distribution. For example Debian and
					Ubuntu use <literal id="cdphd104e107" remap="codeph">udev</literal> so check <filename id="flpthd104e110" remap="filepath">/etc/udev/rules.d/*net*</filename>. CentOS
					might have something in <filename id="flpthd104e113" remap="filepath">/etc/network-scripts/ifcfg-eth0</filename>. Failure to do so
					may leave your instance without network.</para>
                     </important>
                  </listitem>
			
                  <listitem id="lid104e118" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd104e120" remap="cmd">Stop the domU.</phrase>
			
                     </para>
                  </listitem>
			
                  <listitem id="lid104e124" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd104e126" remap="cmd">Find out the starting block and the block size of the root file system.</phrase>
				
                     </para>
                     <programlisting id="cdblkd104e131" remap="codeblock">parted &lt;image_name&gt;</programlisting>
                  </listitem>
			
                  <listitem id="lid104e136" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd104e138" remap="cmd">Change the units to blocks.</phrase>
				
                     </para>
                     <programlisting id="cdblkd104e143" remap="codeblock">(parted) u
Unit? [compact]? b</programlisting>
                  </listitem>
			
                  <listitem id="lid104e148" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd104e150" remap="cmd">Print the current partition table using <literal id="cdphd104e152" remap="codeph">p</literal>.</phrase>
				
                     </para>
                     <para remap="#PCDATA">Note the start for the partition you are interested in and the size. For this
					example we'll say that the start is <literal id="cdphd104e158" remap="codeph">32256</literal> and the size is <literal id="cdphd104e161" remap="codeph">1024000</literal>.</para>
                  </listitem>
			
                  <listitem id="lid104e166" remap="step">
                     <para remap="#PCDATA">
				
                        <phrase id="phrsd104e168" remap="cmd">Extract the file system.</phrase>
				
                     </para>
                     <programlisting id="cdblkd104e173" remap="codeblock">dd if=&lt;image_name&gt; of=rootfs.img bs=1 skip=32256 count=1024000</programlisting>
                  </listitem>
		
               </orderedlist>
		
               <para id="sctnd104e179" remap="result">You now have a root filesystem. Make sure that it is compatible with the kernel/initrd you are using in your
			cloud environment. In particular you may want to be sure you have the
			modules of the kernel you are going to use. Then you are ready to <xref linkend="add_existing" id="xrefd104e181" remap="xref"/> to
			Eucalyptus.</para>
	
            </section>
            <section remap="concept" id="conceptId">
               <title id="ttld105e3" remap="title">Create Windows Image (Xen)</title>
               <para id="parad105e6" remap="shortdesc"/>
 	
               <para id="parad105e10" remap="p">We recommend that you perform this task on an NC (or the host running the same Linux distributions and hypervisors as the NC). If you are creating the Windows image on a machine currently running the NC, terminate all running instances and stop the NC. To stop the NC, enter: </para>
 	
               <programlisting id="cdblkd105e13" remap="codeblock">service eucalyptus-nc stop</programlisting>
 	
               <para id="parad105e16" remap="p">Included with the installation are template files that closely match those that Eucalyptus will
 		generate at VM instantiation time. The file for KVM
 		(<filename id="flpthd105e18" remap="filepath">libvirt-xen-windows-example.xml</filename>) is located at
 		<filename id="flpthd105e21" remap="filepath">/usr/share/eucalyptus/doc/</filename>. We recommend that you review this
 		file to acquaint yourself with its contents, noting required files, bridges, and resources. For
 		more information about configuring the libvirt.xml file, go to the <ulink url="http://libvirt.org/formatdomain.html" type="" id="linkd105e24" remap="xref">Domain XML format</ulink> page in the
 		libvirt documentation.</para>
 
               <section remap="task" id="images_xen_win_baseos">
                  <title id="ttld110e3" remap="title">Install Base Windows OS</title>
                  <para id="parad110e6" remap="shortdesc"/>
        
                  <para id="parad110e12" remap="p">The first task for creating a Windows image is installing a base Windows operating system (OS). To
        		install a base Windows OS:</para>
        
                  <orderedlist id="old110e16" remap="steps">
            
                     <listitem id="lid110e18" remap="step">
                        <para remap="#PCDATA">
            	
                           <phrase id="phrsd110e20" remap="cmd">Log in to the stopped NC server or a host that runs the same hypervisor as the NCs.</phrase>
            
                        </para>
                     </listitem>
        	
                     <listitem remap="step" id="xen_win_secondary_disk">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd110e26" remap="cmd">Create a blank disk file. Specify your Windows VM image name using the parameter
        			<literal id="cdphd110e28" remap="codeph">of</literal>.</phrase>
        		
                        </para>
                        <programlisting id="cdblkd110e34" remap="codeblock">dd if=/dev/zero of=windows.&lt;image_name&gt;.img bs=1M count=1 seek=16999</programlisting>
                        <important id="importantd110e37" remap="note">
                           <para remap="#PCDATA">Your image name must start with the word, <literal id="cdphd110e39" remap="codeph">windows</literal>
        				(all lower-case).</para>
                        </important>
                     </listitem>
        	
                     <listitem id="lid110e45" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd110e47" remap="cmd">Create a floppy and secondary blank disk to be attached to the image later, in order to test paravirtualization drivers</phrase>
        		
                        </para>
                        <programlisting id="cdblkd110e52" remap="codeblock">dd if=/dev/zero of=floppy.img \
	bs=1k count=1474
	dd if=/dev/zero of=secondary.img \
	bs=1M count=1 seek=1000</programlisting>
                     </listitem>
        	
                     <listitem id="lid110e57" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd110e59" remap="cmd">Make available the .iso file that contains your Windows installation CD/DVD, then copy the .iso file to your working directory.</phrase>
        		
        	
                        </para>
                     </listitem>
        	
        	
                     <listitem id="lid110e63" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd110e65" remap="cmd">Copy the <filename id="flpthd110e67" remap="filepath">libvirt-xen-windows-example.xml</filename> file to your working
        			directory and rename it to <filename id="flpthd110e70" remap="filepath">libvirt-xen-windows.xml</filename>.</phrase>
        		
                        </para>
                        <programlisting id="cdblkd110e76" remap="codeblock">cp libvirt-xen-windows-example.xml /usr/share/eucalyptus/doc/libvirt-xen-windows.xml</programlisting>
                     </listitem>
        	
        	
                     <listitem id="lid110e81" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd110e83" remap="cmd">Open the new <filename id="flpthd110e85" remap="filepath">libvirt-xen-windows.xml</filename> file and provide
        			fully qualified paths to the VM image file and iso. Make sure that the name of the bridge is the same as the one used by the hypervisor on which you are creating the Windows image.</phrase>
        		
        		
                        </para>
                        <para id="parad110e93" remap="p">Your file should look similar to this example:</para>
                        <programlisting id="cdblkd110e96" remap="codeblock">&lt;domain type='xen'&gt;
    &lt;name&gt;eucalyptus-windows&lt;/name&gt;
    &lt;os&gt;
            &lt;type&gt;hvm&lt;/type&gt;
            &lt;loader&gt;/usr/lib/xen/boot/hvmloader&lt;/loader&gt;
            &lt;boot dev='cdrom'/&gt;
    &lt;/os&gt;
  &lt;features&gt;
    &lt;acpi/&gt;
    &lt;apic/&gt;
    &lt;pae/&gt;
  &lt;/features&gt;
  &lt;clock offset='localtime'/&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;destroy&lt;/on_crash&gt;
    &lt;memory&gt;524288&lt;/memory&gt;
    &lt;vcpu&gt;1&lt;/vcpu&gt;
    &lt;devices&gt;
        &lt;emulator&gt;/usr/lib64/xen/bin/qemu-dm&lt;/emulator&gt;
        &lt;disk type='file'&gt;
            &lt;source file='/root/windows_2003.img'/&gt;
            &lt;target dev='hda' bus='ide'/&gt;
        &lt;/disk&gt;
        &lt;!--&lt;disk type='file' device='disk'&gt;
            &lt;driver name='tap' type='aio'/&gt;
            &lt;source file='fully_qualified_path_to_secondary_disk'/&gt;
            &lt;target dev='xvda' bus='xen'/&gt;
        &lt;/disk&gt;
        &lt;disk type='file' device='floppy'&gt;
             &lt;source file='fully_qualified_path_to_floppy_disk'/&gt;
             &lt;target dev='fda'/&gt;
        &lt;/disk&gt; --&gt;
        &lt;disk type='file' device='cdrom'&gt;
            &lt;source file='/root/en_win_srv_2003_r2_enterprise_with_sp2_cd1_x13-05460.iso'/&gt;
            &lt;target dev='hdc'/&gt;
            &lt;readonly/&gt;
        &lt;/disk&gt;
        &lt;interface type='bridge'&gt;
            &lt;source bridge='xenbr0'/&gt;
            &lt;script path='/etc/xen/scripts/vif-bridge'/&gt;
        &lt;/interface&gt;
        &lt;serial type='pty'&gt;
           &lt;source path='/dev/pts/3'/&gt;
           &lt;target port='0'/&gt;
        &lt;/serial&gt;
        &lt;input type='tablet' bus='usb'/&gt;
        &lt;input type='mouse' bus='ps2'/&gt;
        &lt;graphics type='vnc' port='-1' autoport='yes' keymap='en-us' listen='0.0.0.0'/&gt;
    &lt;/devices&gt;
&lt;/domain&gt;</programlisting>
                     </listitem>
        	
        	
                     <listitem id="lid110e101" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd110e103" remap="cmd">Start the VM.</phrase>
        		
                        </para>
                        <programlisting id="cdblkd110e108" remap="codeblock">virsh create libvirt-xen-windows.xml</programlisting>
                     </listitem>
        	
                     <listitem id="lid110e113" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd110e115" remap="cmd">Connect to the virtual console using the VNC client of your choice. On the NC, check
        			the display number that has been allocated by looking at the process table (<literal id="cdphd110e117" remap="codeph">ps axw |
        			grep vnc</literal>). For example, if the display number is 0, then connect to the NC using the VNC client:</phrase>
        		
                        </para>
                        <programlisting id="cdblkd110e123" remap="codeblock">vinagre &lt;machine-hosting-vm&gt;:0</programlisting>
                        <tip id="warningd110e126" remap="note">
                           <para remap="#PCDATA">You can also connect to your Windows image using the Virtual Manager and Virtual Viewer utilities with Centos/Xen systems.</para>
                        </tip>
                     </listitem>
        	
                     <listitem id="lid110e131" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd110e133" remap="cmd">Follow the standard Windows installation procedure until the VM has completed installing Windows.</phrase>
        		
                        </para>
                        <tip id="warningd110e138" remap="note">
                           <para remap="#PCDATA">On some hosts, the VNC’s display number will change when a VM restarts. Use <literal id="cdphd110e140" remap="codeph">ps</literal> to find the current number.</para>
                        </tip>
                     </listitem>
        	
                     <listitem id="lid110e146" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd110e148" remap="cmd">Run <literal id="cdphd110e150" remap="codeph">virsh</literal> list to display the domain name.</phrase>
        	
                        </para>
                     </listitem>
        	
                     <listitem id="lid110e155" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd110e157" remap="cmd">Shut down the Windows VM you have just created. The easiest way to shutdown your VM
        			is use the <literal id="cdphd110e159" remap="codeph">virsh destroy</literal> command, as shown:</phrase>
        		
                        </para>
                        <programlisting id="cdblkd110e165" remap="codeblock">virsh destroy &lt;domain_name&gt;</programlisting>
                     </listitem>
        
                  </orderedlist>
    	
                  <para id="sctnd110e171" remap="postreq">You are now ready to <xref linkend="images_xen_win_wis" id="xrefd110e173" remap="xref"/>.</para>
    
               </section>
               <section remap="task" id="images_xen_win_wis">
                  <title id="ttld111e3" remap="title">Install Eucalyptus Windows Integration</title>
                  <para id="parad111e6" remap="shortdesc"/>
		
                  <para id="parad111e12" remap="p">To install Eucalyptus Windows Integration:</para>
		
                  <orderedlist id="old111e16" remap="steps">
			
                     <listitem id="lid111e18" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd111e20" remap="cmd">Use yum or apt-get to download the Eucalyptus tool. </phrase>
				
                        </para>
                        <programlisting id="cdblkd111e25" remap="codeblock">yum install eucalyptus-windows-tools
apt-get install eucalyptus-windows-tools</programlisting>
                     </listitem>
			
                     <listitem id="lid111e30" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd111e32" remap="cmd">Copy <filename id="flpthd111e34" remap="filepath">/usr/share/eucalyptus/eucawin.iso</filename> to the working directory of your NC.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid111e39" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd111e41" remap="cmd">Open the libvirt-xen-windows-example.xml file and make the following edits:</phrase>
				
                        </para>
                        <itemizedlist id="uld111e46" remap="ul">
						
                           <listitem id="lid111e48" remap="li">
                              <para remap="#PCDATA">Comment out the lines of XML code directing Xen to boot the Windows image from the CDROM.</para>
                           </listitem>
						
                           <listitem id="lid111e51" remap="li">
                              <para remap="#PCDATA">Change the text so that <literal id="cdphd111e53" remap="codeph">eucawin.iso</literal> replaces the Windows .iso image and is mounted as <literal id="cdphd111e56" remap="codeph">cdrom</literal>.</para>
                           </listitem>
						
                           <listitem id="lid111e60" remap="li">
                              <para remap="#PCDATA">Enter the path to the secondary disk file you created in the <xref linkend="images_xen_win_baseos" id="xrefd111e62" remap="xref"/>.</para>
                           </listitem>
						
                           <listitem id="lid111e66" remap="li">
                              <para remap="#PCDATA">Uncomment the lines that direct attachment of a floppy disk and secondary disk.</para>
                           </listitem>
					
                        </itemizedlist>
                        <para id="parad111e70" remap="p">Your finished file should look similar to the following example:</para>
                        <programlisting id="cdblkd111e73" remap="codeblock">&lt;domain type='xen'&gt;
    &lt;name&gt;eucalyptus-windows&lt;/name&gt;
    &lt;os&gt;
            &lt;type&gt;hvm&lt;/type&gt;
            &lt;loader&gt;/usr/lib/xen/boot/hvmloader&lt;/loader&gt;
            &lt;!-- &lt;boot dev='cdrom'/&gt; --&gt;
    &lt;/os&gt;
  &lt;features&gt;
    &lt;acpi/&gt;
    &lt;apic/&gt;
    &lt;pae/&gt;
  &lt;/features&gt;
  &lt;clock offset='localtime'/&gt;
  &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
  &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
  &lt;on_crash&gt;destroy&lt;/on_crash&gt;
    &lt;memory&gt;524288&lt;/memory&gt;
    &lt;vcpu&gt;1&lt;/vcpu&gt;
    &lt;devices&gt;
        &lt;emulator&gt;/usr/lib64/xen/bin/qemu-dm&lt;/emulator&gt;
        &lt;disk type='file'&gt;
            &lt;source file='/root/windows_2003.img'/&gt;
            &lt;target dev='hda' bus='ide'/&gt;
        &lt;/disk&gt;
        &lt;disk type='file' device='disk'&gt;
            &lt;driver name='tap' type='aio'/&gt;
            &lt;source file='/root/secondary.img'/&gt;
            &lt;target dev='xvda' bus='xen'/&gt;
        &lt;/disk&gt;
        &lt;disk type='file' device='floppy'&gt;
             &lt;source file='/root/floppy.img'/&gt;
             &lt;target dev='fda'/&gt;
        &lt;/disk&gt;
        &lt;disk type='file' device='cdrom'&gt;
            &lt;source file='eucawin.iso'/&gt;
            &lt;target dev='hdc'/&gt;
            &lt;readonly/&gt;
        &lt;/disk&gt;
        &lt;interface type='bridge'&gt;
            &lt;source bridge='xenbr0'/&gt;
            &lt;script path='/etc/xen/scripts/vif-bridge'/&gt;
        &lt;/interface&gt;
        &lt;serial type='pty'&gt;
           &lt;source path='/dev/pts/3'/&gt;
           &lt;target port='0'/&gt;
        &lt;/serial&gt;
        &lt;input type='tablet' bus='usb'/&gt;
        &lt;input type='mouse' bus='ps2'/&gt;
        &lt;graphics type='vnc' port='-1' autoport='yes' keymap='en-us' listen='0.0.0.0'/&gt;
    &lt;/devices&gt;
&lt;/domain&gt;</programlisting>
                     </listitem>
			
                     <listitem id="lid111e78" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd111e80" remap="cmd">There is an issue with Xen paravirtualization drivers on some Windows versions. 64-bit Windows Server 2008, Windows Server 2008R2, and Windows 7 have driver signing requirements that prevent unsigned drivers from being installed. The supplied drivers in the package are not signed. To resolve this issue:</phrase>
				
                        </para>
                        <orderedlist id="old111e83" remap="substeps">
					
                           <listitem id="lid111e85" remap="substep">
                              <para remap="#PCDATA">
						
                                 <phrase id="phrsd111e87" remap="cmd">Log in to the Windows VM.</phrase>
					
                              </para>
                           </listitem>
					
                           <listitem id="lid111e91" remap="substep">
                              <para remap="#PCDATA">
						
                                 <phrase id="phrsd111e93" remap="cmd">Launch <literal id="cdphd111e95" remap="codeph">cmd.exe</literal> as administrator, and execute the following commands:</phrase>
						
                              </para>
                              <programlisting id="cdblkd111e101" remap="codeblock">bcdedit.exe –set loadoptions DDISABLE_INTEGRITY_CHECKS
bcdedit.exe –set TESTSIGNING ON</programlisting>
                           </listitem>
					
                           <listitem id="lid111e106" remap="substep">
                              <para remap="#PCDATA">
						
                                 <phrase id="phrsd111e108" remap="cmd">Reboot the VM.</phrase>
					
                              </para>
                           </listitem>
				
                        </orderedlist>
                     </listitem>
			
                     <listitem id="lid111e114" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd111e116" remap="cmd">Log in to Windows and find the Eucalyptus installation files in the CDROM drive.</phrase>
				
                        </para>
                        <itemizedlist id="uld111e119" remap="choices">
					
                           <listitem id="lid111e121" remap="choice">
                              <para remap="#PCDATA">For Windows Server 2003 R2, run <literal id="cdphd111e123" remap="codeph">setup.exe</literal>.</para>
                           </listitem>
					
                           <listitem id="lid111e127" remap="choice">
                              <para remap="#PCDATA">For all others, run <literal id="cdphd111e129" remap="codeph">EucalyptusWindowsIntegration.msi</literal>. (setup.exe will automatically install .NET framework 2.0, which is not bundled in Server 2003 R2).</para>
                           </listitem>
				
                        </itemizedlist>
                     </listitem>
			
                     <listitem id="lid111e135" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd111e137" remap="cmd">In the <guilabel id="uictrld111e139" remap="uicontrol">Choose your hypervisor</guilabel> step, click <guilabel id="uictrld111e142" remap="uicontrol">XEN</guilabel> and then click <guilabel id="uictrld111e145" remap="uicontrol">Next</guilabel>.</phrase>
				
                        </para>
                        <para remap="#PCDATA">
                           <mediaobject id="imgd111e150" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_hypervisor_xen.png"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Eucalyptus Windows Integrator      select hypervisor window</phrase>
                              </textobject>
                           </mediaobject> 
                           <remark id="spd111e152" remap="draft-comment">Should this be a separate section, like Active
						Directory and Remote Desktop? Scot: maybe combine all into one process file of separate tasks.</remark>
                        </para>
                        <para remap="#PCDATA">During the installation of drivers, warning messages might appear asking to
					confirm the driver installation. Click <guilabel id="uictrld111e157" remap="uicontrol">Continue</guilabel> in all cases.</para>
                     </listitem>
			
                     <listitem id="lid111e162" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd111e164" remap="cmd">At the end of Eucalyptus installation, the Xen driver setup will automatically start. When
					prompted to choose setup type, choose <guilabel id="uictrld111e166" remap="uicontrol">Complete</guilabel>. During the installation of drivers, warning messages might appear asking to confirm the driver installation. Click <guilabel id="uictrld111e169" remap="uicontrol">Continue</guilabel> in all cases.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid111e174" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd111e176" remap="cmd">Reboot the Windows VM</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid111e180" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd111e182" remap="cmd">Open the Windows device manager and check that the following drivers are found for
					each device:</phrase>
				
                        </para>
                        <itemizedlist id="uld111e187" remap="ul">
						
                           <listitem id="lid111e189" remap="li">
                              <para remap="#PCDATA">Floppy disk drive</para>
                           </listitem>
						
                           <listitem id="lid111e192" remap="li">
                              <para remap="#PCDATA">Disk drives: XEN PV SCSI Disk Device</para>
                           </listitem>
						
                           <listitem id="lid111e195" remap="li">
                              <para remap="#PCDATA">SCSI and RAID controllers: Xen Block Device Driver</para>
                           </listitem>
						
                           <listitem id="lid111e198" remap="li">
                              <para remap="#PCDATA">Network adapters: Xen Net Device Driver</para>
                           </listitem>
					
                        </itemizedlist>
                        <para remap="#PCDATA">If the correct drivers are not found, question marks display on the devices.
					</para>
                        <itemizedlist id="uld111e205" remap="ul">
						
                           <listitem id="lid111e207" remap="li">
                              <para remap="#PCDATA">Right-click on the devices in question and run update drivers. The new hardware wizard displays.
						</para>
                           </listitem>
						
                           <listitem id="lid111e210" remap="li">
                              <para remap="#PCDATA">When the new hardware wizard asks if Windows update is to be connected, click <guilabel id="uictrld111e212" remap="uicontrol">No, not this time</guilabel>.</para>
                           </listitem>
						
                           <listitem id="lid111e216" remap="li">
                              <para remap="#PCDATA">Choose <guilabel id="uictrld111e218" remap="uicontrol">Install software automatically (recommended)</guilabel>.</para>
                           </listitem>
						
                           <listitem id="lid111e222" remap="li">
                              <para remap="#PCDATA">If a confirmation popup message displays, click <guilabel id="uictrld111e224" remap="uicontrol">Continue</guilabel>.</para>
                           </listitem>
					
                        </itemizedlist>
                     </listitem>
		
                  </orderedlist>
		
                  <para id="sctnd111e232" remap="postreq">You are now ready to <xref linkend="images_xen_win_ad" id="xrefd111e234" remap="xref"/>.</para>
	
               </section>
               <section remap="task" id="images_xen_win_ad">
                  <title id="ttld112e3" remap="title">Configure Active Directory</title>
                  <para id="parad112e6" remap="shortdesc"/>
        
                  <para id="parad112e12" remap="p">The Eucalyptus Integration service lets an enterprise with existing Active Directory
        	domains attach Windows instances to the domains and control access to these instances using the existing AD user database. Users can log into the instance either using their domain credentials or the Administrator’s password generated with the <command id="cmdnmd112e14" remap="cmdname">euca-get-password</command> command. </para>
                  <para id="parad112e18" remap="p">Because AD technology is tightly integrated with domain name service (DNS), the default
        		name server contacted by the instance must be able to resolve the AD address as a proper
        		domain controller. You can do this for all networking modes except System, by configuring
        		the following line in the CC’s <filename id="flpthd112e20" remap="filepath">eucalyptus.conf</filename> file:</para>
                  <programlisting id="cdblkd112e24" remap="codeblock">VNET_DNS=&lt;domain_controller_IP_address&gt;</programlisting>
                  <para id="parad112e27" remap="p">If there is no such pre-existing DNS set-up or your networking mode is System, you might need to change the VM’s network interface so that the preferred DNS server points to the domain controller. </para>
                  <para id="parad112e30" remap="p">To set up Active Directory:
        	</para>
        
                  <orderedlist id="old112e34" remap="steps">
            
                     <listitem id="lid112e36" remap="step">
                        <para remap="#PCDATA">
            	
                           <phrase id="phrsd112e38" remap="cmd">Click <menuchoice id="mncscdd112e40" remap="menucascade">
                                 <guimenu id="mnuictrld112e41" remap="uicontrol">Windows Programs</guimenu>
                                 <guisubmenu id="mnuictrld112e44" remap="uicontrol">Eucalyptus</guisubmenu>
                                 <guimenuitem id="mnuictrld112e47" remap="uicontrol">EucaSetup.exe</guimenuitem>
                              </menuchoice>. </phrase>
            	
                        </para>
                        <para remap="#PCDATA">
                           <mediaobject id="imgd112e52" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_win_start.jpg"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Eucalyptus setup selection</phrase>
                              </textobject>
                           </mediaobject>
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld112e56" remap="uicontrol">Eucalyptus Windows Integration</guilabel> popup displays.</para>
                     </listitem>
        	
                     <listitem id="lid112e61" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd112e63" remap="cmd">Click the <guilabel id="uictrld112e65" remap="uicontrol">Active Directory</guilabel> tab in the Eucalyptus Windows Integration window and enter the following information:</phrase>
        		
                        </para>
                        <para remap="#PCDATA">
        			
                           <mediaobject id="imgd112e71" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_ad.jpg"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Active Directory tab</phrase>
                              </textobject>
                           </mediaobject>
        			
                        </para>
                        <itemizedlist id="uld112e73" remap="ul">
        				
                           <listitem id="lid112e75" remap="li">
                              <para remap="#PCDATA">Enter the address of the existing Active Directory domain controller in the <guilabel id="uictrld112e77" remap="uicontrol">AD Address</guilabel> field.</para>
                           </listitem>
        				
                           <listitem id="lid112e81" remap="li">
                              <para remap="#PCDATA">Enter the administrator username in the <guilabel id="uictrld112e83" remap="uicontrol">Admin Username</guilabel> field. We recommend using a generic user account that has permission to join a computer to a domain or a specific organizational unit.</para>
                           </listitem>
        				
                           <listitem id="lid112e87" remap="li">
                              <para remap="#PCDATA">Enter and confirm the password in the <guilabel id="uictrld112e89" remap="uicontrol">Admin Password</guilabel> field.
        					Note that the Admin username and password are required to join an instance to an Active
        					Directory. When launched in Eucalyptus, these properties will be deleted as soon as the instance joins (or fails to join) the domain.</para>
                           </listitem>
        				
                           <listitem id="lid112e93" remap="li">
                              <para remap="#PCDATA">Optionally, enter an organizational unit in the <guilabel id="uictrld112e95" remap="uicontrol">Organizational Unit</guilabel> field. This specifies a container that the instances launched from this image will be attach to.</para>
                           </listitem>
        			
                        </itemizedlist>
                        <tip id="warningd112e100" remap="note">
                           <para remap="#PCDATA">If the values entered in this section are incorrect, the launched
        				instances will fail to join the domain. We recommend that you verify the information by
        				manually joining a computer to a domain using the same information that you entered in this step. You may first log in the launched instance using administrator password (<command id="cmdnmd112e102" remap="cmdname">euca-get-password</command>) and manually join the domain for verification.</para>
                        </tip>
                     </listitem>
        	
                     <listitem id="lid112e108" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd112e110" remap="cmd">Click <guilabel id="uictrld112e112" remap="uicontrol">Apply</guilabel>.</phrase>
        	
                        </para>
                     </listitem>
        
                  </orderedlist>
    	
                  <para id="sctnd112e118" remap="postreq">You are now ready to <xref linkend="images_xen_win_rdp" id="xrefd112e120" remap="xref"/>
    	
                  </para>
    
               </section>
               <section remap="task" id="images_xen_win_rdp">
                  <title id="ttld113e3" remap="title">Configure Remote Desktop</title>
                  <para id="parad113e6" remap="shortdesc"/>
        
                  <para id="parad113e12" remap="p">Domain users or groups require remote desktop permission to log into an instance. By
        		default, only the local administrator has the remote desktop permission. The Eucalyptus Integration Service provides a way to grant remote desktop permission to additional domain users or groups.</para>
                  <para id="parad113e15" remap="p">To configure remote desktop permission:</para>
        
                  <orderedlist id="old113e19" remap="steps">
            
                     <listitem id="lid113e21" remap="step">
                        <para remap="#PCDATA">
            	
                           <phrase id="phrsd113e23" remap="cmd">Open the <guilabel id="uictrld113e25" remap="uicontrol">Eucalyptus Windows Integration</guilabel> popup (<menuchoice id="mncscdd113e28" remap="menucascade">
                                 <guimenu id="mnuictrld113e29" remap="uicontrol">Windows Programs</guimenu>
                                 <guisubmenu id="mnuictrld113e32" remap="uicontrol">Eucalyptus</guisubmenu>
                                 <guimenuitem id="mnuictrld113e35" remap="uicontrol">EucaSetup.exe</guimenuitem>
                              </menuchoice>).</phrase>
            
                        </para>
                     </listitem>
        	
                     <listitem id="lid113e40" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd113e42" remap="cmd">Click the <guilabel id="uictrld113e44" remap="uicontrol">RemoteDesktop</guilabel> tab</phrase>
        		
                        </para>
                        <para remap="#PCDATA">
                           <mediaobject id="imgd113e49" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_rd.jpg" align="center"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">RemoteDesktop tab</phrase>
                              </textobject>
                           </mediaobject>
                        </para>
                        <para remap="#PCDATA">The names of authorized domain users and groups display in the <guilabel id="uictrld113e53" remap="uicontrol">Authorized User/Groups</guilabel> field. By default, only the local administrator is listed as authorized.</para>
                     </listitem>
        	
                     <listitem id="lid113e58" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd113e60" remap="cmd">In the text field below the list, enter a user and group account name in the format <literal id="cdphd113e62" remap="codeph">[DOMAIN]\[USER or GROUP]</literal>. If you add a new local user or local group, prepend the account name <literal id="cdphd113e65" remap="codeph">localhost\</literal> instead of the domain name.</phrase>
        		
                        </para>
                        <para remap="#PCDATA">
        			
                           <mediaobject id="imgd113e71" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/rdt01.png"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Example of Authorized             Users/Groups configuration</phrase>
                              </textobject>
                           </mediaobject>
        			
        		
                        </para>
                     </listitem>
        	
                     <listitem id="lid113e75" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd113e77" remap="cmd">Click <guilabel id="uictrld113e79" remap="uicontrol">Add</guilabel>.</phrase>
        	
                        </para>
                     </listitem>
        	
                     <listitem id="lid113e84" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd113e86" remap="cmd">Repeat for all user/groups that you want to add.</phrase>
        	
                        </para>
                     </listitem>
        	
                     <listitem id="lid113e90" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd113e92" remap="cmd">Click <guilabel id="uictrld113e94" remap="uicontrol">Apply</guilabel>.</phrase>
        		
                        </para>
                        <para remap="#PCDATA">When the instance launches, the members of the groups you added can log in to the instance through remote desktop.</para>
                     </listitem>
        
                  </orderedlist>
    	
                  <para id="sctnd113e103" remap="postreq">You are now ready to <xref linkend="images_xen_win_sysprep" id="xrefd113e105" remap="xref"/>.</para>
    
               </section>
               <section remap="task" id="images_xen_win_sysprep">
                  <title id="ttld114e3" remap="title">Run Sysprep</title>
                  <para id="parad114e6" remap="shortdesc"/>
        
                  <para id="parad114e12" remap="p">Sysprep is a Microsoft tool for deploying multiple Windows operating systems in an
        		enterprise. Running Sysprep removes system-specific information such as security ID (SID)
        		from the Windows OS before you clone an image. Sysprep then re-initializes the OS after
        		the image is cloned and started on multiple computers. Use Sysprep to prepare images when
        		you use Microsoft Key Management Service to activate license keys. Also, use Sysprep when your Windows systems are attached to Active Directory.</para>
                  <para id="parad114e15" remap="p">In Eucalyptus, you can run Sysprep before you bundle images with the
        		<literal id="cdphd114e17" remap="codeph">euca-bundle-image</literal> or <literal id="cdphd114e20" remap="codeph">euca-bundle-instance</literal> commands. </para>
                  <para id="parad114e27" remap="p">To configure and run Sysprep:</para>
        
                  <orderedlist id="old114e31" remap="steps">
        	
                     <listitem id="lid114e33" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd114e35" remap="cmd">Open the <guilabel id="uictrld114e37" remap="uicontrol">Eucalyptus Windows Integration</guilabel> popup (<menuchoice id="mncscdd114e40" remap="menucascade">
                                 <guimenu id="mnuictrld114e41" remap="uicontrol">Windows Programs</guimenu>
                                 <guisubmenu id="mnuictrld114e44" remap="uicontrol">Eucalyptus</guisubmenu>
                                 <guimenuitem id="mnuictrld114e47" remap="uicontrol">EucaSetup.exe</guimenuitem>
                              </menuchoice>).</phrase>
        		
                        </para>
                        <para remap="#PCDATA">
                           <mediaobject id="imgd114e52" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_gen.jpg"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Eucalyptus Windows Integration            window</phrase>
                              </textobject>
                           </mediaobject>
                        </para>
                     </listitem>  
        	
                     <listitem id="lid114e55" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd114e57" remap="cmd">Click the <guilabel id="uictrld114e59" remap="uicontrol">General</guilabel> tab.</phrase>
        	
                        </para>
                     </listitem>
        	
                     <listitem id="lid114e64" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd114e66" remap="cmd">Ensure that <guilabel id="uictrld114e68" remap="uicontrol">Format uninitialized drives</guilabel> is checked</phrase>
        	
                        </para>
                     </listitem>
        	
                     <listitem id="lid114e73" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd114e75" remap="cmd">If you want to edit the Sysprep answer file, click the <guilabel id="uictrld114e77" remap="uicontrol">Open and change</guilabel> button in the General tab. Otherwise skip this step.</phrase>
        	
                        </para>
                     </listitem>
        	
                     <listitem id="lid114e82" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd114e84" remap="cmd">Click the <guilabel id="uictrld114e86" remap="uicontrol">Run Sysprep</guilabel> button.</phrase>
        		
        		
                        </para>
                        <para remap="#PCDATA">Sysprep starts.</para>
                     </listitem>
        	
                     <listitem id="lid114e94" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd114e96" remap="cmd">After Sysprep is complete, close the application and shutdown the Windows VM using the Windows Programs menu.</phrase>
        	
                        </para>
                     </listitem>
        
                  </orderedlist>
    	
                  <para id="sctnd114e101" remap="postreq">You are now ready to <xref linkend="images_en_win_add" id="xrefd114e103" remap="xref"/>.</para>
    
               </section>
               <section remap="task" id="images_en_win_add">
                  <title id="ttld115e3" remap="title">Add Image to Eucalyptus</title>
                  <para id="parad115e6" remap="shortdesc"/>
        
                  <para remap="#PCDATA">
        	
                     <remark id="spd115e12" remap="draft-comment">Think about tying this back into single bundle narrative for all image
        		creation topics.</remark>
        	
                  </para>
                  <para id="parad115e15" remap="p">To enable an image as an executable entity, you must bundle and upload the Windows	 disk
        		image to Walrus, and then register the uploaded image with Eucalyptus.</para>
        
                  <orderedlist id="old115e19" remap="steps">
            
                     <listitem id="lid115e21" remap="step">
                        <para remap="#PCDATA">
                
                           <phrase id="phrsd115e23" remap="cmd">Run the following command to bundle, upload, and register your Windows disk image:</phrase>
            	
                        </para>
                        <programlisting id="cdblkd115e28" remap="codeblock">euca-bundle-image -i &lt;vm_image_file&gt; 
euca-upload-bundle -b &lt;image_bucket&gt; -m /tmp/&lt;vm_image_file&gt;.manifest.xml
euca-register &lt;image_bucket&gt;/&lt;vm_image_file&gt;.manifest.xml</programlisting>
                     </listitem>
        
                  </orderedlist>
    	
                  <para id="sctnd115e34" remap="result">Your Windows image is now ready to run as an instance.</para>
    	
                  <para id="sctnd115e37" remap="postreq">After you register the image, Walrus decrypts the image bundle. This process might
    		take a few minutes for a large Windows image to be decrypted. For example, a 10G image
    		requires that you wait about 10 minutes before you launch the instance.</para>
    	
    
               </section>
            </section>
            <section remap="task" id="concimages_kvm_lineptId">
               <title id="ttld106e3" remap="title">Create Linux Image (KVM)</title>
               <para id="parad106e6" remap="shortdesc"/>
 	
               <important id="importantd106e12" remap="note">
                  <para remap="#PCDATA">Before you begin, make sure that KVM installed and properly functioning for the account you are going to use.</para>
               </important>
               <para id="parad106e15" remap="p">To create a root filesystem to be used with Eucalyptus using KVM and an ISO image of the guest
 		OS you want to install:</para>
 	
               <orderedlist id="old106e19" remap="steps">
 		
                  <listitem id="lid106e21" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd106e23" remap="cmd">Download the ISO image of the distro (guest OS) you want to install.</phrase>
 			
 		
                     </para>
                  </listitem>
 		
                  <listitem id="lid106e27" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd106e29" remap="cmd">Create a virtual disk with the desired size. For example, to create a 4 GiB disk:</phrase>
 			
                     </para>
                     <programlisting id="cdblkd106e34" remap="codeblock">dd if=/dev/zero of=&lt;image_name&gt; bs=1M count=4096</programlisting>
                  </listitem>
 		
                  <listitem id="lid106e39" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd106e41" remap="cmd">Start KVM using the CDROM as the boot device and new image as the disk.</phrase>
 			
                     </para>
                     <programlisting id="cdblkd106e46" remap="codeblock">kvm -cdrom iso_image -drive if=scsi,file=&lt;image_name&gt;,boot=off</programlisting>
                  </listitem>
 			
                  <listitem id="lid106e57" remap="step">
                     <para remap="#PCDATA">
 				
                        <phrase id="phrsd106e59" remap="cmd">Install the distro as you would normally would. Do not use <literal id="cdphd106e61" remap="codeph">lvm</literal> or <literal id="cdphd106e64" remap="codeph">md</literal> and install everything in one partition. Remember the partition in which the distro is installed.</phrase>
 				
 				
                     </para>
                     <important id="importantd106e69" remap="note">
                        <para remap="#PCDATA">Most distributions will remember the network interfaces by the MAC
 					address, so interfaces will always be the same (that is, <literal id="cdphd106e71" remap="codeph">eth0</literal> and
 					<literal id="cdphd106e74" remap="codeph">eth1</literal> will not be inverted accidentally). In Eucalyptus you have to get the
 					distribution to forget the NIC, so that every instance will see the interface as the first
 					interface. To do so you may want to refer to the specific distribution. For example Debian and
 					Ubuntu use <literal id="cdphd106e77" remap="codeph">udev</literal> so check <filename id="flpthd106e80" remap="filepath">/etc/udev/rules.d/*net*</filename>. CentOS
 					might have something in <filename id="flpthd106e83" remap="filepath">/etc/network-scripts/ifcfg-eth0</filename>. Failure to do so
 					may leave your instance without network.</para>
                     </important>
                  </listitem>
 		
                  <listitem id="lid106e88" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd106e90" remap="cmd">Find out the starting block and the block size of the root file system.</phrase>
 			
                     </para>
                     <programlisting id="cdblkd106e95" remap="codeblock">parted &lt;image_name&gt;</programlisting>
                  </listitem>
 		
                  <listitem id="lid106e100" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd106e102" remap="cmd">Change the units to blocks.</phrase>
 			
                     </para>
                     <programlisting id="cdblkd106e107" remap="codeblock">(parted) u
Unit? [compact]? b</programlisting>
                  </listitem>
 		
                  <listitem id="lid106e112" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd106e114" remap="cmd">Print the current partition table using <literal id="cdphd106e116" remap="codeph">p</literal>.</phrase>
 			
                     </para>
                     <para remap="#PCDATA">Note the start for the partition you are interested in and the size. For this
 				example we'll say that the start is <literal id="cdphd106e122" remap="codeph">32256</literal> and the size is <literal id="cdphd106e125" remap="codeph">1024000</literal>.</para>
                  </listitem>
 		
                  <listitem id="lid106e130" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd106e132" remap="cmd">Extract the file system.</phrase>
 			
                     </para>
                     <programlisting id="cdblkd106e137" remap="codeblock">dd if=&lt;image_name&gt; of=rootfs.img bs=1 skip=32256 count=1024000</programlisting>
                     <tip id="warningd106e140" remap="note">
                        <para remap="#PCDATA">To speed up the process, you can increase the block size. Divide the size and
 					the skip count by the new block size (512 in this example) and you get
 					<literal id="cdphd106e142" remap="codeph">dd if=&lt;image_name&gt; of=rootfs.img bs=512 skip=63 count=2000</literal>.</para>
                     </tip>
                  </listitem>
 	
               </orderedlist>
 	
               <para id="sctnd106e149" remap="result">You now have a root filesystem. Make sure that it is compatible with the kernel/initrd you are using in your
 		cloud environment. In particular you may want to be sure you have the
 		modules of the kernel you are going to use. Then you are ready to <xref linkend="add_existing" id="xrefd106e151" remap="xref"/> to
 		Eucalyptus.</para>
 	
            </section>
            <section remap="concept" id="conceptId">
               <title id="ttld107e3" remap="title">Create Windows Image (KVM)</title>
               <para id="parad107e6" remap="shortdesc"/>
 	
               <para id="parad107e10" remap="p">We recommend that you perform this task on an NC (or the host running the same Linux distributions and hypervisors as the NC). If you are creating the Windows image on a machine currently running the NC, terminate all running instances and stop the NC. To stop the NC, enter: </para>
 	
               <programlisting id="cdblkd107e13" remap="codeblock">service eucalyptus-nc stop</programlisting>
 	
               <para id="parad107e16" remap="p">Included with the installation are template files that closely match those that Eucalyptus will
 		generate at VM instantiation time. The file for KVM
 		(<filename id="flpthd107e18" remap="filepath">libvirt-xen-windows-example.xml</filename>) is located at
 		<filename id="flpthd107e21" remap="filepath">/usr/share/eucalyptus/doc/</filename>. We recommend that you review this
 		file to acquaint yourself with its contents, noting required files, bridges, and resources. For
 		more information about configuring the libvirt.xml file, go to the <ulink url="http://libvirt.org/formatdomain.html" type="" id="linkd107e24" remap="xref">Domain XML format</ulink> page in the
 		libvirt documentation.</para>
 
               <section remap="task" id="images_kvm_win_baseos">
                  <title id="ttld116e3" remap="title">Install Base Windows OS</title>
                  <para id="parad116e6" remap="shortdesc"/>
		
                  <para id="parad116e14" remap="p">The first task for creating a Windows image is installing a base Windows operating system (OS). To
				install a base Windows OS:</para>
		
                  <orderedlist id="old116e18" remap="steps">
			
                     <listitem id="lid116e20" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd116e22" remap="cmd">Log in to the stopped NC server or a host that runs the same hypervisor as the NCs.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid116e26" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd116e28" remap="cmd">Create a blank disk file. Specify your Windows VM image name using the parameter <literal id="cdphd116e30" remap="codeph">of</literal>.</phrase>
				
                        </para>
                        <programlisting id="cdblkd116e36" remap="codeblock">dd if=/dev/zero of=windows.&lt;image_name&gt;.img bs=1M count=1 seek=16999</programlisting>
                        <important id="importantd116e39" remap="note">
                           <para remap="#PCDATA">Your image name must start with the word, <literal id="cdphd116e41" remap="codeph">windows</literal> (all
						lower-case).</para>
                        </important>
                     </listitem>
			
                     <listitem remap="step" id="kvm_win_secondary_disk">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd116e49" remap="cmd">Create a floppy and secondary blank disk to be attached to the image later, in order to test paravirtualization drivers</phrase>
				
                        </para>
                        <programlisting id="cdblkd116e54" remap="codeblock">dd if=/dev/zero of=floppy.img \
	bs=1k count=1474
	dd if=/dev/zero of=secondary.img \
	bs=1M count=1 seek=1000</programlisting>
                     </listitem>
			
                     <listitem id="lid116e59" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd116e61" remap="cmd">Make available the .iso file that contains your Windows installation CD/DVD, then copy the
					.iso file to your working directory (<filename id="flpthd116e63" remap="filepath">/usr/share/eucalyptus/doc/</filename>).</phrase>
				
			
                        </para>
                     </listitem>
			
                     <listitem id="lid116e68" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd116e70" remap="cmd">Copy the <filename id="flpthd116e72" remap="filepath">libvirt-kvm-windows-example.xml</filename> file to your working
					directory and rename it to <filename id="flpthd116e75" remap="filepath">libvirt-kvm-windows.xml</filename>.</phrase>
				
                        </para>
                        <programlisting id="cdblkd116e81" remap="codeblock">cp libvirt-kvm-windows-example.xml /usr/share/eucalyptus/doc/libvirt-kvm-windows.xml</programlisting>
                     </listitem>
			
                     <listitem id="lid116e86" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd116e88" remap="cmd">Open the new <filename id="flpthd116e90" remap="filepath">libvirt-kvm-windows.xml</filename> file and provide
					fully qualified paths to the VM image file and iso. Make sure that the name of the bridge is the same as the one used by the hypervisor on which you are creating the Windows image.</phrase>
				
				
                        </para>
                        <para id="parad116e98" remap="p">Your file should look similar to this example:</para>
                        <programlisting id="cdblkd116e101" remap="codeblock">&lt;domain type='kvm'&gt;
	  &lt;name&gt;eucalyptus-windows&lt;/name&gt;
    &lt;os&gt;
    &lt;type&gt;hvm&lt;/type&gt;
    &lt;boot dev='cdrom'/&gt;
    &lt;/os&gt;
    &lt;features&gt;
        &lt;acpi/&gt;
    &lt;/features&gt;
    &lt;memory&gt;524288&lt;/memory&gt;
    &lt;vcpu&gt;1&lt;/vcpu&gt;
    &lt;devices&gt;
        &lt;emulator&gt;/usr/bin/kvm&lt;/emulator&gt;
        &lt;disk type='file'&gt;
            &lt;source file='/root/windows_2003.img'/&gt;
            &lt;target dev='hda'/&gt;
        &lt;/disk&gt;
        &lt;!-- &lt;disk type='file' device='disk'&gt;
             &lt;source file='fully_qualified_path_to_secondary_disk'/&gt;
             &lt;target dev='vda' bus='virtio'/&gt;
        &lt;/disk&gt; 
        &lt;disk type='file' device='floppy'&gt;
             &lt;source file='fully_qualified_path_to_floppy_disk'/&gt;
             &lt;target dev='fda'/&gt;
        &lt;/disk&gt; --&gt;
        &lt;disk type='file' device='cdrom'&gt;
            &lt;source file='/root/en_win_srv_2003_r2_enterprise_with_sp2_cd1_x13-05460.iso'/&gt;
            &lt;target dev='hdc'/&gt;
            &lt;readonly/&gt;
        &lt;/disk&gt;
        &lt;interface type='bridge'&gt;
            &lt;source bridge='br0'/&gt;
            &lt;model type='rtl8139'/&gt;
        &lt;/interface&gt;
        &lt;!--&lt;interface type='bridge'&gt;
            &lt;source bridge='br0'/&gt;
            &lt;model type='virtio'/&gt; 
        &lt;/interface&gt; --&gt;
        &lt;graphics type='vnc' port='-1' autoport='yes' listen='0.0.0.0'/&gt;
    &lt;/devices&gt;
&lt;/domain&gt;</programlisting>
                     </listitem>
			
                     <listitem id="lid116e106" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd116e108" remap="cmd">Start the VM.</phrase>
				
                        </para>
                        <programlisting id="cdblkd116e113" remap="codeblock">virsh create libvirt-kvm-windows.xml</programlisting>
                     </listitem>
			
                     <listitem id="lid116e118" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd116e120" remap="cmd">Connect to the virtual console using the VNC client of your choice. On the NC, check the
					display number that has been allocated by looking at the process table (<literal id="cdphd116e122" remap="codeph">ps axw | grep vnc</literal>). For example, if the display number is 0, then connect to the NC using the VNC client:</phrase>
				
                        </para>
                        <programlisting id="cdblkd116e128" remap="codeblock">vinagre &lt;machine-hosting-vm&gt;:0</programlisting>
                     </listitem>
			
                     <listitem id="lid116e133" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd116e135" remap="cmd">Follow the standard Windows installation procedure until the VM has completed installing Windows.</phrase>
				
                        </para>
                        <tip id="warningd116e140" remap="note">
                           <para remap="#PCDATA">On some hosts, the VNC’s display number will change when an image restarts. Use <literal id="cdphd116e142" remap="codeph">ps</literal> to find the current number.</para>
                        </tip>
                     </listitem>
			
                     <listitem id="lid116e148" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd116e150" remap="cmd">Run <literal id="cdphd116e152" remap="codeph">virsh</literal> list to display the domain name.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid116e157" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd116e159" remap="cmd">Shut down the Windows VM you have just created. The easiest way to shutdown your VM is to
					use the <literal id="cdphd116e161" remap="codeph">virsh destroy</literal> command, as shown:</phrase>
				
                        </para>
                        <programlisting id="cdblkd116e167" remap="codeblock">virsh destroy &lt;domain_name&gt;</programlisting>
                     </listitem>
		
                  </orderedlist>
		
                  <para id="sctnd116e173" remap="postreq">You are now ready to <xref linkend="image_kvm_win_wis" id="xrefd116e175" remap="xref"/>.</para>
	
               </section>
               <section remap="task" id="image_kvm_win_wis">
                  <title id="ttld117e5" remap="title">Install Eucalyptus Windows Integration</title>
                  <para id="parad117e8" remap="shortdesc"/>
		
                  <para id="parad117e14" remap="p">To install Eucalyptus Windows Integration:</para>
		
                  <orderedlist id="old117e18" remap="steps">
			
                     <listitem id="lid117e20" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd117e22" remap="cmd">Use yum or apt-get to download the Eucalyptus tool. </phrase>
				
                        </para>
                        <programlisting id="cdblkd117e27" remap="codeblock">yum install eucalyptus-windows-tools
apt-get install eucalyptus-windows-tools</programlisting>
                     </listitem>
			
                     <listitem id="lid117e32" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd117e34" remap="cmd">Copy <filename id="flpthd117e36" remap="filepath">/usr/share/eucalyptus/eucawin.iso</filename> to the working directory of your NC.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid117e41" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd117e43" remap="cmd">Open the libvirt-kvm-windows-example.xml file and make the following edits:</phrase>
				
                        </para>
                        <itemizedlist id="uld117e48" remap="ul">
						
                           <listitem id="lid117e50" remap="li">
                              <para remap="#PCDATA">Comment out the lines of XML code directing KVM to boot the Windows image from the CDROM.</para>
                           </listitem>
						
                           <listitem id="lid117e53" remap="li">
                              <para remap="#PCDATA">Change the text so that <literal id="cdphd117e55" remap="codeph">eucawin.iso</literal> replaces the Windows .iso image and is mounted as <literal id="cdphd117e58" remap="codeph">cdrom</literal>.</para>
                           </listitem>
						
                           <listitem id="lid117e62" remap="li">
                              <para remap="#PCDATA">Enter the path to the secondary disk file you created in the <xref linkend="images_kvm_win_baseos" id="xrefd117e64" remap="xref"/>.</para>
                           </listitem>
						
                           <listitem id="lid117e68" remap="li">
                              <para remap="#PCDATA">Uncomment the lines that direct attachment of a floppy disk, secondary disk, and secondary network interface.</para>
                           </listitem>
					
                        </itemizedlist>
                        <para id="parad117e72" remap="p">Your finished file should look similar to the following example:</para>
                        <programlisting id="cdblkd117e75" remap="codeblock">&lt;domain type="kvm"&gt;
	  &lt;name&gt;eucalyptus-windows&lt;/name&gt;
    &lt;os&gt;
    &lt;type&gt;hvm&lt;/type&gt;
    &lt;!-- &lt;boot dev='cdrom'/&gt; --&gt;
    &lt;/os&gt;
    &lt;features&gt;
        &lt;acpi/&gt;
    &lt;/features&gt;
    &lt;memory&gt;524288&lt;/memory&gt;
    &lt;vcpu&gt;1&lt;/vcpu&gt;
    &lt;devices&gt;
        &lt;emulator&gt;/usr/bin/kvm&lt;/emulator&gt;
        &lt;disk type='file'&gt;
            &lt;source file='/root/windows_2003.img'/&gt;
            &lt;target dev='hda'/&gt;
        &lt;/disk&gt;
        &lt;disk type='file' device='disk'&gt;
             &lt;source file='/root/secondary.img'/&gt;
             &lt;target dev='vda' bus='virtio'/&gt;
        &lt;/disk&gt; 
        &lt;disk type='file' device='floppy'&gt;
             &lt;source file='/root/floppy.img'/&gt;
             &lt;target dev='fda'/&gt;
        &lt;/disk&gt;
        &lt;disk type='file' device='cdrom'&gt;
            &lt;source file='eucawin.iso'/&gt;
            &lt;target dev='hdc'/&gt;
            &lt;readonly/&gt;
        &lt;/disk&gt;
        &lt;interface type='bridge'&gt;
            &lt;source bridge='br0'/&gt;
            &lt;model type='rtl8139'/&gt;
        &lt;/interface&gt;
        &lt;interface type='bridge'&gt;
            &lt;source bridge='br0'/&gt;
            &lt;model type='virtio'/&gt; 
        &lt;/interface&gt;
        &lt;graphics type='vnc' port='-1' autoport='yes' listen='0.0.0.0'/&gt;
    &lt;/devices&gt;
&lt;/domain&gt;</programlisting>
                     </listitem>
			
                     <listitem id="lid117e80" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd117e82" remap="cmd">Log in to Windows and find the Eucalyptus installation files in the CDROM drive.</phrase>
				
                        </para>
                        <itemizedlist id="uld117e85" remap="choices">
					
                           <listitem id="lid117e87" remap="choice">
                              <para remap="#PCDATA">For Windows Server 2003 R2, run <literal id="cdphd117e89" remap="codeph">setup.exe</literal>.</para>
                           </listitem>
					
                           <listitem id="lid117e93" remap="choice">
                              <para remap="#PCDATA">For all others, run <literal id="cdphd117e95" remap="codeph">EucalyptusWindowsIntegration.msi</literal>. (setup.exe will automatically install .NET framework 2.0, which is not bundled in Server 2003 R2).</para>
                           </listitem>
				
                        </itemizedlist>
                     </listitem>
			
                     <listitem id="lid117e101" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd117e103" remap="cmd">In the <guilabel id="uictrld117e105" remap="uicontrol">Choose your hypervisor</guilabel> step, click <guilabel id="uictrld117e108" remap="uicontrol">KVM</guilabel> and then click <guilabel id="uictrld117e111" remap="uicontrol">Next</guilabel>.</phrase>
				
                        </para>
                        <para remap="#PCDATA">
                           <mediaobject id="imgd117e116" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_hypervisor.jpg"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Eucalyptus Windows Integrator      select hypervisor window</phrase>
                              </textobject>
                           </mediaobject> 
                           <remark id="spd117e118" remap="draft-comment">Should this be a separate section, like Active
						Directory and Remote Desktop? Scot: maybe combine all into one process file of separate tasks.</remark>
                        </para>
                        <para remap="#PCDATA">During the installation of KVM VirtIO drivers, warning messages might appear asking to
					confirm the driver installation. Click <guilabel id="uictrld117e123" remap="uicontrol">Continue</guilabel> in all cases.</para>
                     </listitem>
			
                     <listitem id="lid117e128" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd117e130" remap="cmd">At the <guilabel id="uictrld117e132" remap="uicontrol">Welcome to the Found New Hardware Wizard</guilabel>, click
					<guilabel id="uictrld117e135" remap="uicontrol">Next</guilabel>. </phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid117e140" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd117e142" remap="cmd">Choose <guilabel id="uictrld117e144" remap="uicontrol">Install Software
					Automatically…</guilabel> and click <guilabel id="uictrld117e147" remap="uicontrol">Next</guilabel>.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid117e152" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd117e154" remap="cmd">Reboot the Windows VM</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid117e158" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd117e160" remap="cmd">Open the Windows device manager and check that the following drivers are found for
					each device:</phrase>
				
                        </para>
                        <itemizedlist id="uld117e165" remap="ul">
						
                           <listitem id="lid117e167" remap="li">
                              <para remap="#PCDATA">Floppy disk drive</para>
                           </listitem>
						
                           <listitem id="lid117e170" remap="li">
                              <para remap="#PCDATA">Disk drivers: Red Hat VirtIO SCSI Disk Device</para>
                           </listitem>
						
                           <listitem id="lid117e173" remap="li">
                              <para remap="#PCDATA">SCSI and RAID controllers: Red Hat VirtIO SCSI controller</para>
                           </listitem>
						
                           <listitem id="lid117e176" remap="li">
                              <para remap="#PCDATA">Network adapters: Red Hat VirtIO Ethernet Adapter</para>
                           </listitem>
					
                        </itemizedlist>
                        <para remap="#PCDATA">If the correct drivers are not found, question marks display on the devices.
					</para>
                        <itemizedlist id="uld117e183" remap="ul">
						
                           <listitem id="lid117e185" remap="li">
                              <para remap="#PCDATA">Right-click on the devices in question and run update drivers. The new hardware wizard displays.
						</para>
                           </listitem>
						
                           <listitem id="lid117e188" remap="li">
                              <para remap="#PCDATA">When the new hardware wizard asks if Windows update is to be connected, click <guilabel id="uictrld117e190" remap="uicontrol">No, not this time</guilabel>.</para>
                           </listitem>
						
                           <listitem id="lid117e194" remap="li">
                              <para remap="#PCDATA">Choose <guilabel id="uictrld117e196" remap="uicontrol">Install software automatically (recommended)</guilabel>.</para>
                           </listitem>
						
                           <listitem id="lid117e200" remap="li">
                              <para remap="#PCDATA">If a confirmation popup message displays, click <guilabel id="uictrld117e202" remap="uicontrol">Continue</guilabel>.</para>
                           </listitem>
					
                        </itemizedlist>
                     </listitem>
		
                  </orderedlist>
		
                  <para id="sctnd117e210" remap="postreq">You are now ready to <xref linkend="images_kvm_win_ad" id="xrefd117e212" remap="xref"/>.</para>
	
               </section>
               <section remap="task" id="images_kvm_win_ad">
                  <title id="ttld118e3" remap="title">Configure Active Directory</title>
                  <para id="parad118e6" remap="shortdesc"/>
		
                  <para id="parad118e12" remap="p">The Eucalyptus Integration service lets an enterprise with existing Active Directory
				domains attach Windows instances to the domains and control access to these instances using the existing AD user database. Users can log into the instance either using their domain credentials or the Administrator’s password generated with the <command id="cmdnmd118e14" remap="cmdname">euca-get-password</command> command. </para>
                  <para id="parad118e18" remap="p">Because AD technology is tightly integrated with domain name service (DNS), the default name server contacted by the instance must be able to resolve the AD address as a proper domain controller. You can do this for all networking modes except System, by configuring the following line the CC’s eucalyptus.conf file:</para>
                  <programlisting id="cdblkd118e21" remap="codeblock">VNET_DNS=&lt;domain_controller_IP_address&gt;</programlisting>
                  <para id="parad118e24" remap="p">If there is no such pre-existing DNS set-up or your networking mode is System, you might need to change the VM’s network interface so that the preferred DNS server points to the domain controller. </para>
                  <para id="parad118e27" remap="p">To set up Active Directory:
			</para>
		
                  <orderedlist id="old118e31" remap="steps">
			
                     <listitem id="lid118e33" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd118e35" remap="cmd">Click <menuchoice id="mncscdd118e37" remap="menucascade">
                                 <guimenu id="mnuictrld118e38" remap="uicontrol">Windows Programs</guimenu>
                                 <guisubmenu id="mnuictrld118e41" remap="uicontrol">Eucalyptus</guisubmenu>
                                 <guimenuitem id="mnuictrld118e44" remap="uicontrol">Eucalyptus Setup</guimenuitem>
                              </menuchoice>. </phrase>
				
                        </para>
                        <para remap="#PCDATA">
                           <mediaobject id="imgd118e49" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_win_start.jpg"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Eucalyptus setup selection</phrase>
                              </textobject>
                           </mediaobject>
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld118e53" remap="uicontrol">Eucalyptus Windows Integration</guilabel> popup displays.</para>
                     </listitem>
			
                     <listitem id="lid118e58" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd118e60" remap="cmd">Click the <guilabel id="uictrld118e62" remap="uicontrol">Active Directory</guilabel> tab in the Eucalyptus Windows Integration window and enter the following information:</phrase>
				
                        </para>
                        <para remap="#PCDATA">
					
                           <mediaobject id="imgd118e68" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_ad.jpg"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Active Directory tab</phrase>
                              </textobject>
                           </mediaobject>
					
                        </para>
                        <itemizedlist id="uld118e70" remap="ul">
						
                           <listitem id="lid118e72" remap="li">
                              <para remap="#PCDATA">Enter the address of the existing Active Directory domain controller in the <guilabel id="uictrld118e74" remap="uicontrol">AD Address</guilabel> field.</para>
                           </listitem>
						
                           <listitem id="lid118e78" remap="li">
                              <para remap="#PCDATA">Enter the administrator username in the <guilabel id="uictrld118e80" remap="uicontrol">Admin Username</guilabel> field. We recommend using a generic user account that has permission to join a computer to a domain or a specific organizational unit.</para>
                           </listitem>
						
                           <listitem id="lid118e84" remap="li">
                              <para remap="#PCDATA">Enter and confirm the password in the <guilabel id="uictrld118e86" remap="uicontrol">Admin Password</guilabel> field.
							Note that the Admin username and password are required to join an instance to an Active
							Directory. When launched in Eucalyptus, these properties will be deleted as soon as the instance joins (or fails to join) the domain.</para>
                           </listitem>
						
                           <listitem id="lid118e90" remap="li">
                              <para remap="#PCDATA">Optionally, enter an organizational unit in the <guilabel id="uictrld118e92" remap="uicontrol">Organizational Unit</guilabel> field. This specifies a container that the instances launched from this image will be attach to.</para>
                           </listitem>
					
                        </itemizedlist>
                        <tip id="warningd118e97" remap="note">
                           <para remap="#PCDATA">If the values entered in this section are incorrect, the launched
						instances will fail to join the domain. We recommend that you verify the information by
						manually joining a computer to a domain using the same information that you entered in this
						step. You may first log in the launched instance using administrator password
						(<command id="cmdnmd118e99" remap="cmdname">euca-get-passcword</command>) and manually join the domain for verification.</para>
                        </tip>
                     </listitem>
			
                     <listitem id="lid118e105" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd118e107" remap="cmd">Click <guilabel id="uictrld118e109" remap="uicontrol">Apply</guilabel>.</phrase>
			
                        </para>
                     </listitem>
		
                  </orderedlist>
		
                  <para id="sctnd118e115" remap="postreq">You are now ready to <xref linkend="images_kvm_win_rdp" id="xrefd118e117" remap="xref"/>.
		</para>
	
               </section>
               <section remap="task" id="images_kvm_win_rdp">
                  <title id="ttld119e3" remap="title">Configure Remote Desktop</title>
                  <para id="parad119e6" remap="shortdesc"/>
		
                  <para id="parad119e12" remap="p">Domain users or groups require remote desktop permission to log into an instance. By
				default, only the local administrator has the remote desktop permission. The Eucalyptus Integration Service provides a way to grant remote desktop permission to additional domain users or groups.</para>
                  <para id="parad119e15" remap="p">To configure remote desktop permission:</para>
		
                  <orderedlist id="old119e19" remap="steps">
			
                     <listitem id="lid119e21" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd119e23" remap="cmd">Open the <guilabel id="uictrld119e25" remap="uicontrol">Eucalyptus Windows Integration</guilabel> popup (<menuchoice id="mncscdd119e28" remap="menucascade">
                                 <guimenu id="mnuictrld119e29" remap="uicontrol">Windows Programs</guimenu>
                                 <guisubmenu id="mnuictrld119e32" remap="uicontrol">Eucalyptus</guisubmenu>
                                 <guimenuitem id="mnuictrld119e35" remap="uicontrol">Eucalyptus
						Setup</guimenuitem>
                              </menuchoice>).</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid119e40" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd119e42" remap="cmd">Click the <guilabel id="uictrld119e44" remap="uicontrol">RemoteDesktop</guilabel> tab</phrase>
				
                        </para>
                        <para remap="#PCDATA">
                           <mediaobject id="imgd119e49" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_rd.jpg" align="center"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">RemoteDesktop tab</phrase>
                              </textobject>
                           </mediaobject>
                        </para>
                        <para remap="#PCDATA">The names of authorized domain users and groups display in the <guilabel id="uictrld119e53" remap="uicontrol">Authorized User/Groups</guilabel> field. By default, only the local administrator is listed as authorized.</para>
                     </listitem>
			
                     <listitem id="lid119e58" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd119e60" remap="cmd">In the text field below the list, enter a user and group account name in the format <literal id="cdphd119e62" remap="codeph">[DOMAIN]\[USER or GROUP]</literal>. If you add a new local user or local group, prepend the account name <literal id="cdphd119e65" remap="codeph">localhost\</literal> instead of the domain name.</phrase>
				
                        </para>
                        <para remap="#PCDATA">
                           <remark id="spd119e70" remap="draft-comment">Get new image or discard.</remark>
					
                           <mediaobject id="imgd119e73" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/rdt01.png"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Example of Authorized       Users/Groups configuration</phrase>
                              </textobject>
                           </mediaobject>
					
				
                        </para>
                     </listitem>
			
                     <listitem id="lid119e77" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd119e79" remap="cmd">Click <guilabel id="uictrld119e81" remap="uicontrol">Add</guilabel>.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid119e86" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd119e88" remap="cmd">Repeat for all user/groups that you want to add.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid119e92" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd119e94" remap="cmd">Click <guilabel id="uictrld119e96" remap="uicontrol">Apply</guilabel>.</phrase>
				
                        </para>
                        <para remap="#PCDATA">When the instance launches, the members of the groups you added can log in to the instance through remote desktop.</para>
                     </listitem>
		
                  </orderedlist>
		
                  <para id="sctnd119e105" remap="postreq">You are now ready to <xref linkend="images_kvm_win_sysprep" id="xrefd119e107" remap="xref"/>.</para>
	
               </section>
               <section remap="task" id="images_kvm_win_sysprep">
                  <title id="ttld120e3" remap="title">Run Sysprep</title>
                  <para id="parad120e6" remap="shortdesc"/>
		
                  <para id="parad120e12" remap="p">Sysprep is a Microsoft tool for deploying multiple Windows operating systems in an
				enterprise. Running Sysprep removes system-specific information such as security ID (SID)
				from the Windows OS before you clone an image. Sysprep then re-initializes the OS after
				the image is cloned and started on multiple computers. Use Sysprep to prepare images when
				you use Microsoft Key Management Service to activate license keys. Also, use Sysprep when your Windows systems are attached to Active Directory.</para>
                  <para id="parad120e15" remap="p">In Eucalyptus, you can run Sysprep before you bundle images with the
				<literal id="cdphd120e17" remap="codeph">euca-bundle-image</literal> or <literal id="cdphd120e20" remap="codeph">euca-bundle-instance</literal> commands. </para>
                  <para id="parad120e27" remap="p">To configure and run Sysprep:</para>
		
                  <orderedlist id="old120e31" remap="steps">
			
                     <listitem id="lid120e33" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd120e35" remap="cmd">Open the <guilabel id="uictrld120e37" remap="uicontrol">Eucalyptus Windows Integration</guilabel> popup (<menuchoice id="mncscdd120e40" remap="menucascade">
                                 <guimenu id="mnuictrld120e41" remap="uicontrol">Windows Programs</guimenu>
                                 <guisubmenu id="mnuictrld120e44" remap="uicontrol">Eucalyptus</guisubmenu>
                                 <guimenuitem id="mnuictrld120e47" remap="uicontrol">Eucalyptus
					Setup</guimenuitem>
                              </menuchoice>).</phrase>
				
                        </para>
                        <para remap="#PCDATA">
                           <mediaobject id="imgd120e52" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_gen.jpg"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Eucalyptus Windows Integration      window</phrase>
                              </textobject>
                           </mediaobject>
                        </para>
                     </listitem>  
			
                     <listitem id="lid120e55" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd120e57" remap="cmd">Click the <guilabel id="uictrld120e59" remap="uicontrol">General</guilabel> tab.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid120e64" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd120e66" remap="cmd">Ensure that <guilabel id="uictrld120e68" remap="uicontrol">Format uninitialized drives</guilabel> is checked</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid120e73" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd120e75" remap="cmd">If you want to edit the Sysprep answer file, click the <guilabel id="uictrld120e77" remap="uicontrol">Open and change</guilabel> button in the General tab. Otherwise skip this step.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid120e82" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd120e84" remap="cmd">Click the <guilabel id="uictrld120e86" remap="uicontrol">Run Sysprep</guilabel> button.</phrase>
				
				
                        </para>
                        <para remap="#PCDATA">Sysprep starts.</para>
                     </listitem>
			
                     <listitem id="lid120e94" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd120e96" remap="cmd">After Sysprep is complete, close the application and shutdown the Windows VM using the Windows Programs menu.</phrase>
			
                        </para>
                     </listitem>
		
                  </orderedlist>
		
                  <para id="sctnd120e101" remap="postreq">You are now ready to <xref linkend="images_kvm_win_add" id="xrefd120e103" remap="xref"/>.</para>
	
               </section>
               <section remap="task" id="images_kvm_win_add">
                  <title id="ttld121e3" remap="title">Add Image to Eucalyptus</title>
                  <para id="parad121e6" remap="shortdesc"/>
		
                  <para id="parad121e12" remap="p">To enable an image as an executable entity, you must bundle and upload the Windows disk
				image to Walrus, and then register the uploaded image with Eucalyptus.</para>
		
                  <orderedlist id="old121e16" remap="steps">
			
                     <listitem id="lid121e18" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd121e20" remap="cmd">Run the following command to bundle, upload, and register your Windows disk image:</phrase>
				
                        </para>
                        <programlisting id="cdblkd121e25" remap="codeblock">euca-bundle-image -i &lt;vm_image_file&gt; 
euca-upload-bundle -b &lt;image_bucket&gt; -m /tmp/&lt;vm_image_file&gt;.manifest.xml
euca-register &lt;image_bucket&gt;/&lt;vm_image_file&gt;.manifest.xml</programlisting>
                     </listitem>
		
                  </orderedlist>
		
                  <para id="sctnd121e31" remap="result">Your Windows image is now ready to run as an instance.</para>
		
                  <para id="sctnd121e34" remap="postreq">After you register the image, Walrus decrypts the image bundle. This process might
			take a few minutes for a large Windows image to be decrypted. For example, a 10G image
			requires that you wait about 10 minutes before you launch the instance.</para>
	
               </section>
            </section>
            <section remap="task" id="images_vmw_lin">
               <title id="ttld108e3" remap="title">Create Linux Image (VMware)</title>
               <para id="parad108e6" remap="shortdesc"/>
 	
               <para id="parad108e12" remap="p">To create a root filesystem to be used with Eucalyptus using VMware and an ISO image of the guest
 			OS you want to install:</para>
 	
               <orderedlist id="old108e16" remap="steps">
 		
                  <listitem id="lid108e18" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd108e20" remap="cmd">Run an instance of the image.</phrase>
 		
                     </para>
                  </listitem>
 		
 		
                  <listitem id="lid108e24" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd108e26" remap="cmd">Attach a volume to the instance.</phrase>
 			
                     </para>
                     <programlisting id="cdblkd108e31" remap="codeblock">euca-attach-volume -i &lt;instance_id&gt; -d &lt;local_device_name&gt; &lt;volume_id&gt;</programlisting>
                  </listitem>
 		
                  <listitem id="lid108e36" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd108e38" remap="cmd">Make a file system on the volume and mount it to <filename id="flpthd108e40" remap="filepath">/mnt</filename>.</phrase>
 			
                     </para>
                     <programlisting id="cdblkd108e46" remap="codeblock">mkfs -t ext3 /dev/vdb
mount /dev/vdb /mnt</programlisting>
                  </listitem>
 		
                  <listitem id="lid108e51" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd108e53" remap="cmd">SCP your Eucalyptus credential zip file to the instance.</phrase>
 			
                     </para>
                     <programlisting id="cdblkd108e58" remap="codeblock">scp -i yourkey.private euca2-xxxxxxx-x509.zip root@xxx.xxx.xxx.xxx:/mnt</programlisting>
                  </listitem>
 		
                  <listitem id="lid108e63" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd108e65" remap="cmd">SSH into the instance.</phrase>
 			
                     </para>
                     <programlisting id="cdblkd108e70" remap="codeblock">ssh -i yourkey.private root@xxx.xxx.xxx.xxx</programlisting>
                  </listitem>
 		
                  <listitem id="lid108e75" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd108e77" remap="cmd">Install the tools you need.</phrase>
 			
                     </para>
                     <programlisting id="cdblkd108e82" remap="codeblock">yum install rsync unzip</programlisting>
                  </listitem>
 		
                  <listitem id="lid108e87" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd108e89" remap="cmd">Change to the <filename id="flpthd108e91" remap="filepath">/mnt</filename> device.</phrase>
 			
                     </para>
                     <programlisting id="cdblkd108e97" remap="codeblock">cd /mnt</programlisting>
                  </listitem>
 		
                  <listitem id="lid108e102" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd108e104" remap="cmd">Unzip your Eucalyptus credentials zip to <filename id="flpthd108e106" remap="filepath">/mnt/euca</filename>.</phrase>
 			
                     </para>
                     <programlisting id="cdblkd108e112" remap="codeblock">unzip euca2-admin-x509.zip -d euca/</programlisting>
                  </listitem>
 		
                  <listitem id="lid108e117" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd108e119" remap="cmd">Install any other software you want on the instance so it will be part of your new image.</phrase>
 		
                     </para>
                  </listitem>
 		
                  <listitem id="lid108e123" remap="step">
                     <para remap="#PCDATA">
 			
                        <phrase id="phrsd108e125" remap="cmd">Remove the udev rules. </phrase>
 			
                     </para>
                     <programlisting id="cdblkd108e130" remap="codeblock">rm /etc/udev/rules.d/70*</programlisting>
                  </listitem>
 	
               </orderedlist>
 	
               <para id="sctnd108e136" remap="result">You now have a root filesystem. Make sure that it is compatible with the kernel/initrd you are using in your
 		cloud environment. In particular you may want to be sure you have the
 		modules of the kernel you are going to use. Then you are ready to <xref linkend="add_existing" id="xrefd108e138" remap="xref"/> to
 		Eucalyptus.</para>
 
            </section>
            <section remap="concept" id="images_vmw_win">
               <title id="ttld109e3" remap="title">Create Windows Image (VMware)</title>
               <para id="parad109e6" remap="shortdesc"/>
 	
               <para id="parad109e10" remap="p">To create an image from a Windows OS in VMware you will need one network interface and one disk.
 		This disk must be the first IDE disk. Follow the tasks listed in this section.</para>
 
               <section remap="task" id="images_vmw_win_baseos">
                  <title id="ttld122e3" remap="title">Install the Base Windows OS</title>
                  <para id="parad122e6" remap="shortdesc"/>
        
                  <para id="parad122e12" remap="p">To install the base Windows operating system (OS):	</para>
        
                  <orderedlist id="old122e16" remap="steps">
            
                     <listitem id="lid122e18" remap="step">
                        <para remap="#PCDATA">
            	
                           <phrase id="phrsd122e20" remap="cmd">Create a new VM using the VMware vSphere Client following the standard VMware procedures.</phrase>
            	
                        </para>
                     </listitem>
        	
                     <listitem id="lid122e30" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd122e32" remap="cmd">Install the Windows OS following standard VMware procedures. </phrase>
        	
                        </para>
                     </listitem>
        	
                     <listitem id="lid122e36" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd122e38" remap="cmd">Install VMware Tools.</phrase>
        	
                        </para>
                     </listitem>
        
                  </orderedlist>
    	
                  <para id="sctnd122e43" remap="postreq">You are now ready to <xref linkend="images_vmw_win_wis" id="xrefd122e45" remap="xref"/>.</para>
    
               </section>
               <section remap="task" id="images_vmw_win_wis">
                  <title id="ttld123e3" remap="title">Install Eucalyptus Windows Integration</title>
                  <para id="parad123e6" remap="shortdesc"/>
        
                  <para id="parad123e12" remap="p">To install the Eucalyptus Windows Integration Service:</para>
        
                  <orderedlist id="old123e16" remap="steps">
        	
                     <listitem id="lid123e18" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd123e20" remap="cmd">Use yum or apt-get to download the Eucalyptus tool. </phrase>
        		
                        </para>
                        <programlisting id="cdblkd123e25" remap="codeblock">yum install eucalyptus-windows-tools
apt-get install eucalyptus-windows-tools</programlisting>
                     </listitem>  
        	
                     <listitem id="lid123e30" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd123e32" remap="cmd">Copy <filename id="flpthd123e34" remap="filepath">$EUCALYPTUS/usr/share/eucalyptus/eucawin.iso</filename> to the Windows
        			host that runs vSphere client. You might need SFTP client on the Windows host. </phrase>
            	
        	
                        </para>
                     </listitem>
        	
                     <listitem id="lid123e39" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd123e41" remap="cmd">Use the VMware vSphere client to upload the ISO file to the VSphere datastore.</phrase>
        	
                        </para>
                     </listitem>
        	
                     <listitem id="lid123e45" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd123e47" remap="cmd">Attach the <filename id="flpthd123e49" remap="filepath">eucawin.iso</filename> to the Windows VM.</phrase>
        	
                        </para>
                     </listitem>
        	
                     <listitem id="lid123e54" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd123e56" remap="cmd">Log in to Windows and find the Eucalyptus installation files in the CDROM drive.</phrase>
        		
                        </para>
                        <itemizedlist id="uld123e59" remap="choices">
        			
                           <listitem id="lid123e61" remap="choice">
                              <para remap="#PCDATA">For Windows Server 2003 R2, run <literal id="cdphd123e63" remap="codeph">setup.exe</literal>. This automatically installs the .NET framework 2.0, which is not bundled in Server 2003 R2.</para>
                           </listitem>
        			
                           <listitem id="lid123e67" remap="choice">
                              <para remap="#PCDATA">For all other versions, run <literal id="cdphd123e69" remap="codeph">EucalyptusWindowsIntegration.msi</literal>.</para>
                           </listitem>
        		
                        </itemizedlist>
                     </listitem>
        	
                     <listitem id="lid123e75" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd123e77" remap="cmd">In the <guilabel id="uictrld123e79" remap="uicontrol">Choose your hypervisor</guilabel> step, click
        			<guilabel id="uictrld123e82" remap="uicontrol">VMWARE</guilabel>.</phrase>
        		
                        </para>
                        <para remap="#PCDATA">
                           <mediaobject id="imgd123e87" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_hypervisor_vm.png"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Eucalyptus Windows Integrator            select hypervisor window</phrase>
                              </textobject>
                           </mediaobject> 
                           <remark id="spd123e89" remap="draft-comment">Should this be a separate section, like Active
        				Directory and Remote Desktop? Scot: maybe combine all into one process file of separate tasks.</remark>
                        </para>
                     </listitem>
        	
                     <listitem id="lid123e93" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd123e95" remap="cmd">Click <guilabel id="uictrld123e97" remap="uicontrol">Next</guilabel> and continue until the end of installation.</phrase>
        	
                        </para>
                     </listitem>
        
                  </orderedlist>
    	
                  <para id="sctnd123e103" remap="postreq">You are now ready to <xref linkend="images_vmw_win_ad" id="xrefd123e105" remap="xref"/>.</para>
    
               </section>
               <section remap="task" id="images_vmw_win_ad">
                  <title id="ttld124e3" remap="title">Configure Active Directory</title>
                  <para id="parad124e6" remap="shortdesc"/>
		
                  <para id="parad124e12" remap="p">The Eucalyptus Integration service lets an enterprise with existing Active Directory
				domains attach Windows instances to the domains and control access to these instances using the existing AD user database. Users can log into the instance either using their domain credentials or the Administrator’s password generated with the <command id="cmdnmd124e14" remap="cmdname">euca-get-password</command> command. </para>
                  <para id="parad124e18" remap="p">Because AD technology is tightly integrated with domain name service (DNS), the default name server contacted by the instance must be able to resolve the AD address as a proper domain controller. You can do this for all networking modes except System, by configuring the following line the CC’s eucalyptus.conf file:</para>
                  <programlisting id="cdblkd124e21" remap="codeblock">VNET_DNS=&lt;domain_controller_IP_address&gt;</programlisting>
                  <para id="parad124e24" remap="p">If there is no such pre-existing DNS set-up or your networking mode is System, you might need to change the VM’s network interface so that the preferred DNS server points to the domain controller. </para>
                  <para id="parad124e27" remap="p">To set up Active Directory:
			</para>
		
                  <orderedlist id="old124e31" remap="steps">
			
                     <listitem id="lid124e33" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd124e35" remap="cmd">Click <menuchoice id="mncscdd124e37" remap="menucascade">
                                 <guimenu id="mnuictrld124e38" remap="uicontrol">Windows Programs</guimenu>
                                 <guisubmenu id="mnuictrld124e41" remap="uicontrol">Eucalyptus</guisubmenu>
                                 <guimenuitem id="mnuictrld124e44" remap="uicontrol">Eucalyptus Setup</guimenuitem>
                              </menuchoice>. </phrase>
				
                        </para>
                        <para remap="#PCDATA">The <guilabel id="uictrld124e50" remap="uicontrol">Eucalyptus Windows Integration</guilabel> popup displays.</para>
                     </listitem>
			
                     <listitem id="lid124e55" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd124e57" remap="cmd">Click the <guilabel id="uictrld124e59" remap="uicontrol">Active Directory</guilabel> tab in the Eucalyptus Windows Integration window and enter the following information:</phrase>
				
                        </para>
                        <para remap="#PCDATA">
                           <mediaobject id="imgd124e64" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_ad.jpg"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Active Directory tab</phrase>
                              </textobject>
                           </mediaobject>
                        </para>
                        <itemizedlist id="uld124e68" remap="ul">
						
                           <listitem id="lid124e70" remap="li">
                              <para remap="#PCDATA">Enter the address of the existing Active Directory domain controller in the <guilabel id="uictrld124e72" remap="uicontrol">AD Address</guilabel> field.</para>
                           </listitem>
						
                           <listitem id="lid124e76" remap="li">
                              <para remap="#PCDATA">Enter the administrator username in the <guilabel id="uictrld124e78" remap="uicontrol">Admin Username</guilabel> field. We recommend using a generic user account that has permission to join a computer to a domain or a specific organizational unit.</para>
                           </listitem>
						
                           <listitem id="lid124e82" remap="li">
                              <para remap="#PCDATA">Enter and confirm the password in the <guilabel id="uictrld124e84" remap="uicontrol">Admin Password</guilabel> field.
							Note that the Admin username and password are required to join an instance to an Active
							Directory. When launched in Eucalyptus, these properties will be deleted as soon as the instance joins (or fails to join) the domain.</para>
                           </listitem>
						
                           <listitem id="lid124e88" remap="li">
                              <para remap="#PCDATA">Optionally, enter an organizational unit in the <guilabel id="uictrld124e90" remap="uicontrol">Organizational Unit</guilabel> field. This specifies a container that the instances launched from this image will be attach to.</para>
                           </listitem>
					
                        </itemizedlist>
                        <tip id="warningd124e95" remap="note">
                           <para remap="#PCDATA">If the values entered in this section are incorrect, the launched
						instances will fail to join the domain. We recommend that you verify the information by
						manually joining a computer to a domain using the same information that you entered in this
						step. You may first log in the launched instance using administrator password
						(<command id="cmdnmd124e97" remap="cmdname">euca-get-passcword</command>) and manually join the domain for verification.</para>
                        </tip>
                     </listitem>
			
                     <listitem id="lid124e103" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd124e105" remap="cmd">Click <guilabel id="uictrld124e107" remap="uicontrol">Apply</guilabel>.</phrase>
			
                        </para>
                     </listitem>
		
                  </orderedlist>
		
                  <para id="sctnd124e113" remap="postreq">You are now ready to <xref linkend="images_vmw_win_rdp" id="xrefd124e115" remap="xref"/>.</para>
    
               </section>
               <section remap="task" id="images_vmw_win_rdp">
                  <title id="ttld125e3" remap="title">Configure Remote Desktop</title>
                  <para id="parad125e6" remap="shortdesc"/>
		
                  <para id="parad125e12" remap="p">Domain users or groups require remote desktop permission to log into an instance. By
				default, only the local administrator has the remote desktop permission. The Eucalyptus Integration Service provides a way to grant remote desktop permission to additional domain users or groups.</para>
                  <para id="parad125e15" remap="p">To configure remote desktop permission:</para>
		
                  <orderedlist id="old125e19" remap="steps">
			
                     <listitem id="lid125e21" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd125e23" remap="cmd">Open the <guilabel id="uictrld125e25" remap="uicontrol">Eucalyptus Windows Integration</guilabel> popup (<menuchoice id="mncscdd125e28" remap="menucascade">
                                 <guimenu id="mnuictrld125e29" remap="uicontrol">Windows Programs</guimenu>
                                 <guisubmenu id="mnuictrld125e32" remap="uicontrol">Eucalyptus</guisubmenu>
                                 <guimenuitem id="mnuictrld125e35" remap="uicontrol">Eucalyptus
						Setup</guimenuitem>
                              </menuchoice>).</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid125e40" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd125e42" remap="cmd">Click the <guilabel id="uictrld125e44" remap="uicontrol">RemoteDesktop</guilabel> tab</phrase>
				
                        </para>
                        <para remap="#PCDATA">
                           <mediaobject id="imgd125e49" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_rd.jpg" align="center"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">RemoteDesktop tab</phrase>
                              </textobject>
                           </mediaobject>
                        </para>
                        <para remap="#PCDATA">The names of authorized domain users and groups display in the <guilabel id="uictrld125e53" remap="uicontrol">Authorized User/Groups</guilabel> field. By default, only the local administrator is listed as authorized.</para>
                     </listitem>
			
                     <listitem id="lid125e58" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd125e60" remap="cmd">In the text field below the list, enter a user and group account name in the format <literal id="cdphd125e62" remap="codeph">[DOMAIN]\[USER or GROUP]</literal>. If you add a new local user or local group, prepend the account name <literal id="cdphd125e65" remap="codeph">localhost\</literal> instead of the domain name.</phrase>
				
                        </para>
                        <para remap="#PCDATA">
					
                           <mediaobject id="imgd125e71" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/rdt01.png"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Example of Authorized       Users/Groups configuration</phrase>
                              </textobject>
                           </mediaobject>
					
				
                        </para>
                     </listitem>
			
                     <listitem id="lid125e75" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd125e77" remap="cmd">Click <guilabel id="uictrld125e79" remap="uicontrol">Add</guilabel>.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid125e84" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd125e86" remap="cmd">Repeat for all user/groups that you want to add.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid125e90" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd125e92" remap="cmd">Click <guilabel id="uictrld125e94" remap="uicontrol">Apply</guilabel>.</phrase>
				
                        </para>
                        <para remap="#PCDATA">When the instance launches, the members of the groups you added can log in to the instance through remote desktop.</para>
                     </listitem>
		
                  </orderedlist>
		
                  <para id="sctnd125e103" remap="postreq">You are now ready to <xref linkend="images_vmw_win_sysprep" id="xrefd125e105" remap="xref"/>.</para>
	
               </section>
               <section remap="task" id="images_vmw_win_sysprep">
                  <title id="ttld126e3" remap="title">Run Sysprep</title>
                  <para id="parad126e6" remap="shortdesc"/>
		
                  <para id="parad126e12" remap="p">Sysprep is a Microsoft tool for deploying multiple Windows operating systems in an
				enterprise. Running Sysprep removes system-specific information such as security ID (SID)
				from the Windows OS before you clone an image. Sysprep then re-initializes the OS after
				the image is cloned and started on multiple computers. Use Sysprep to prepare images when
				you use Microsoft Key Management Service to activate license keys. Also, use Sysprep when your Windows systems are attached to Active Directory.</para>
                  <para id="parad126e15" remap="p">In Eucalyptus, you can run Sysprep before you bundle images with the
				<literal id="cdphd126e17" remap="codeph">euca-bundle-image</literal> or <literal id="cdphd126e20" remap="codeph">euca-bundle-instance</literal> commands. </para>
                  <para id="parad126e27" remap="p">To configure and run Sysprep:</para>
		
                  <orderedlist id="old126e31" remap="steps">
			
                     <listitem id="lid126e33" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd126e35" remap="cmd">Open the <guilabel id="uictrld126e37" remap="uicontrol">Eucalyptus Windows Integration</guilabel> popup (<menuchoice id="mncscdd126e40" remap="menucascade">
                                 <guimenu id="mnuictrld126e41" remap="uicontrol">Windows Programs</guimenu>
                                 <guisubmenu id="mnuictrld126e44" remap="uicontrol">Eucalyptus</guisubmenu>
                                 <guimenuitem id="mnuictrld126e47" remap="uicontrol">Eucalyptus
					Setup</guimenuitem>
                              </menuchoice>).</phrase>
				
                        </para>
                        <para remap="#PCDATA">
                           <mediaobject id="imgd126e52" remap="image">
                              <imageobject>
                                 <imagedata fileref="images/ewi_gen.jpg"/>
                              </imageobject>
                              <textobject remap="alt_attribute">
                                 <phrase remap="#PCDATA">Eucalyptus Windows Integration      window</phrase>
                              </textobject>
                           </mediaobject>
                        </para>
                     </listitem>  
			
                     <listitem id="lid126e55" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd126e57" remap="cmd">Click the <guilabel id="uictrld126e59" remap="uicontrol">General</guilabel> tab.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid126e64" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd126e66" remap="cmd">Ensure that <guilabel id="uictrld126e68" remap="uicontrol">Format uninitialized drives</guilabel> is checked</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid126e73" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd126e75" remap="cmd">If you want to edit the Sysprep answer file, click the <guilabel id="uictrld126e77" remap="uicontrol">Open and change</guilabel> button in the General tab. Otherwise skip this step.</phrase>
			
                        </para>
                     </listitem>
			
                     <listitem id="lid126e82" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd126e84" remap="cmd">Click the <guilabel id="uictrld126e86" remap="uicontrol">Run Sysprep</guilabel> button.</phrase>
				
				
                        </para>
                        <para remap="#PCDATA">Sysprep starts.</para>
                     </listitem>
			
                     <listitem id="lid126e94" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd126e96" remap="cmd">After Sysprep is complete, close the application and shutdown the Windows VM using the Windows Programs menu.</phrase>
			
                        </para>
                     </listitem>
		
                  </orderedlist>
		
                  <para id="sctnd126e101" remap="postreq">You are now ready to <xref linkend="images_vmw_win_convert" id="xrefd126e103" remap="xref"/>.</para>
	
               </section>
               <section remap="task" id="images_vmw_win_convert">
                  <title id="ttld127e3" remap="title">Convert the VMDK to an Image</title>
                  <para id="parad127e6" remap="shortdesc"/>
        
                  <para id="parad127e12" remap="p">After your Windows VM image is ready on ESX/ESX-i/VCenter, use the <literal id="cdphd127e14" remap="codeph">euca_imager</literal> command to download the image and convert it to the format Eucalyptus uses. The <literal id="cdphd127e17" remap="codeph">euca_imager</literal> command converts a remote VMDK located on a datastore into a disk image on the local disk on the CC/VMware Broker machine.</para>
        
                  <orderedlist id="old127e22" remap="steps">
            
                     <listitem id="lid127e24" remap="step">
                        <para remap="#PCDATA">
            	
                           <phrase id="phrsd127e26" remap="cmd">Log into the CC/VMware Broker machine and, if necessary, set the appropriate
            	environment variables.</phrase>
            	
                        </para>
                        <programlisting id="cdblkd127e31" remap="codeblock"># export VDDK_HOME=/opt/packages/vddk/ 
# export EUCALYPTUS=/ 
# export LD_LIBRARY_PATH=/opt/packages/vddk/lib/vmware-vix-disklib/lib64/ 
# PATH=/usr/lib/eucalyptus/:$PATH 
# cd ~/.euca (or path to .eucarc) 
# source .eucarc 
</programlisting>
                     </listitem>
        	
                     <listitem id="lid127e36" remap="step">
                        <para remap="#PCDATA">
        		
                           <phrase id="phrsd127e38" remap="cmd">Enter the euca_imager command with appropriate parameters to extract and convert the
        			VMDK to a raw disk image. Parameters are described in the following
        			table:<remark id="spd127e40" remap="draft-comment">Verify these params and descriptions.</remark>
                           </phrase>
        		
                        </para>
                        <informaltable id="tbld127e45" remap="table">
                           <tgroup cols="2">
        					
                              <thead>
        						
                                 <row>
        							
                                    <entry>Parameter</entry>
        							
                                    <entry>Description</entry>
        						
                                 </row>
        					
                              </thead>
        					
                              <tbody>
        						
                                 <row>
        							
                                    <entry>
                                       <literal id="cdphd127e66" remap="codeph">debug</literal>
                                    </entry>
        							
                                    <entry>Enables <literal id="cdphd127e71" remap="codeph">euca_imager</literal> debugging output</entry>
        						
                                 </row>
        						
                                 <row>
        							
                                    <entry>
                                       <literal id="cdphd127e79" remap="codeph">in</literal>
                                    </entry>
        							
                                    <entry>https URL for the vCenter Server or ESX/ESXi machine </entry>
        						
                                 </row>
        						
                                 <row>
        							
                                    <entry>
                                       <literal id="cdphd127e89" remap="codeph">out</literal>
                                    </entry>
        							
                                    <entry>User-defined name of disk </entry>
        						
                                 </row>
        						
                                 <row>
        							
                                    <entry>
                                       <literal id="cdphd127e99" remap="codeph">login</literal>
                                    </entry>
        							
                                    <entry>Name used to access the VMware machine </entry>
        						
                                 </row>
        						
                                 <row>
        							
                                    <entry>
                                       <literal id="cdphd127e109" remap="codeph">password</literal>
                                    </entry>
        							
                                    <entry>Password used to access the VMware machine</entry>
        						
                                 </row>
        						
                                 <row>
        							
                                    <entry>
                                       <literal id="cdphd127e119" remap="codeph">vsphere-vmdk</literal>
                                    </entry>
        							
                                    <entry>Go to vSphere client, find the virtual machine that you have installed (make sure it is in <literal id="cdphd127e124" remap="codeph">powered off</literal> state), and select the <guilabel id="uictrld127e127" remap="uicontrol">Hard disk 1</guilabel> resource. There will be a <guilabel id="uictrld127e130" remap="uicontrol">Disk File</guilabel> field for the VMDK, and a similar field on the <guilabel id="uictrld127e133" remap="uicontrol">Option</guilabel> tab for the VMX file. </entry>
        						
                                 </row>
        						
                                 <row>
        							
                                    <entry>
                                       <literal id="cdphd127e141" remap="codeph">vsphere-vmx</literal>
                                    </entry>
        							
                                    <entry>Same description as vsphere-vmdk parameter. This is optional if you’re contacting an ESX node directly, but may be required when contacting vCenter.</entry>
        						
                                 </row>
        						
                                 <row>
        							
                                    <entry>
                                       <literal id="cdphd127e151" remap="codeph">vsphere-datacenter</literal>
                                    </entry>
        							
                                    <entry>Specified name of the datacenter. This is optional if you’re contacting an ESX node directly, but may be required when contacting vCenter.</entry>
        						
                                 </row>
        					
        					
                              </tbody>
        				
                           </tgroup>
                        </informaltable>
                     </listitem>
        
                  </orderedlist>
    	
                  <informalexample id="xmpd127e164" remap="example">
    		
                     <para id="parad127e166" remap="p">The following example shows euca_imager with the appropriate parameters as described above
    			converting a VMDK to a raw disk image. Note that the prefix of the
    			<literal id="cdphd127e168" remap="codeph">out</literal> parameter must begin with the word <literal id="cdphd127e171" remap="codeph">windows</literal>.</para>
    		
                     <programlisting id="cdblkd127e175" remap="codeblock">/usr/lib/eucalyptus/euca_imager debug=yes convert in=
https://192.168.7.198 out=windows.disk login=Administrator password=password 
vsphere-vmdk="[datastore1]WindowsVM/WindowsVM.vmdk" vsphere-datacenter=DataCenter1
vsphere-vmx="[datastore1]WindowsVM/WindowsVM.vmx</programlisting>
    	
                  </informalexample>
    	
                  <para id="sctnd127e179" remap="postreq">You are now ready to <xref linkend="images_vmw_win_add" id="xrefd127e181" remap="xref"/>.</para>
    
               </section>
               <section remap="task" id="images_vmw_win_add">
                  <title id="ttld128e3" remap="title">Add Image to Eucalyptus</title>
                  <para id="parad128e6" remap="shortdesc"/>
		
                  <para id="parad128e12" remap="p">To enable an image as an executable entity, you must bundle and upload the Windows disk
				image to Walrus, and then register the uploaded image with Eucalyptus.</para>
		
                  <orderedlist id="old128e16" remap="steps">
			
                     <listitem id="lid128e18" remap="step">
                        <para remap="#PCDATA">
				
                           <phrase id="phrsd128e20" remap="cmd">Run the following command to bundle, upload, and register your Windows disk image:</phrase>
				
                        </para>
                        <programlisting id="cdblkd128e25" remap="codeblock">euca-bundle-image -i &lt;vm_image_file&gt; 
euca-upload-bundle -b &lt;image_bucket&gt; -m /tmp/&lt;vm_image_file&gt;.manifest.xml
euca-register &lt;image_bucket&gt;/&lt;vm_image_file&gt;.manifest.xml</programlisting>
                     </listitem>
		
                  </orderedlist>
		
                  <para id="sctnd128e31" remap="result">Your Windows image is now ready to run as an instance.</para>
		
                  <para id="sctnd128e34" remap="postreq">After you register the image, Walrus decrypts the image bundle. This process might
			take a few minutes for a large Windows image to be decrypted. For example, a 10G image
			requires that you wait about 10 minutes before you launch the instance.</para>
	
               </section>
            </section>
         </section>
         <section remap="task" id="associating_ekieri">
            <title id="ttld96e3" remap="title">Associate a Kernel and Ramdisk</title>
            <para id="parad96e6" remap="shortdesc"/>
        
            <para id="parad96e12" remap="p">There are three ways that you can associate a kernel and ramdisk with an image.</para>
            <tip id="warningd96e15" remap="note">
               <para remap="#PCDATA">This only applies to Linux images. Windows images do not use kernels
        	or ramdisks.</para>
            </tip>
    	
            <itemizedlist id="uld96e19" remap="steps-unordered">
    		
               <listitem id="lid96e21" remap="step">
                  <para remap="#PCDATA">
    			
                     <phrase id="phrsd96e23" remap="cmd">You can associate a specific kernel and ramdisk identifier with an image at the
    				<command id="cmdnmd96e25" remap="cmdname">euca-bundle-image</command> step.</phrase>
    			
                  </para>
                  <programlisting id="cdblkd96e31" remap="codeblock">euca-bundle-image -i &lt;vm_image_file&gt; --kernel &lt;eki-XXXXXXXX&gt; --ramdisk &lt;eri-XXXXXXXX&gt;</programlisting>
               </listitem>
    		
               <listitem id="lid96e36" remap="step">
                  <para remap="#PCDATA">
    			
                     <phrase id="phrsd96e38" remap="cmd">You can specific kernel and ramdisk at instance run time as an option to
    				<command id="cmdnmd96e40" remap="cmdname">euca-run-instances</command> command.</phrase>
    			
                  </para>
                  <programlisting id="cdblkd96e46" remap="codeblock">euca-run-instances --kernel &lt;eki-XXXXXXXX&gt; --ramdisk &lt;eri-XXXXXXXX&gt; &lt;emi-XXXXXXXX&gt;</programlisting>
               </listitem>
    		
               <listitem id="lid96e51" remap="step">
                  <para remap="#PCDATA">
    			
                     <phrase id="phrsd96e53" remap="cmd">An administrator can set default registered kernel and ramdisk identifiers that will be
    			used if a kernel and ramdisk are unspecified by either of the other options.</phrase>
    			
    		
                  </para>
               </listitem>
    	
            </itemizedlist>
    	
    
         </section>
         <section remap="task" id="bundle_image_ec2">
            <title id="ttld102e3" remap="title">Bundle an Image for Amazon EC2</title>
            <para id="parad102e6" remap="shortdesc"/>
        
            <para id="parad102e12" remap="p">To bundle an image for use with Amazon EC2:</para>
        
            <orderedlist id="old102e16" remap="steps">
            
               <listitem id="lid102e18" remap="step">
                  <para remap="#PCDATA">
            	
                     <phrase id="phrsd102e20" remap="cmd">Locate the Amazon ec2 cert file that is provided as part of the EC2 AMI tools. This file is generally located in <filename id="flpthd102e22" remap="filepath">$EC2_AMITOOL_HOME/etc/ec2/amitools/cert-ec2.pem</filename>.
            	</phrase>
            
                  </para>
               </listitem>
        	
               <listitem id="lid102e27" remap="step">
                  <para remap="#PCDATA">
        		
                     <phrase id="phrsd102e29" remap="cmd">Enter the following command:</phrase>
        		
                  </para>
                  <programlisting id="cdblkd102e34" remap="codeblock">euca-bundle-image -i &lt;image_name&gt; \
-c &lt;cert_filename&gt; -k &lt;private_key_filename&gt; \
--ec2cert &lt;path_to_cert_file&gt; </programlisting>
               </listitem>
        
            </orderedlist>
    	
            <informalexample id="xmpd102e40" remap="example">
    		
               <para id="parad102e42" remap="p">For example:</para>
    		
               <programlisting id="cdblkd102e45" remap="codeblock">euca-bundle-image -i euca-centos-5.3 \
 	x86_64/centos.5-3.x86-64.img  -u 123456789111 -c cert- \
 	abc.pem -k pk-abc.pem --ec2cert \
 	$EC2_AMITOOL_HOME/etc/ec2/amitools/cert-ec2.pem </programlisting>
    	
            </informalexample>
    
         </section>
         <section remap="task" id="bundle_win_image">
            <title id="ttld103e3" remap="title">Bundle a Windows Instance</title>
            <para id="parad103e6" remap="shortdesc"/>
        
            <para id="parad103e12" remap="p">The euca-bundle-instance command lets you bundle a new Windows image from a running Windows instance directly to Walrus storage. Using 
        		euca-bundle-instance is an efficient way to generate modified Windows VMs. You can spin up
        		a Windows VM instance from an existing Windows VM image, modify it as needed, then save the modified image to Walrus storage, where it is immediately available for registering and running with the modifications already in place. </para>
            <para id="parad103e15" remap="p">To bundle a Windows instance:</para>
        
            <orderedlist id="old103e19" remap="steps">
            
               <listitem id="lid103e21" remap="step">
                  <para remap="#PCDATA">
                
                     <phrase id="phrsd103e23" remap="cmd">Enter the following command:</phrase>
            	
                  </para>
                  <programlisting id="cdblkd103e28" remap="codeblock">euca-bundle-instance -b &lt;bucket_name&gt; -p &lt;prefix_starting_with_windows&gt; -o $EC2_ACCESS_KEY –w
$EC2_SECRET_KEY &lt;instance_ID&gt;</programlisting>
                  <tip id="warningd103e31" remap="note">
                     <para remap="#PCDATA">You can query the progress of a bundling tasks using the <command id="cmdnmd103e33" remap="cmdname">euca-describe-bundle-
            		task</command> command. You can cancel the active bundle task using
            			<command id="cmdnmd103e36" remap="cmdname">euca-cancel-bundle-task</command> command.</para>
                  </tip>
               </listitem>
        
            </orderedlist>
    	
            <informalexample id="xmpd103e43" remap="example">
    		
               <para id="parad103e45" remap="p">The following example bundles a new Windows image from an existing Windows instance with ID
    			<literal id="cdphd103e47" remap="codeph">i-12c4af6a</literal>, to the bucket <literal id="cdphd103e50" remap="codeph">mybucket</literal>, with image prefix <literal id="cdphd103e53" remap="codeph">windows2003_bundle</literal>:</para>
    		
               <programlisting id="cdblkd103e57" remap="codeblock">euca-bundle-instance -b mybucket -p windows2003_bundle -o $EC2_ACCESS_KEY -w $EC2_SECRET_KEY  i-12c4af6a</programlisting>
    	
            </informalexample>
    	
    
         </section>
      </section>
   </section>
   <section remap="concept" id="appendix">
      <title id="ttld129e3" remap="title">Appendix</title>
      <para id="parad129e6" remap="shortdesc"/>
  
      <para id="parad129e10" remap="p">This appendix for the Eucalyptus Administration Guide provides information about administrative
  	commands and general troubleshooting help.</para>
 
      <section remap="concept" id="admin_commands">
         <title id="ttld130e3" remap="title">Eucalyptus Administration Commands</title>
         <para id="parad130e6" remap="shortdesc"/>
  
         <para id="parad130e10" remap="p">Eucalyptus offers commands for common administration tasks and inquiries. This section provides
  a reference for these commands.</para>
 
         <section remap="reference" id="euca_conf">
            <title id="ttld131e3" remap="title">euca_conf</title>
            <para id="parad131e6" remap="shortdesc">Short reference description.</para>
    
  	
            <sidebar id="sctnd131e13" remap="section">
               <title id="ttld131e15" remap="title">Required Parameters</title>
               <para id="parad131e18" remap="p">None</para>
            </sidebar>
  	
            <sidebar id="sctnd131e22" remap="section">
               <title id="ttld131e24" remap="title">Optional Parameters</title>
               <informaltable id="tbld131e27" remap="table">
                  <tgroup cols="2">
  				
                     <colspec colname="left" colwidth="30*"/>
  				
                     <colspec colname="right" colwidth="70*"/>
  				
                     <thead>
  					
                        <row>
  						
                           <entry colname="left" align="center">Option</entry>
  						
                           <entry colname="right" align="center">Description</entry>
  					
                        </row>
  					
  				
                     </thead>
  				
                     <tbody>
  					
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e52" remap="codeph">--initialize</literal>
                           </entry>
  						
                           <entry>Begin the one-time initialization of the CLC</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e62" remap="codeph">--heartbeat</literal>
                           </entry>
  						
                           <entry>Return heartbeat data for the specified host</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e72" remap="codeph">--synckey</literal>
                           </entry>
  						
                           <entry>
                              <remark id="spd131e76" remap="draft-comment">???</remark>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e83" remap="codeph">--no-rsync</literal>
                           </entry>
  						
                           <entry>Do not use rsync when registering</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e93" remap="codeph">--no-scp</literal>
                           </entry>
  						
                           <entry>Do not use scp when registering</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e103" remap="codeph">--skip-scp-hostcheck</literal>
                           </entry>
  						
                           <entry>Skip scp interactive host keycheck</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e113" remap="codeph">--get-credentials</literal>
                           </entry>
  						
                           <entry>Download credentials to the specified zip file.
  							By default, the admin credentials
  							will be downloaded but this can be
  							adjusted with the <literal id="cdphd131e118" remap="codeph">--cred-user</literal> option.
  							Each time this is called, new X.509
  							certificates will be created for the
  							specified user.
  						</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e126" remap="codeph">--cred-account</literal>
                           </entry>
  						
                           <entry>Set <literal id="cdphd131e131" remap="codeph">get-credentials</literal> for the specified account</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e139" remap="codeph">--cred-user</literal>
                           </entry>
  						
                           <entry>Set <literal id="cdphd131e144" remap="codeph">get-credentials</literal> for the specified user</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e152" remap="codeph">--register-nodes</literal>
                           </entry>
  						
                           <entry>Add specified nodes to Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e162" remap="codeph">--deregister-nodes</literal>
                           </entry>
  						
                           <entry>Remove specified nodes from Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e172" remap="codeph">--register-arbitrator</literal>
                           </entry>
  						
                           <entry>Add arbitrator service to Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e182" remap="codeph">--deregister-arbitrator</literal>
                           </entry>
  						
                           <entry>Remove arbitrator service from Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e192" remap="codeph">--register-cloud</literal>
                           </entry>
  						
                           <entry>Add new Cloud Controller to Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e202" remap="codeph">--deregister-cloud</literal>
                           </entry>
  						
                           <entry>Remove Cloud Controller from Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e212" remap="codeph">--register-cluster</literal>
                           </entry>
  						
                           <entry>Add a Cluster Controller to Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e222" remap="codeph">--deregister-cluster</literal>
                           </entry>
  						
                           <entry>Remove a Cluster Controller from Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e232" remap="codeph">--register-walrus</literal>
                           </entry>
  						
                           <entry>Add Walrus to Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e242" remap="codeph">--deregister-walrus</literal>
                           </entry>
  						
                           <entry>Remove Walrus from Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e252" remap="codeph">--register-sc</literal>
                           </entry>
  						
                           <entry>Add Storage Controller to Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e262" remap="codeph">--deregister-sc</literal>
                           </entry>
  						
                           <entry>Remove Storage Controller from Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e272" remap="codeph">--register-vmwarebroker</literal>
                           </entry>
  						
                           <entry>Add VMware Broker to Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e282" remap="codeph">-deregister-vmwarebroker</literal>
                           </entry>
  						
                           <entry>Remove VMware Broker from Eucalyptus</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e292" remap="codeph">--list-walruses</literal>
                           </entry>
  						
                           <entry>Return all registered Walruses</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e302" remap="codeph">--list-clouds</literal>
                           </entry>
  						
                           <entry>Return all registered Cloud Controllers</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e312" remap="codeph">--list-clusters</literal>
                           </entry>
  						
                           <entry>List all registered Cluster Controllers</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e322" remap="codeph">--list-arbitrators</literal>
                           </entry>
  						
                           <entry>Return all registered arbitrator services</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e332" remap="codeph">--list-vmwarebrokers</literal>
                           </entry>
  						
                           <entry>Return all registered VMware Brokers</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e342" remap="codeph">--list-nodes</literal>
                           </entry>
  						
                           <entry>Return all registered Node Controllers</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e352" remap="codeph">--list-components</literal>
                           </entry>
  						
                           <entry>return all registered Eucalyptus components</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e362" remap="codeph">--list-services</literal>
                           </entry>
  						
                           <entry>Return all registered services</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e372" remap="codeph">-list-scs</literal>
                           </entry>
  						
                           <entry>Return all registered Storage Controllers</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e382" remap="codeph">--no-sync</literal>
                           </entry>
  						
                           <entry>Used with <literal id="cdphd131e387" remap="codeph">--register-*</literal> to skip syncing
  							keys</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e395" remap="codeph">-d</literal>
                           </entry>
  						
                           <entry>Point Eucalyptus to the specified directory <remark id="spd131e400" remap="draft-comment">What does this mean?</remark>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e407" remap="codeph">--cc-port</literal>
                           </entry>
  						
                           <entry>Set the Cluster Controller to the specified port</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e417" remap="codeph">--sc-port</literal>
                           </entry>
  						
                           <entry>Set the Storage Controller to the specified port</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e427" remap="codeph">--walrus-port</literal>
                           </entry>
  						
                           <entry>Set Walrus to the specified port</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e437" remap="codeph">--nc-port</literal>
                           </entry>
  						
                           <entry>Set the Node Controller to the specified port</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e447" remap="codeph">--instances</literal>
                           </entry>
  						
                           <entry>Set the instance path <remark id="spd131e452" remap="draft-comment">More about instances and paths?</remark>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e459" remap="codeph">--hypervisor</literal>
                           </entry>
  						
                           <entry>Set which hypervisor to use.
  						<para id="parad131e464" remap="p">Valid values: <literal id="cdphd131e466" remap="codeph">xen</literal> | <literal id="cdphd131e469" remap="codeph">kvm</literal>
                              </para>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e476" remap="codeph">--user</literal>
                           </entry>
  						
                           <entry>Set the user to use for EUCA_USER <remark id="spd131e481" remap="draft-comment">More info needed.</remark>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e488" remap="codeph">--dhcpd</literal>
                           </entry>
  						
                           <entry>Set the DHCP daemon binary to the specified path <remark id="spd131e493" remap="draft-comment">path to the DCHCP
  							daemon?</remark>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e500" remap="codeph">--dhcp_user</literal>
                           </entry>
  						
                           <entry>Set the specified user name to run dhcpd as</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e510" remap="codeph">--bridge</literal>
                           </entry>
  						
                           <entry>Set the bridge as the specified name <remark id="spd131e515" remap="draft-comment">name? type?</remark>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e522" remap="codeph">--name</literal>
                           </entry>
  						
                           <entry>Returns the value for the specified name <remark id="spd131e527" remap="draft-comment">Example?</remark>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e534" remap="codeph">--import-conf</literal>
                           </entry>
  						
                           <entry>Import variables from a specified <literal id="cdphd131e539" remap="codeph">eucalyptus.conf</literal> file</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e547" remap="codeph">--upgrade-conf</literal>
                           </entry>
  						
                           <entry>Upgrade <literal id="cdphd131e552" remap="codeph">eucalyptus.conf</literal> from the specified older
  							installation file
  						</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e560" remap="codeph">--setup</literal>
                           </entry>
  						
                           <entry>Perform initial setup <remark id="spd131e565" remap="draft-comment">More information or cautions?</remark>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e572" remap="codeph">--enable</literal>
                           </entry>
  						
                           <entry>Enable specified service at next start
  							<para id="parad131e577" remap="p">Valid values: <literal id="cdphd131e579" remap="codeph">cloud</literal> | <literal id="cdphd131e582" remap="codeph">walrus</literal> | <literal id="cdphd131e585" remap="codeph">sc</literal> |
  								<literal id="cdphd131e588" remap="codeph">vmwarebroker</literal> 
                                 <remark id="spd131e591" remap="draft-comment">No cc?</remark>
                              </para>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e598" remap="codeph">--disable</literal>
                           </entry>
  						
                           <entry>Disable specified service at next start
  							<para id="parad131e603" remap="p">Valid values: <literal id="cdphd131e605" remap="codeph">cloud</literal> | <literal id="cdphd131e608" remap="codeph">walrus</literal> | <literal id="cdphd131e611" remap="codeph">sc</literal> |
  								<literal id="cdphd131e614" remap="codeph">vmwarebroker</literal> 
                                 <remark id="spd131e617" remap="draft-comment">No cc?</remark>
                              </para>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e624" remap="codeph">--check</literal>
                           </entry>
  						
                           <entry>Pre-flight checks <remark id="spd131e629" remap="draft-comment">More info?</remark>
  							
                              <para id="parad131e632" remap="p">Valid values: <literal id="cdphd131e634" remap="codeph">common</literal> | <literal id="cdphd131e637" remap="codeph">vmware</literal>
                              </para>
                           </entry>
  					
                        </row>
  					
                        <inlinemediaobject role="" id="included131e641" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/debug"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included131e646" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/debugger"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e654" remap="codeph">-P, --partition</literal>
                           </entry>
  						
                           <entry>Name of partition.
  							Used with <literal id="cdphd131e659" remap="codeph">--register-*</literal> and <literal id="cdphd131e662" remap="codeph">--deregister-*</literal>
  						
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e670" remap="codeph">-H, --host</literal>
                           </entry>
  						
                           <entry>Name or IP address of host.
  							Used with <literal id="cdphd131e675" remap="codeph">--register-*</literal>
  						
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e683" remap="codeph">-C, --component</literal>
                           </entry>
  						
                           <entry>Name of the component.
  							Used with <literal id="cdphd131e688" remap="codeph">--register-*</literal> and <literal id="cdphd131e691" remap="codeph">--deregister-*</literal>
  						
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd131e699" remap="codeph">--help-register</literal>
                           </entry>
  						
                           <entry>Display help for register deregister</entry>
  					
                        </row>
  					
  					
                        <inlinemediaobject role="" id="included131e706" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/help"/>
                           </imageobject>
                        </inlinemediaobject>
  				
                     </tbody>
  			
                  </tgroup>
               </informaltable>
            </sidebar>
  	
  	
  
         </section>
         <section remap="reference" id="euca-describe-properties">
            <title id="ttld132e3" remap="title">euca-describe-properties</title>
            <para id="parad132e6" remap="shortdesc">Lists properties. <remark id="spd132e8" remap="draft-comment">A little more info perhaps???</remark>
            </para>
    
            <sidebar id="sctnd132e13" remap="section">
               <title id="ttld132e15" remap="title">Syntax</title>
               <para remap="#PCDATA">
    	
    	
                  <remark id="spd132e18" remap="draft-comment">Is the -I parameter correct for access key? Example syntax shows it as -A. Of
    		course, it shows -A for secret key too, so . . . </remark>
    	
               </para>
               <programlisting id="cdblkd132e21" remap="codeblock">euca-describe-properties  [-I, --access-key &lt;access_key&gt; ][-S, --secret-key &lt;secret_key&gt;
     ][--debug][--debugger][-h,
     --help][--region &lt;region_name&gt; ][-U, --url &lt;url&gt; ][--version]</programlisting>
            </sidebar>
  	
            <sidebar id="sctnd132e25" remap="section">
               <title id="ttld132e27" remap="title">Required Parameters</title>
               <para id="parad132e30" remap="p">None</para>
            </sidebar>
  	
            <sidebar id="sctnd132e34" remap="section">
               <title id="ttld132e36" remap="title">Optional Parameters</title>
               <informaltable id="tbld132e39" remap="table">
                  <tgroup cols="2">
  				
                     <colspec colwidth="20*"/>
  				
                     <colspec colwidth="80*"/>
  				
                     <thead>
  					
                        <row>
  						
                           <entry align="center">Option</entry>
  						
                           <entry align="center">Description</entry>
  					
                        </row>
  					
  				
                     </thead>
  				
                     <tbody>
  					
                        <inlinemediaobject role="" id="included132e61" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/debug"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included132e66" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/debugger"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included132e71" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/url"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included132e76" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/region"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included132e81" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/access_key"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included132e86" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/secret_key"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included132e91" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/help"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included132e96" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/version"/>
                           </imageobject>
                        </inlinemediaobject>
  				
                     </tbody>
  			
                  </tgroup>
               </informaltable>
            </sidebar>
  	
  	
  
         </section>
         <section remap="reference" id="euca-describe-services">
            <title id="ttld133e3" remap="title">euca-describe-services</title>
            <para id="parad133e6" remap="shortdesc">Returns services. <remark id="spd133e8" remap="draft-comment">A tad more info???</remark>
            </para>
    
  	
            <sidebar id="sctnd133e15" remap="section">
               <title id="ttld133e17" remap="title">Required Parameters</title>
               <para id="parad133e20" remap="p">None</para>
            </sidebar>
  	
            <sidebar id="sctnd133e24" remap="section">
               <title id="ttld133e26" remap="title">Optional Parameters</title>
               <informaltable id="tbld133e29" remap="table">
                  <tgroup cols="2">
  				
                     <colspec colwidth="20*"/>
  				
                     <colspec colwidth="80*"/>
  				
                     <thead>
  					
                        <row>
  						
                           <entry align="center">Option</entry>
  						
                           <entry align="center">Description</entry>
  					
                        </row>
  					
  				
                     </thead>
  				
                     <tbody>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd133e54" remap="codeph">-A, --all</literal>
                           </entry>
  						
                           <entry>Include all public service information. Reported
  							state information is determined by the view available
  							to the target host, which should be treated as
  							advisory (See documentation for guidance on
  							interpreting this information). <remark id="spd133e59" remap="draft-comment">What documentation???</remark>
  						
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd133e67" remap="codeph">--system-internal</literal>
                           </entry>
  						
                           <entry>Include internal services information 
  							<note id="noted133e72" remap="note">
                                 <para remap="#PCDATA">This information is only for the target host.</para>
                              </note>
  						
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd133e80" remap="codeph">--user-services</literal>
                           </entry>
  						
                           <entry>Include services that are user-facing and co-located with some other top-level
  							service <remark id="spd133e85" remap="draft-comment">"some other top-level service"? What does that mean?</remark>
  							
                              <note id="noted133e88" remap="note">
                                 <para remap="#PCDATA">This information is only for the target host.</para>
                              </note>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd133e95" remap="codeph">-T, --filter-type</literal>
                           </entry>
  						
                           <entry>Filter services by specified component type <remark id="spd133e100" remap="draft-comment">Eucalyptus component? Do
  							we have valid values for this?</remark>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd133e107" remap="codeph">-H, --filter-host</literal>
                           </entry>
  						
                           <entry>Filter services by specified host</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd133e117" remap="codeph">-F, --filter-state</literal>
                           </entry>
  						
                           <entry>Filter services by state <remark id="spd133e122" remap="draft-comment">Valid values?</remark>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd133e129" remap="codeph">-P, --filter-partition</literal>
                           </entry>
  						
                           <entry>Filter services by specified partition</entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd133e139" remap="codeph">-E, --events</literal>
                           </entry>
  						
                           <entry>Return service event details <remark id="spd133e144" remap="draft-comment">What does this mean???</remark>
                           </entry>
  					
                        </row>
  					
                        <row>
  						
                           <entry>
                              <literal id="cdphd133e151" remap="codeph">-events-verbose</literal>
                           </entry>
  						
                           <entry>Return verbose service event details <remark id="spd133e156" remap="draft-comment">See above comment.</remark>
                           </entry>
  					
                        </row>
  					
                        <inlinemediaobject role="" id="included133e160" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/debug"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included133e165" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/debugger"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included133e170" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/url"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included133e175" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/region"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included133e180" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/access_key"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included133e185" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/secret_key"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included133e190" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/help"/>
                           </imageobject>
                        </inlinemediaobject>
  					
                        <inlinemediaobject role="" id="included133e195" remap="row">
                           <imageobject>
                              <imagedata format="linespecific" fileref="../shared/shared_params_euare.dita#shared_params/version"/>
                           </imageobject>
                        </inlinemediaobject>
  				
                     </tbody>
  			
                  </tgroup>
               </informaltable>
            </sidebar>
  	
  	
  
         </section>
      </section>
      <section remap="concept" id="vmware_advanced">
         <title id="ttld134e3" remap="title">Advanced VMware Configuration</title>
         <para id="parad134e6" remap="shortdesc"/>
  
         <para id="parad134e10" remap="p">
            <remark id="spd134e11" remap="draft-comment">Get content from Word doc.</remark>
         </para>
 
      </section>
      <section remap="concept" id="troubleshooting">
         <title id="ttld135e3" remap="title">Troubleshooting Eucalyptus</title>
         <para id="parad135e6" remap="shortdesc">Provides common management or configuration problems and solutions for fixing these problems.</para>
 	
         <para id="parad135e11" remap="p">To troubleshoot Eucalyptus, the administrator must know the location of the Eucalyptus
 		components, that is, on which machine each component is installed. The administrator must have root access to each machine hosting the components and must know the network configuration connecting the components.</para>

         <remark id="spd135e14" remap="draft-comment">Include:
	<itemizedlist id="uld135e16" remap="ul">
		
               <listitem id="lid135e18" remap="li">
                  <para remap="#PCDATA">How to tell what state a component is in.</para>
               </listitem>
		
               <listitem id="lid135e21" remap="li">
                  <para remap="#PCDATA">Rich's bug re: 10% of instances not starting.</para>
               </listitem>
		
               <listitem id="lid135e24" remap="li">
                  <para remap="#PCDATA">drbd-overview is a nice command to use to watch the progress o</para>
               </listitem>
	
            </itemizedlist>
         </remark>
 
         <section remap="concept" id="ts_logs">
            <title id="ttld136e3" remap="title">Log Files</title>

		
            <para id="parad136e8" remap="p">Usually when an issue arises in Eucalyptus, you can find a clue or trace or record that
			suggests the nature of the problem either in the eucalyptus log files or in the system log
			files. Assuming Eucalyptus is installed in root (/), the eucalyptus logs are located on each
			machine hosting a component in the following directory:
				<filename id="flpthd136e10" remap="filepath">/var/log/eucalyptus/</filename>. </para>

		
            <para id="parad136e14" remap="p">Here are the relevant logs for each component:</para>
		
            <sidebar id="sctnd136e17" remap="section">
               <title id="ttld136e19" remap="title">CLC, Walrus, SC, and VMware Broker</title>
               <itemizedlist id="uld136e22" remap="ul">
				
                  <listitem id="lid136e24" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e25" remap="filepath">cloud-debug.log</filename>
                     </para>
                  </listitem>
				
                  <listitem id="lid136e28" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e29" remap="filepath">cloud-error.log</filename>
                     </para>
                  </listitem>
				
                  <listitem id="lid136e32" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e33" remap="filepath">cloud-output.log</filename>
                     </para>
                  </listitem>
				
                  <listitem id="lid136e36" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e37" remap="filepath">cloud-exhaust.log</filename>
                     </para>
                  </listitem>
				
                  <listitem id="lid136e41" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e42" remap="filepath">cloud-extreme.log</filename>
                     </para>
                  </listitem>
				
                  <listitem id="lid136e46" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e47" remap="filepath">euca_imager.log</filename>
                     </para>
                  </listitem>
			
               </itemizedlist>
            </sidebar>
		
            <sidebar id="sctnd136e52" remap="section">
               <title id="ttld136e54" remap="title">CC</title>
               <itemizedlist id="uld136e57" remap="ul">
				
                  <listitem id="lid136e59" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e60" remap="filepath">cc.log</filename>
                     </para>
                  </listitem>
				
                  <listitem id="lid136e63" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e64" remap="filepath">axis2c.log</filename>
                     </para>
                  </listitem>
				
                  <listitem id="lid136e67" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e68" remap="filepath">httpd-cc_error_log</filename>
                     </para>
                  </listitem>
			
               </itemizedlist>
            </sidebar>
		
            <sidebar id="sctnd136e72" remap="section">
               <title id="ttld136e74" remap="title">NC</title>
               <itemizedlist id="uld136e77" remap="ul">
				
                  <listitem id="lid136e79" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e80" remap="filepath">cc.log</filename>
                     </para>
                  </listitem>
				
                  <listitem id="lid136e83" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e84" remap="filepath">axis2c.log</filename>
                     </para>
                  </listitem>
				
                  <listitem id="lid136e87" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e88" remap="filepath">httpd-cc_error_log</filename>
                     </para>
                  </listitem>
				
                  <listitem id="lid136e91" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e92" remap="filepath">euca_test_nc.log</filename>
                     </para>
                  </listitem>
			
               </itemizedlist>
            </sidebar>
		
            <sidebar id="sctnd136e96" remap="section">
               <title id="ttld136e98" remap="title">System</title>
               <para id="parad136e101" remap="p">You might also find helpful information about the nature of an issue in the
			system’s logs. In particular, search for clues in</para>
               <itemizedlist id="uld136e104" remap="ul">
				
                  <listitem id="lid136e106" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e107" remap="filepath">/var/log/messages</filename>
                     </para>
                  </listitem>
				
                  <listitem id="lid136e110" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e111" remap="filepath">/var/log/libvirt/</filename>
                     </para>
                  </listitem>
				
                  <listitem id="lid136e114" remap="li">
                     <para remap="#PCDATA">
                        <filename id="flpthd136e115" remap="filepath">/var/log/xen/</filename>
                     </para>
                  </listitem>
			
               </itemizedlist>
            </sidebar>
	
         </section>
         <section remap="concept" id="ts_system">
            <title id="ttld137e3" remap="title">Network Information</title>
            <para id="parad137e6" remap="shortdesc"/>
 	
            <para id="parad137e10" remap="p">When you have to troubleshoot, it's important to understand the elements of the network on your
 	system. Here are some ideas for finding out information about your network:</para>
 	
            <itemizedlist id="uld137e13" remap="ul">
 
               <listitem id="lid137e15" remap="li">
                  <para remap="#PCDATA">It is also important to understand the elements of the network on your system. For
 	example, you might want to list bridges to see which devices are enslaved by the
 	bridge. To do this, use the <literal id="cdphd137e17" remap="codeph">brctl</literal> command.</para>
               </listitem>
 	
 	
               <listitem id="lid137e21" remap="li">
                  <para remap="#PCDATA">You might also want to list network
 	devices and evaluate existing configurations. To do this, use these
 	commands: <literal id="cdphd137e23" remap="codeph">ip</literal>, <literal id="cdphd137e26" remap="codeph">ifconfig</literal>, and <literal id="cdphd137e29" remap="codeph">route</literal>.</para>
               </listitem>
 	
 	
               <listitem id="lid137e33" remap="li">
                  <para remap="#PCDATA">If you are running Eucalyptus in Managed networking mode, you can also use
 		<literal id="cdphd137e35" remap="codeph">vconfig</literal> to evaluate VLAN configuration.</para>
               </listitem>
 	
 	
               <listitem id="lid137e39" remap="li">
                  <para remap="#PCDATA">You can get further information if you use the <command id="cmdnmd137e41" remap="cmdname">euca-describe</command> commands with
 		the <literal id="cdphd137e44" remap="codeph">verbose</literal> options. For example,
 		<command id="cmdnmd137e47" remap="cmdname">euca-describe-instances verbose</command> returns all
 	instances running by all users on the system. Other describe commands are:
 	</para>
                  <itemizedlist id="uld137e50" remap="ul">
 		
                     <listitem id="lid137e52" remap="li">
                        <para remap="#PCDATA">
                           <literal id="cdphd137e53" remap="codeph">euca-describe-volumes verbose</literal>
                        </para>
                     </listitem>
 		
                     <listitem id="lid137e56" remap="li">
                        <para remap="#PCDATA">
                           <literal id="cdphd137e57" remap="codeph">euca-describe-snapshots verbose</literal>
                        </para>
                     </listitem>
 		
                     <listitem id="lid137e60" remap="li">
                        <para remap="#PCDATA">
                           <literal id="cdphd137e61" remap="codeph">euca-describe-groups verbose</literal>
                        </para>
                     </listitem>
 		
                     <listitem id="lid137e64" remap="li">
                        <para remap="#PCDATA">
                           <literal id="cdphd137e65" remap="codeph">euca-describe-keypairs verbose</literal>
                        </para>
                     </listitem>
 			
 	
                  </itemizedlist>
               </listitem>
            </itemizedlist>
 
         </section>
         <section remap="concept" id="ts_walrus">
            <title id="ttld138e3" remap="title">Walrus and Storage</title>
            <para id="parad138e6" remap="shortdesc"/>
 	
 	
            <variablelist id="dld138e10" remap="dl">
 		
               <varlistentry id="dled138e12" remap="dlentry">
 			
                  <term id="dtd138e14" remap="dt">Walrus decryption failed.</term>
 			
                  <listitem id="ddd138e17" remap="dd">
                     <para remap="#PCDATA">On Ubuntu 10.04 LTS, kernel version 2.6.32-31 includes a bug that prevents Walrus
 				from decrypting images. This can be determined from the following line in cloud-output.log
 				
 				</para>
                     <programlisting id="cdblkd138e19" remap="codeblock">javax.crypto.
BadPaddingException: pad block corrupted</programlisting>
                     <para id="parad138e22" remap="p">If you are running this kernel:</para>
                     <orderedlist id="old138e25" remap="ol">
 					
                        <listitem id="lid138e27" remap="li">
                           <para remap="#PCDATA">Update to kernel version 2.6.32-33 or higher.</para>
                        </listitem>
 					
                        <listitem id="lid138e30" remap="li">
                           <para remap="#PCDATA">De-register the failed image (<literal id="cdphd138e32" remap="codeph">euca-deregister</literal>).</para>
                        </listitem>
 					
                        <listitem id="lid138e36" remap="li">
                           <para remap="#PCDATA">Re-register the bundle that you
 						uploaded (<literal id="cdphd138e38" remap="codeph">euca-register &lt;bucket&gt;/&lt;manifest&gt;</literal>).</para>
                        </listitem>
 				
                     </orderedlist>
                  </listitem>
 		
               </varlistentry>
 		
               <varlistentry id="dled138e44" remap="dlentry">
 			
                  <term id="dtd138e46" remap="dt">Walrus physical disk is not large enough.</term>
 			
                  <listitem id="ddd138e49" remap="dd">
                     <orderedlist id="old138e50" remap="ol">
 				
                        <listitem id="lid138e52" remap="li">
                           <para remap="#PCDATA">Stop the CLC.</para>
                        </listitem>
 				
                        <listitem id="lid138e55" remap="li">
                           <para remap="#PCDATA">Add a disk.</para>
                        </listitem>
 				
                        <listitem id="lid138e58" remap="li">
                           <para remap="#PCDATA">Migrate your data.</para>
                        </listitem>
 			
                     </orderedlist>
                     <para id="parad138e62" remap="p">Make sure you use LVM with your new disk drive(s).</para>
                  </listitem>
 		
               </varlistentry>
 	
            </variablelist>
 		
 
         </section>
         <section remap="concept" id="conceptId">
            <title id="ttld139e3" remap="title">Access and Identities</title>
            <para id="parad139e6" remap="shortdesc"/>
 	
 	
            <variablelist id="dld139e10" remap="dl">
 		
               <varlistentry id="dled139e12" remap="dlentry">
 			
                  <term id="dtd139e14" remap="dt">Need to verify an existing LIC file.</term>
 			
                  <listitem id="ddd139e17" remap="dd">
                     <orderedlist id="old139e19" remap="ol">
 					
                        <listitem id="lid139e21" remap="li">
                           <para remap="#PCDATA">Enter the following command:
 						
 						</para>
                           <programlisting id="cdblkd139e23" remap="codeblock">/usr/sbin/euca-describe-properties | grep ldap</programlisting>
                           <para id="parad139e26" remap="p">The output from the example above shows the name of the LIC file and status of the synchronization (set to false).</para>
                           <programlisting id="cdblkd139e29" remap="codeblock">PROPERTY  authentication.ldap_integration_configuration	{ 'sync': { 'enable':'false' } }</programlisting>
                        </listitem>
 				
                     </orderedlist>
                  </listitem>
 		
               </varlistentry>
 	
            </variablelist>
 
         </section>
         <section remap="concept" id="ts_imgs_win">
            <title id="ttld140e3" remap="title">Windows Images</title>
            <para id="parad140e6" remap="shortdesc"/>
 	
            <para id="parad140e10" remap="p">
               <remark id="spd140e11" remap="draft-comment">Concept definition.</remark>
            </para>
 	
            <sidebar remap="section" id="win_img_props">
               <title id="ttld140e16" remap="title">Properties</title>
               <para id="parad140e19" remap="p">A typical size of Windows images is large and Eucalyptus has a set of properties that limit
 			the size of various storage components. The first step in troubleshooting is to make sure that the values are large enough to store your Windows images. You can modify a property using</para>
               <programlisting id="cdblkd140e22" remap="codeblock">/usb/sbin/euca-modify-property -p &lt;property&gt;=&lt;value&gt;</programlisting>
               <para id="parad140e25" remap="p">The properties that might affect registering Windows images are:</para>
               <itemizedlist id="uld140e28" remap="ul">
 			
 			
                  <listitem id="lid140e30" remap="li">
                     <para remap="#PCDATA">
                        <literal id="cdphd140e31" remap="codeph">walrus.storagemaxbucketsizeinmb</literal>: max bucket size enforced by Walrus; should be larger than a Windows image</para>
                  </listitem>
 			
                  <listitem id="lid140e35" remap="li">
                     <para remap="#PCDATA">
                        <literal id="cdphd140e36" remap="codeph">walrus.storagemaxcachesizeinmb</literal>: total size of all images that is cached in Walrus; should be larger than the sum of all images (Windows/Linux) in Walrus</para>
                  </listitem>
 			
                  <listitem id="lid140e40" remap="li">
                     <para remap="#PCDATA">walrus.storagemaxtotalsnapshotsizeingb: if a Windows image is a type of EBS-backed EMI, this should be large enough to store all EBS backed images</para>
                  </listitem>
 			
                  <listitem id="lid140e43" remap="li">
                     <para remap="#PCDATA">
                        <literal id="cdphd140e44" remap="codeph">{PARTITION}.storage.maxvolumesizeingb</literal>: if a Windows image is a type of EBS-backed EMI, this should be large enough to store the image</para>
                  </listitem>
 		
               </itemizedlist>
               <para id="parad140e49" remap="p">In addition, during the <command id="cmdnmd140e51" remap="cmdname">euca-run-instances</command>, the CLC may time-out an
 			instance while a large windows image (images in both Walrus and EBS) is being launched. We
 			recommend that you rais the values of the following properties.</para>
               <itemizedlist id="uld140e55" remap="ul">
 		
                  <listitem id="lid140e57" remap="li">
                     <para remap="#PCDATA">
                        <literal id="cdphd140e58" remap="codeph">cloud.vmstate.instance_timeout</literal>: maximum wait time, in minutes, before the
 			instance becomes running. Am instance cannot stay in pending longer than this. Default: 60</para>
                  </listitem>
 		
                  <listitem id="lid140e62" remap="li">
                     <para remap="#PCDATA">
                        <literal id="cdphd140e63" remap="codeph">cloud.vmstate.ebs_volume_creation_timeout</literal>: maximum wait time, in minutes,
 			before a volume backing a boot from EBS image is created. Default: 30</para>
                  </listitem>
 		
                  <listitem id="lid140e67" remap="li">
                     <para remap="#PCDATA">
                        <literal id="cdphd140e68" remap="codeph">cloud.addresses.maxkillorphans</literal>: The public IP assigned to an instance will be
 			expired after the time limit. The exact time-out is {maxkillorphans*5} seconds (by default it's
 			50 seconds). If the volume backing an EBS image is not created in time, the public IP will be released from the instance.</para>
                  </listitem>
 		
               </itemizedlist>
            </sidebar>
 	
 	
            <sidebar id="sctnd140e74" remap="section">
               <title id="ttld140e76" remap="title">Image Preparation</title>
               <variablelist id="dld140e79" remap="dl">
 		
                  <varlistentry id="dled140e81" remap="dlentry">
 			
                     <term id="dtd140e83" remap="dt">
                        <command id="cmdnmd140e84" remap="cmdname">euca-bundle-image</command> hangs</term>
 			
                     <listitem id="ddd140e88" remap="dd">
                        <para remap="#PCDATA">The time to bundle an image is proportional to the image size. Because the typical size of Windows image is big, give enough time until bundling is complete. As a rule of thumb, it may take up to 20 min. for bundling a 10 GB Windows image.</para>
                     </listitem>
 		
                  </varlistentry>
 		
                  <varlistentry id="dled140e92" remap="dlentry">
 			
                     <term id="dtd140e94" remap="dt">
                        <command id="cmdnmd140e95" remap="cmdname">euca-upload-bundle</command> fails</term>
 			
                     <listitem id="ddd140e99" remap="dd">
                        <para remap="#PCDATA">Make sure ‘walrus.storagemaxbucketsizeinmb’ is large enough. If not, ask your administrator.</para>
                     </listitem>
 		
                  </varlistentry>
 	
               </variablelist>
            </sidebar>
 	
            <sidebar id="sctnd140e105" remap="section">
               <title id="ttld140e107" remap="title">Instance Launch and Login</title>
               <variablelist id="dld140e110" remap="dl">
 			
                  <varlistentry id="dled140e112" remap="dlentry">
 				
                     <term id="dtd140e114" remap="dt">Instance stays in pending</term>
 				
                     <listitem id="ddd140e117" remap="dd">
                        <para remap="#PCDATA">Typically, it takes longer to launch Windows images than Linux images as the delay is proportional to the image size. This can be especially long when the image is seeded on NCs the first time (images are cached in NCs and run within few seconds thereafter). As a rule of thumb, 10 GB Windows images may take up to 10 minutes to become ‘running’ when it is not cached in NCs.</para>
                     </listitem>
 			
                  </varlistentry>
 			
                  <varlistentry id="dled140e121" remap="dlentry">
 				
                     <term id="dtd140e123" remap="dt">Instance stay in pending and goes to shutdown</term>
 				
                     <listitem id="ddd140e126" remap="dd">
                        <para remap="#PCDATA">An instance may time-out if the Windows image is too big. Review and
 					adjust the relevant properties.</para>
                     </listitem>
 			
                  </varlistentry>
 			
                  <varlistentry id="dled140e130" remap="dlentry">
 				
                     <term id="dtd140e132" remap="dt">Instance is running, but not accessible using Remote Desktop.</term>
 				
                     <listitem id="ddd140e135" remap="dd">
                        <para remap="#PCDATA">after instances become running, you should wait until Windows is fully booted. If the image is sysprepped, the booting time may take up to 10 min. Also you should make sure the followings are cleared:
 				</para>
                        <itemizedlist id="uld140e137" remap="ul">
 					
                           <listitem id="lid140e139" remap="li">
                              <para remap="#PCDATA">The port 3389 is authorized in the security group</para>
                           </listitem>
 					
                           <listitem id="lid140e142" remap="li">
                              <para remap="#PCDATA">If the instance is attached to your active directory domain, the domain GPO shouldn’t block the RDP port (3389)</para>
                           </listitem>
 					
                           <listitem id="lid140e145" remap="li">
                              <para remap="#PCDATA">The username should be authorized to log-in using Remote Desktop (refer to User guide: Windows integration service)</para>
                           </listitem>
 				
                        </itemizedlist>
                     </listitem>
 			
                  </varlistentry>
 			
                  <varlistentry id="dled140e151" remap="dlentry">
 				
                     <term id="dtd140e153" remap="dt">Finding the login username and password</term>
 				
                     <listitem id="ddd140e156" remap="dd">
                        <para remap="#PCDATA">Use <userinput id="usrinptd140e158" remap="userinput">Administrator</userinput> and the password retrieved by <command id="cmdnmd140e161" remap="cmdname">euca-get-password</command>. If the instance is attached to a domain, you may use your domain username and password (make sure the username is prepended with domain name, such as <filename id="flpthd140e164" remap="filepath">YOUR_DOMAIN\Alice</filename>). </para>
                     </listitem>
 			
                  </varlistentry>
 			
                  <varlistentry id="dled140e169" remap="dlentry">
 				
                     <term id="dtd140e171" remap="dt">Can’t retrieve windows password using <command id="cmdnmd140e173" remap="cmdname">euca-get-password</command>
                     </term>
 				
                     <listitem id="ddd140e176" remap="dd">
                        <para remap="#PCDATA">Make sure the platform field of your windows EMI is set to ‘windows’, not ‘linux’ (use <command id="cmdnmd140e178" remap="cmdname">euca-describe-images</command>). If not, the most likely reason is that the image name does not begin with ‘windows’. You should bundle/upload/register the image with a proper name.</para>
                     </listitem>
 			
                  </varlistentry>
 			
                  <varlistentry id="dled140e183" remap="dlentry">
 				
                     <term id="dtd140e185" remap="dt">Instance is not attached to an Active Directory domain</term>
 				
                     <listitem id="ddd140e188" remap="dd">
                        <itemizedlist id="uld140e190" remap="ul">
 						
                           <listitem id="lid140e192" remap="li">
                              <para remap="#PCDATA">Make sure the parameters set in Windows integration service are correct. One way to verify them is to log in the instance using Administrator password and manually attach the instance to the domain (System Properties -&gt; Computer Name) using the same parameters.</para>
                           </listitem>
 						
                           <listitem id="lid140e195" remap="li">
                              <para remap="#PCDATA">Make sure <literal id="cdphd140e197" remap="codeph">VNET_DNS</literal> in eucalyptus.conf is set to the domain controller (refer to User Guide: Configure Active Directory).</para>
                           </listitem>
 					
                        </itemizedlist>
                     </listitem>
 			
                  </varlistentry>
 		
               </variablelist>
            </sidebar>
 	
            <sidebar id="sctnd140e206" remap="section">
               <title id="ttld140e208" remap="title">Disk and Volume</title>
               <variablelist id="dld140e211" remap="dl">
 			
                  <varlistentry id="dled140e213" remap="dlentry">
 				
                     <term id="dtd140e215" remap="dt">Ephemeral disks are not visible in the Windows</term>
 				
                     <listitem id="ddd140e218" remap="dd">
                        <para remap="#PCDATA">Open Disk Management console (<guilabel id="uictrld140e220" remap="uicontrol">All Programs</guilabel>-&gt;<guilabel id="uictrld140e223" remap="uicontrol">Administrative Tools</guilabel>-&gt;<guilabel id="uictrld140e226" remap="uicontrol">Server Manager</guilabel>-&gt;<guilabel id="uictrld140e229" remap="uicontrol">Storage</guilabel>) and find the uninitialized disks. You should create a partition on the disk and format it.</para>
                     </listitem>
 			
                  </varlistentry>
 			
                  <varlistentry id="dled140e234" remap="dlentry">
 				
                     <term id="dtd140e236" remap="dt">EBS volume is attached, but not visible in the Windows</term>
 				
                     <listitem id="ddd140e239" remap="dd">
                        <para remap="#PCDATA">Open Disk Management console (<guilabel id="uictrld140e241" remap="uicontrol">All Programs</guilabel>-&gt;<guilabel id="uictrld140e244" remap="uicontrol">Administrative Tools</guilabel>-&gt;<guilabel id="uictrld140e247" remap="uicontrol">Server Manager</guilabel>-&gt;<guilabel id="uictrld140e250" remap="uicontrol">Storage</guilabel>) and find the uninitialized disks. You should create a partition on the disk and format it. You don’t have to repeat it when the volume is reattached later.</para>
                     </listitem>
 			
                  </varlistentry>
 			
                  <varlistentry id="dled140e255" remap="dlentry">
 				
                     <term id="dtd140e257" remap="dt">EBS volume is detached, but the disk drive (for example, <filename id="flpthd140e259" remap="filepath">E:\</filename>) is still visible in the Windows</term>
 				
                     <listitem id="ddd140e263" remap="dd">
                        <para remap="#PCDATA">For KVM hypervisor, you should perform “remove hardware safely” before detaching the volume.</para>
                     </listitem>
 			
                  </varlistentry>
 			
                  <varlistentry id="dled140e267" remap="dlentry">
 				
                     <term id="dtd140e269" remap="dt">
                        <command id="cmdnmd140e270" remap="cmdname">euca-bundle-instance</command> fails</term>
 				
                     <listitem id="ddd140e274" remap="dd">
                        <para remap="#PCDATA">Make sure the bucket specified with ‘-b’ option doesn’t already exist and the property ‘walrus.storagemaxbucketsizeinmb’ is large enough to store the image.
 				</para>
                     </listitem>
 			
                  </varlistentry>
 		
               </variablelist>
            </sidebar>
 
         </section>
         <section remap="concept" id="ts_intances">
            <title id="ttld141e3" remap="title">Instances</title>
            <para id="parad141e6" remap="shortdesc"/>
 	
            <variablelist id="dld141e10" remap="dl">
 		
               <varlistentry id="dled141e12" remap="dlentry">
 			
                  <term id="dtd141e14" remap="dt">Inaccurate IP addresses display in the output of euca-describe-addresses.</term>
 			
                  <listitem id="ddd141e17" remap="dd">
                     <para id="parad141e19" remap="p">This can occur if you add IPs from the wrong subnet into your public IP pool, do a cleanrestart
 					on the CC, swap out the wrong ones for the right ones, and do another clean restart on the CC. To resolve this
 					issue, run the following:</para>
                     <programlisting id="cdblkd141e22" remap="codeblock">/etc/init.d/eucalyptus-cloud stop
/etc/init.d/eucalyptus-cc stop
iptables -F
/etc/init.d/eucalyptus-cc cleanrestart
/etc/init.d/eucalyptus-cloud start</programlisting>
                  </listitem>
 		
               </varlistentry>
 	
            </variablelist>
 
         </section>
      </section>
      <section remap="concept" id="failover">
         <title id="ttld142e3" remap="title">Recovering from a Fail: Walrus</title>
         <para id="parad142e6" remap="shortdesc"/>
 	
 	
         <para id="parad142e10" remap="p">In these examples, we will assume that Walrus <literal id="cdphd142e12" remap="codeph">WS00</literal> is the primary and <literal id="cdphd142e15" remap="codeph">WS01</literal> is the secondary Walrus server.</para>
 	
         <sidebar id="sctnd142e19" remap="section">
            <title id="ttld142e21" remap="title">Software Failure Example</title>
            <para id="parad142e24" remap="p">In this scenario, <literal id="cdphd142e26" remap="codeph">WS01</literal> refuses to go to <literal id="cdphd142e29" remap="codeph">DISABLED</literal> state. DRBD complains that it is in split brain mode. <literal id="cdphd142e32" remap="codeph">drbdadm cstate r0</literal> shows that DRBD is in WFConnection state.</para>
            <para id="parad142e36" remap="p">If you are sure that data on <literal id="cdphd142e38" remap="codeph">WS01</literal> is out of date and can be discarded, execute
 		the following commands to restore HA mode.</para>
            <orderedlist id="old142e42" remap="ol">
 	
               <listitem id="lid142e44" remap="li">
                  <para remap="#PCDATA">Shut down the eucalyptus-cloud process on WS01.</para>
               </listitem>
 	
 	
               <listitem id="lid142e47" remap="li">
                  <para remap="#PCDATA">Ensure that the DRBD connection is down by typing "drbdadm disconnect r0" on any of the two Walrus hosts.</para>
               </listitem>
 	
 	
               <listitem id="lid142e50" remap="li">
                  <para remap="#PCDATA">On the primary Walrus, WS00, set drbd as the primary by executing "drbdadm primary r0"</para>
               </listitem>
 	
 
               <listitem id="lid142e53" remap="li">
                  <para remap="#PCDATA">	On the secondary Walrus, WS01, execute the following command:
 </para>
                  <programlisting id="cdblkd142e55" remap="codeblock">drbdadm -- --discard-my-data connect</programlisting>
               </listitem>
 
 	
 	
               <listitem id="lid142e62" remap="li">
                  <para remap="#PCDATA">Monitor the state of DRBD by running:
 	</para>
                  <programlisting id="cdblkd142e64" remap="codeblock">watch -n 2 cat /proc/drbd</programlisting>
               </listitem>
 	
 	
               <listitem id="lid142e67" remap="li">
                  <para remap="#PCDATA">When the data on WS01 is synced, start the eucalyptus-cloud process on WS01.</para>
               </listitem>
 	
            </orderedlist>
         </sidebar>
 	
 	
         <sidebar id="sctnd142e72" remap="section">
            <title id="ttld142e74" remap="title">Hardware Failure Example</title>
            <para id="parad142e77" remap="p">In this example, the primary <literal id="cdphd142e79" remap="codeph">WS00</literal> needs to be taken out of service due to a
 		hardware failure, such as a failed disk.</para>
            <orderedlist id="old142e83" remap="ol">
 			
               <listitem id="lid142e85" remap="li">
                  <para remap="#PCDATA">Shut down the eucalyptus-cloud process on WS00 if it is still running.</para>
               </listitem>
 			
 			
               <listitem id="lid142e88" remap="li">
                  <para remap="#PCDATA">Monitor service status by running <command id="cmdnmd142e90" remap="cmdname">euca-describe-services</command> on WS01 and ensure that WS01 has taken over as the new primary (state: ENABLED).</para>
               </listitem>
 			
 			
               <listitem id="lid142e94" remap="li">
                  <para remap="#PCDATA">Shut down the host running WS00.</para>
               </listitem>
 			
 			
               <listitem id="lid142e97" remap="li">
                  <para remap="#PCDATA">If the host running WS00 is to be replaced entirely or the OS reinstalled:
 			</para>
                  <itemizedlist id="uld142e99" remap="ul">
 			
                     <listitem id="lid142e101" remap="li">
                        <para remap="#PCDATA">On the primary CLC, enter the following to deregister WS00:
 				</para>
                        <programlisting id="cdblkd142e103" remap="codeblock">euca_conf --deregister-walrus --component WS00 partition &lt;name of partition&gt;
 					--host &lt;WS00 host&gt;</programlisting>
                     </listitem>
 				
                     <listitem id="lid142e107" remap="li">
                        <para remap="#PCDATA">After Linux has been installed on the new WS00 host and it is ready for use, please reinstall the "eucalyptus-walrus" package.</para>
                     </listitem>
 				
                     <listitem id="lid142e110" remap="li">
                        <para remap="#PCDATA">Synchronize the DRBD configuration (/etc/drbd.conf and /etc/eucalyptus/drbd*) from the WS01 host.</para>
                     </listitem>
 				
                     <listitem id="lid142e113" remap="li">
                        <para remap="#PCDATA">On WS00, re-configure DRBD by following the Configure DRBD section of the Installation Guide and performing the steps that are relevant to the secondary Walrus server (WS00 is the new secondary Walrus server, in this example).</para>
                     </listitem>
 				
                     <listitem id="lid142e116" remap="li">
                        <para remap="#PCDATA">Re-register WS00 with a new host name if necessary. This will synchronize keys.</para>
                     </listitem>
 			
                  </itemizedlist>
               </listitem>
 				
 				
               <listitem id="lid142e121" remap="li">
                  <para remap="#PCDATA">On WS00, execute the following command:
 				
 				</para>
                  <programlisting id="cdblkd142e123" remap="codeblock">drbdadm -- --discard-my-data connect</programlisting>
               </listitem>
 				
               <listitem id="lid142e130" remap="li">
                  <para remap="#PCDATA">Monitor the state of DRBD by entering:
 					</para>
                  <programlisting id="cdblkd142e132" remap="codeblock">watch -n 2 cat /proc/drbd</programlisting>
                  <para id="parad142e135" remap="p">WS01 should be marked as the primary and WS00 is the new secondary. Wait until data is synchronized.</para>
               </listitem>

 				
               <listitem id="lid142e139" remap="li">
                  <para remap="#PCDATA">When the data on WS00 is synced from WS01, start the eucalyptus-cloud process on WS00.</para>
               </listitem>
 				
 			
 				
 				
               <listitem id="lid142e142" remap="li">
                  <para remap="#PCDATA">Monitor service status by running "euca-describe-services" on the primary CLC and ensure that WS00 is DISABLED and WS01 is ENABLED.</para>
               </listitem>
 		
            </orderedlist>
            <para id="parad142e146" remap="p">At this point, the Walrus service is back in HA mode.</para>
         </sidebar>
 
 	
  
 
      </section>
   </section>
   <section remap="glossgroup" id="glossary">
      <title id="ttld143e3" remap="title">Glossary</title>
      <section remap="glossentry" id="cluster">
         <title id="ttld143e8" remap="glossterm">cluster</title>
         <para id="parad143e11" remap="glossdef">A group of resources that contains a CC, an SC and, optionally, a VMware Broker.</para>
      </section>
      <section remap="glossentry" id="az">
         <title id="ttld143e17" remap="glossterm">availability zone</title>
         <para id="parad143e20" remap="glossdef">An availability zone for AWS denotes a large subset of their cloud environment. Eucalyptus refines this definition to denote a subset of the cloud that shares a local area network. Each availability zone has its own cluster controller and storage controller.</para>
      </section>
      <section remap="glossentry" id="aws">
         <title id="ttld143e26" remap="glossterm">AWS</title>
         <para id="parad143e29" remap="glossdef">Amazon Web Services</para>
      </section>
      <section remap="glossentry" id="bucket">
         <title id="ttld143e35" remap="glossterm">bucket storage</title>
         <para id="parad143e38" remap="glossdef">A storage container that accepts objects via PUT and GET commands.</para>
      </section>
      <section remap="glossentry" id="bundling">
         <title id="ttld143e44" remap="glossterm">bundling</title>
         <para id="parad143e47" remap="glossdef">A virtual machine image splits the image into multiple image parts to facilitate ease of uploading. It also generates an XML manifest file containing metadata referencing the image, including image parts and kernel, which is used to assemble instances of the image.</para>
      </section>
      <section remap="glossentry" id="clc">
         <title id="ttld143e53" remap="glossterm">Cloud Controller</title>
         <para id="parad143e56" remap="glossdef">The Cloud Controller (CLC) is the entry-point into the cloud for administrators, developers, project managers, and end-users. The CLC queries the node managers [SM1] for information about resources, makes high-level scheduling decisions, and makes requests to the Cluster Controllers (CCs). As the interface to the management platform, the CLC is responsible for exposing and managing the underlying virtualized resources (servers, network, and storage). You can access the CLC through Amazon’s Elastic Compute Cloud (EC2) and through a web-based Dashboard.</para>
      </section>
      <section remap="glossentry" id="cc">
         <title id="ttld143e62" remap="glossterm">Cluster Controller</title>
         <para id="parad143e65" remap="glossdef">The Cluster Controller (CC) generally executes on a machine that has network connectivity to both the machines running the Node Controller (NC) and to the machine running the CLC. CCs gather information about a set of node machines and schedules virtual machine (VM) execution on specific nodes. The CC also manages the virtual machine networks and participates in the enforcement of SLAs[SM3]  as directed by the CLC. All nodes associated with a single CC must be in the same broadcast domain (Ethernet).</para>
      </section>
      <section remap="glossentry" id="kernalrd">
         <title id="ttld143e71" remap="glossterm">kernel/ramdisk pair</title>
         <para id="parad143e74" remap="glossdef">A ramdisk contains drivers that direct the kernel to launch appropriate system files when instantiating a virtual machine.</para>
      </section>
      <section remap="glossentry" id="nc">
         <title id="ttld143e80" remap="glossterm">Node Controller</title>
         <para id="parad143e83" remap="glossdef">The Node Controller (NC) executes on any machine that hosts VM instances. The NC controls VM activities, including the execution, inspection, and termination of VM instances. It also fetches and maintains a local cache of instance images, and it queries and controls the system software (host OS and the hypervisor) in response to queries and control requests from the CC. The NC is also responsible for the management of the virtual network endpoint.</para>
      </section>
      <section remap="glossentry" id="sc">
         <title id="ttld143e89" remap="glossterm">Storage Controller</title>
         <para id="parad143e92" remap="glossdef">The Storage Controller (SC) provides functionality similar to the [5] Amazon Elastic Block Storage (EBS) and is capable of interfacing with various storage systems (NFS, iSCSI, SAN devices, etc.). Elastic block storage exports storage volumes that can be attached by a VM and mounted or accessed as a raw block device.  EBS volumes persist past VM termination and are commonly used to store persistent data.   An EBS volume cannot be shared between VMs and can only be accessed within the same availability zone in which the VM is running.  Users can create snapshots from EBS volumes. Snapshots are stored in Walrus and made available across availability zones. Eucalyptus with SAN support lets you use your enterprise-grade SAN devices to host EBS storage within a Eucalyptus cloud.</para>
      </section>
      <section remap="glossentry" id="broker">
         <title id="ttld143e98" remap="glossterm">VMware Broker</title>
         <para id="parad143e101" remap="glossdef">VMware Broker (Broker) is an optional Eucalyptus component activated only in versions of Eucalyptus with VMware support. VMware Broker enables Eucalyptus to deploy VMs on VMware infrastructure elements and mediates all interactions between the Cluster Controller (CC) and VMware hypervisors (ESX/ESXi) either directly or through VMware vCenter.</para>
      </section>
      <section remap="glossentry" id="walrus">
         <title id="ttld143e107" remap="glossterm">Walrus</title>
         <para id="parad143e110" remap="glossdef">Walrus allows users to store persistent data, organized as buckets and objects. You can
	use Walrus to create, delete, and list buckets, or to put, get, and delete objects, or to set
	access control policies. Walrus is interface compatible with Amazon’s Simple Storage Service (S3),
	providing a mechanism for storing and accessing virtual machine images and user data.  Note that
	Walrus access is global to the entire Eucalyptus cloud. This means that it can be accessed by
	end-users, whether the user is running a client from outside the cloud or from a virtual machine instance running inside the cloud.</para>
      </section>
   </section>
</article>
